import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as i,c as l,d as n}from"./app.8cb44e8f.js";const s={},d=n(`<h1 id="\u57FA\u7840\u77E5\u8BC6" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u77E5\u8BC6" aria-hidden="true">#</a> \u57FA\u7840\u77E5\u8BC6</h1><p><strong>SQL\u7684\u6982\u5FF5</strong>\uFF1AStructured Query Language\uFF0C\u7ED3\u6784\u5316\u67E5\u8BE2\u8BED\u8A00\u3002\u5B9A\u4E49\u4E86\u64CD\u4F5C\u6240\u6709\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7684\u89C4\u5219\u3002</p><p>SQL\u8BED\u53E5\u5206\u7C7B</p><ul><li>DDL(Data Definition Language)\u6570\u636E\u5B9A\u4E49\u8BED\u8A00 <ul><li>\u5B9A\u4E49\u6570\u636E\u5E93\u3001\u8868\u3001\u89C6\u56FE\u3001\u5217\u7B49\u3002</li><li>\u5173\u952E\u5B57\uFF1A<code>CREATE</code>\u3001<code>DROP</code>\u3001<code>ALTER</code>\u7B49</li></ul></li><li>DML(Manipulation)\u6570\u636E\u64CD\u4F5C\u8BED\u8A00 <ul><li>\u5BF9\u8868\u4E2D\u6570\u636E\u8FDB\u884C\u589E\u5220\u6539</li><li>\u5173\u952E\u5B57\uFF1A<code>INSERT</code>\u3001<code>DELETE</code>\u3001<code>UPDATE</code>\u7B49</li></ul></li><li>DQL(Query)\u6570\u636E\u67E5\u8BE2\u8BED\u8A00 <ul><li>\u5BF9\u8868\u4E2D\u6570\u636E\u8FDB\u884C\u67E5\u8BE2</li><li>\u5173\u952E\u5B57\uFF1A<code>SELECT</code>\u3001<code>WHERE</code>\u7B49</li></ul></li><li>DCL(Control)\u6570\u636E\u63A7\u5236\u8BED\u8A00 <ul><li>\u5B9A\u4E49\u6570\u636E\u5E93\u7684\u8BBF\u95EE\u6743\u9650\u548C\u5B89\u5168\u7EA7\u522B\u4EE5\u53CA\u521B\u5EFA\u7528\u6237</li><li>\u5173\u952E\u5B57\uFF1A<code>GRANT</code>\u3001<code>REVOKE</code>\u7B49</li></ul></li></ul><p><strong>\u67B6\u6784\u56FE</strong></p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrmbg5m2j30c40ha0yn.jpg" alt=""></p><h2 id="\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> \u6570\u636E\u7C7B\u578B</h2><ul><li><p>\u6574\u6570\u7C7B\u578B</p><blockquote><p>\u663E\u793A\u5BBD\u5EA6\u548C\u6570\u636E\u7C7B\u578B\u7684\u53D6\u503C\u8303\u56F4\u662F\u65E0\u5173\u7684\u3002\u663E\u793A\u5BBD\u5EA6\u53EA\u662F\u6307\u660E MySQL \u6700\u5927\u53EF\u80FD\u663E\u793A\u7684\u6570\u5B57\u4E2A\u6570\uFF0C\u5E76\u4E14\u9700\u8981\u542F\u7528\u586B\u5145\u96F6\u7684\u9009\u9879\u624D\u6709\u6548\uFF0C\u6570\u503C\u7684\u4F4D\u6570\u5C0F\u4E8E\u6307\u5B9A\u7684\u5BBD\u5EA6\u65F6\u4F1A\u75310\u586B\u5145\u3002\u5982\u679C\u63D2\u5165\u4E86\u5927\u4E8E\u663E\u793A\u5BBD\u5EA6\u7684\u503C\uFF0C\u53EA\u8981\u8BE5\u503C\u4E0D\u8D85\u8FC7\u8BE5\u7C7B\u578B\u6574\u6570\u7684\u53D6\u503C\u8303\u56F4\uFF0C\u6570\u503C\u4F9D\u7136\u53EF\u4EE5\u63D2\u5165\uFF0C\u800C\u4E14\u80FD\u591F\u663E\u793A\u51FA\u6765\u3002\u4F8B\u5982\uFF0Cyear \u5B57\u6BB5\u63D2\u5165 19999\uFF0C\u5F53\u4F7F\u7528 SELECT \u67E5\u8BE2\u8BE5\u5217\u503C\u7684\u65F6\u5019\uFF0CMySQL \u663E\u793A\u7684\u5C06\u662F\u5B8C\u6574\u7684\u5E26\u6709 5 \u4F4D\u6570\u5B57\u7684 19999\uFF0C\u800C\u4E0D\u662F 4 \u4F4D\u6570\u5B57\u7684\u503C</p></blockquote><ul><li><p>tinyint\uFF0C1\u4E2A\u5B57\u8282\uFF0C-128<sub>127(\u6709\u7B26\u53F7)\u30010</sub>255(\u65E0\u7B26\u53F7)</p><blockquote><p><strong>Java\u4E2DBoolean\u7C7B\u578B\u53D8\u91CF\u53EF\u4EE5\u7528tinyint\u7C7B\u578B\u7684\u5B57\u6BB5</strong>\uFF0CMySQL\u91CC\u6709\u56DB\u4E2A\u5E38\u91CF\uFF1Atrue\u3001false\u3001TRUE\u3001FALSE\u5206\u522B\u4EE3\u88681\u30010\u30011\u30010\u3002MySQL\u4FDD\u5B58boolean\u503C\u65F6\u75281\u4EE3\u8868TRUE\uFF0C0\u4EE3\u8868FALSE</p></blockquote></li><li><p>smallint\uFF0C2\u4E2A\u5B57\u8282</p></li><li><p>mediumint\uFF0C3\u4E2A\u5B57\u8282</p></li><li><p>int\uFF0C4\u4E2A\u5B57\u8282</p></li><li><p>bigint\uFF0C8\u4E2A\u5B57\u8282</p></li></ul></li><li><p>\u5C0F\u6570\u7C7B\u578B</p><blockquote><p>\u6D6E\u70B9\u7C7B\u578B\u548C\u5B9A\u70B9\u7C7B\u578B\u90FD\u53EF\u4EE5\u7528<code>(M, D)</code>\u6765\u8868\u793A\uFF0C\u5176\u4E2D<code>M</code>\u79F0\u4E3A\u7CBE\u5EA6\uFF0C\u8868\u793A\u603B\u5171\u7684\u4F4D\u6570\uFF1B<code>D</code>\u79F0\u4E3A\u6807\u5EA6\uFF0C\u8868\u793A\u5C0F\u6570\u7684\u4F4D\u6570\u3002</p><p>\u6D6E\u70B9\u6570\u7C7B\u578B\u7684\u53D6\u503C\u8303\u56F4\u4E3A M\uFF081\uFF5E255\uFF09\u548C D\uFF081\uFF5E30\uFF0C\u4E14\u4E0D\u80FD\u5927\u4E8E M-2\uFF09\uFF0C\u5206\u522B\u8868\u793A\u663E\u793A\u5BBD\u5EA6\u548C\u5C0F\u6570\u4F4D\u6570\u3002M \u548C D \u5728 FLOAT \u548CDOUBLE \u4E2D\u662F\u53EF\u9009\u7684\uFF0CFLOAT \u548C DOUBLE \u7C7B\u578B\u5C06\u9ED8\u8BA4\u4F1A\u6309\u7167\u5B9E\u9645\u7684\u7CBE\u5EA6\uFF08\u7531\u8BA1\u7B97\u673A\u786C\u4EF6\u548C\u64CD\u4F5C\u7CFB\u7EDF\u51B3\u5B9A\uFF09\u3002<strong>DECIMAL \u7684\u9ED8\u8BA4 D \u503C\u4E3A 0\u3001M \u503C\u4E3A 10</strong>\u3002</p><p>\u4E0D\u8BBA\u662F\u5B9A\u70B9\u8FD8\u662F\u6D6E\u70B9\u7C7B\u578B\uFF0C\u5982\u679C\u7528\u6237\u6307\u5B9A\u7684\u7CBE\u5EA6<strong>\u8D85\u51FA\u7CBE\u5EA6\u8303\u56F4\uFF0C\u5219\u4F1A\u56DB\u820D\u4E94\u5165\u8FDB\u884C\u5904\u7406</strong>\u3002</p></blockquote><ul><li><p>\u6D6E\u70B9\u7C7B\u578B</p><ul><li>float\uFF0C\u5355\u7CBE\u5EA6\uFF0C4\u4E2A\u5B57\u8282</li><li>double\uFF0C\u53CC\u7CBE\u5EA6\uFF0C8\u4E2A\u5B57\u8282</li></ul></li><li><p>\u5B9A\u70B9\u7C7B\u578B</p><ul><li><p>decimal\uFF0CM+2\u4E2A\u5B57\u8282</p><blockquote><p>\u5728 MySQL \u4E2D\uFF0C\u5B9A\u70B9\u6570\u4EE5\u5B57\u7B26\u4E32\u5F62\u5F0F\u5B58\u50A8\uFF0C\u5728\u5BF9\u7CBE\u5EA6\u8981\u6C42\u6BD4\u8F83\u9AD8\u7684\u65F6\u5019\uFF08\u5982\u8D27\u5E01\u3001\u79D1\u5B66\u6570\u636E\uFF09\uFF0C\u4F7F\u7528 DECIMAL \u7684\u7C7B\u578B\u6BD4\u8F83\u597D\uFF0C\u53E6\u5916\u4E24\u4E2A\u6D6E\u70B9\u6570\u8FDB\u884C\u51CF\u6CD5\u548C\u6BD4\u8F83\u8FD0\u7B97\u65F6\u4E5F\u5BB9\u6613\u51FA\u95EE\u9898\uFF0C\u6240\u4EE5\u5728\u4F7F\u7528\u6D6E\u70B9\u6570\u65F6\u9700\u8981\u6CE8\u610F\uFF0C\u5E76\u5C3D\u91CF<strong>\u907F\u514D\u505A\u6D6E\u70B9\u6570\u6BD4\u8F83</strong></p></blockquote></li></ul></li></ul></li><li><p>\u65E5\u671F\u7C7B\u578B</p><ul><li>year\uFF0C\u683C\u5F0F<code>yyyy</code>\uFF0C\u8303\u56F4<code>1901~2155</code>\uFF0C1\u4E2A\u5B57\u8282\u3002\u53EF\u4EE5\u63A5\u53D7\u6574\u578B\u548C\u5B57\u7B26\u4E32\uFF0C\u6240\u4EE5\u7A0B\u5E8F\u4E2D\u8BB0\u5F55\u5E74\u4EFD\u65F6\u53EF\u4EE5\u4F7F\u7528\u5B57\u7B26\u4E32</li><li>time\uFF0C\u683C\u5F0F<code>HH:mm:ss</code>\uFF0C\u8303\u56F4<code>-838:59:59 ~ 838:59:59</code>\uFF0C3\u4E2A\u5B57\u8282</li><li>date\uFF0C\u683C\u5F0F<code>yyyy-MM-dd</code>\uFF0C\u8303\u56F4<code>1000-01-01 ~ 9999-12-3</code>\uFF0C3\u4E2A\u5B57\u8282</li><li>datetime\uFF0C\u683C\u5F0F<code>yyyy-MM-dd HH:mm:ss</code>\uFF0C\u8303\u56F4<code>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</code>\uFF0C8\u4E2A\u5B57\u8282</li><li>timestamp\uFF0C\u683C\u5F0F<code>yyyy-MM-dd HH:mm:ss</code>\uFF0C\u8303\u56F4<code>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</code>\uFF0C4\u4E2A\u5B57\u8282\u3002\u5982\u679C\u4E0D\u7ED9\u8FD9\u4E2A\u5B57\u6BB5\u8D4B\u503C\uFF0C\u6216\u8005\u8D4B\u503C\u4E3Anull\uFF0C\u90A3\u4E48\u9ED8\u8BA4\u4F7F\u7528\u7CFB\u7EDF\u5F53\u524D\u65F6\u95F4\u6765\u81EA\u52A8\u8D4B\u503C</li><li>datetime\u548Ctimestamp\u7684\u533A\u522B <ul><li><strong>\u5B58\u50A8\u65B9\u5F0F\u4E0D\u4E00\u6837</strong>\uFF0Ctimestamp\u5B58\u50A8\u65F6\u4ECE\u5BA2\u6237\u7AEF\u65F6\u533A\u8F6C\u6362\u6210UTC\u8FDB\u884C\u5B58\u50A8\uFF0C\u67E5\u8BE2\u65F6\u4ECEUTC\u8F6C\u6362\u5230\u5BA2\u6237\u7AEF\u65F6\u533A\u8FD4\u56DE\uFF1Bdatetime\u4E0D\u8F6C\u6362\uFF0C\u539F\u6837\u5B58\u50A8\u548C\u8BFB\u53D6</li><li><strong>\u65F6\u95F4\u8303\u56F4\u4E0D\u4E00\u6837</strong>\uFF0Ctimestamp\u5B58\u50A8\u7684\u8303\u56F4\u4E3A1970-01-01\uFF5E 2038-01-19\uFF1Bdatetime\u5B58\u50A8\u7684\u8303\u56F4\u4E3A1000-01-01 \uFF5E 9999-12-31</li></ul></li></ul></li><li><p>\u5B57\u7B26\u4E32\u7C7B\u578B</p><blockquote><p>\u5B57\u7B26\u4E32\u7C7B\u578B\u53EF\u4EE5\u5728\u5B9A\u4E49\u65F6\u4F7F\u7528M\u6765\u6307\u5B9A\u957F\u5EA6</p></blockquote><ul><li><p>char(M)\uFF0C\u56FA\u5B9A\u957F\u5EA6\u5B57\u7B26\u4E32\uFF0CM\u4E2A\u5B57\u8282</p></li><li><p>varchar(M)\uFF0C\u53EF\u53D8\u957F\u5EA6\u5B57\u7B26\u4E32\uFF0C\u5F53\u5B9E\u9645\u5B58\u50A8\u7684\u957F\u5EA6L\u5C0F\u4E8EM\uFF0C\u5219\u9700\u8981L+1\u4E2A\u5B57\u8282\uFF1B\u5F53\u5B9E\u9645\u5B58\u50A8\u7684\u957F\u5EA6\u7B49\u4E8EM\uFF0C\u5219\u9700\u8981M+1\u4E2A\u5B57\u8282</p></li><li><p>enum\uFF0C\u4E00\u4E2A\u5B57\u7B26\u4E32\u5BF9\u8C61\uFF0C\u503C\u4E3A\u8868\u521B\u5EFA\u65F6\u5217\u89C4\u5B9A\u4E2D\u679A\u4E3E\u7684\u4E00\u5217\u503C\uFF0C\u8BED\u6CD5<code>&lt;\u5B57\u6BB5\u540D&gt; ENUM( &#39;\u503C1&#39;, &#39;\u503C1&#39;, \u2026, &#39;\u503Cn&#39; )</code>\uFF0C\u4ECE 1 \u5F00\u59CB\u7F16\u53F7\u3002\u4F9D\u7167\u5217\u7D22\u5F15\u987A\u5E8F\u6392\u5217\uFF0C\u5E76\u4E14\u7A7A\u5B57\u7B26\u4E32\u6392\u5728\u975E\u7A7A\u5B57\u7B26\u4E32\u524D\uFF0CNULL \u503C\u6392\u5728\u5176\u4ED6\u6240\u6709\u679A\u4E3E\u503C\u524D\u3002ENUM \u5217\u603B\u6709\u4E00\u4E2A\u9ED8\u8BA4\u503C\u3002\u5982\u679C\u5C06 ENUM \u5217\u58F0\u660E\u4E3A NULL\uFF0CNULL \u503C\u5219\u4E3A\u8BE5\u5217\u7684\u4E00\u4E2A\u6709\u6548\u503C\uFF0C\u5E76\u4E14\u9ED8\u8BA4\u503C\u4E3A NULL\u3002\u5982\u679C ENUM \u5217\u88AB\u58F0\u660E\u4E3A NOT NULL\uFF0C\u5176\u9ED8\u8BA4\u503C\u4E3A\u5141\u8BB8\u7684\u503C\u5217\u8868\u7684\u7B2C 1 \u4E2A\u5143\u7D20</p><p>\u4F8B\u5B50\uFF1A\u5B9A\u4E49enum\u7C7B\u578B\u7684\u5217(&#39;first&#39;, &#39;second&#39;, &#39;third&#39;)\uFF0C\u503C\u4E0E\u7D22\u5F15\u7684\u5BF9\u5E94\u5173\u7CFB\u5982\u4E0B\uFF1A</p><table><thead><tr><th style="text-align:center;">\u7D22\u5F15</th><th style="text-align:center;">\u503C</th></tr></thead><tbody><tr><td style="text-align:center;">null</td><td style="text-align:center;">null</td></tr><tr><td style="text-align:center;">0</td><td style="text-align:center;">&quot;&quot;</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:center;">&quot;first&quot;</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">&quot;second&quot;</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">&quot;third&quot;</td></tr></tbody></table></li><li><p>set\uFF0C\u4E00\u4E2A\u5B57\u7B26\u4E32\u7684\u5BF9\u8C61\uFF0C\u53EF\u4EE5\u6709\u96F6\u6216\u591A\u4E2A\u503C\uFF0C\u503C\u4E3A\u8868\u521B\u5EFA\u65F6\u89C4\u5B9A\u7684\u4E00\u5217\u503C\uFF0C\u8BED\u6CD5<code>SET( &#39;\u503C1&#39;, &#39;\u503C2&#39;, \u2026, &#39;\u503Cn&#39; )</code>\uFF0CMySQL\u4F1A\u81EA\u52A8\u5220\u9664\u91CD\u590D\u503C</p></li><li><p>\u5927\u6587\u672C\uFF0C\u9002\u5408\u4FDD\u5B58\u6587\u7AE0\u3001\u8BC4\u8BBA\u7B49</p><ul><li>tinytext\uFF0C\u957F\u5EA6\u4E3A255\uFF0CL+1\u4E2A\u5B57\u8282</li><li>text\uFF0C\u957F\u5EA6\u4E3A65535\uFF0CL+2\u4E2A\u5B57\u8282</li><li>mediumtext\uFF0C\u957F\u5EA6\u4E3A16777215\uFF0CL+3\u4E2A\u5B57\u8282</li><li>longtext\uFF0C\u957F\u5EA6\u4E3A4294967295\uFF0CL+4\u4E2A\u5B57\u8282</li></ul></li></ul></li><li><p>\u4E8C\u8FDB\u5236\u7C7B\u578B</p><blockquote><p>\u4E8C\u8FDB\u5236\u7C7B\u578B\u53EF\u4EE5\u5728\u5B9A\u4E49\u65F6\u4F7F\u7528M\u6765\u6307\u5B9A\u957F\u5EA6</p></blockquote><ul><li>text\uFF0C\u6587\u672C\u7C7B\u578B\uFF0C\u4E00\u822C\u7528\u6765\u5B58\u50A8\u6587\u672C\uFF0C\u6700\u5927\u957F\u5EA665535\u5B57\u8282</li><li>bit(M)\uFF0C\u4EE5<strong>\u4E8C\u8FDB\u5236\u7684\u5F62\u5F0F</strong>\u4FDD\u5B58\uFF0CM \u8868\u793A\u6BCF\u4E2A\u503C\u7684\u4F4D\u6570\uFF0C\u8303\u56F4\u4E3A 1\uFF5E64\u3002\u5982\u679C M \u88AB\u7701\u7565\uFF0C\u9ED8\u8BA4\u503C\u4E3A 1\uFF0C\u5927\u7EA6(M+7)/8\u4E2A\u5B57\u8282</li><li>binary(M)\uFF0C\u56FA\u5B9A\u957F\u5EA6\u7684\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\uFF0CM\u4E2A\u5B57\u8282</li><li>varbinary(M)\uFF0C\u53EF\u53D8\u957F\u5EA6\u7684\u4E8C\u8FDB\u5236\u5B57\u7B26\u4E32\uFF0CM+1\u4E2A\u5B57\u8282</li><li>\u4E8C\u8FDB\u5236\u5BF9\u8C61 <ul><li>tinyblob\uFF0C255\u4E2A\u5B57\u8282</li><li>blob\uFF0C65535\u4E2A\u5B57\u8282</li><li>mediumblob\uFF0C16777215\u4E2A\u5B57\u8282</li><li>longblob\uFF0C4294967295\u4E2A\u5B57\u8282</li></ul></li></ul></li></ul><h2 id="ddl" tabindex="-1"><a class="header-anchor" href="#ddl" aria-hidden="true">#</a> DDL</h2><h3 id="\u64CD\u4F5C\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#\u64CD\u4F5C\u6570\u636E\u5E93" aria-hidden="true">#</a> \u64CD\u4F5C\u6570\u636E\u5E93</h3><ul><li><p>Create\uFF1A\u521B\u5EFA</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create database \u6570\u636E\u5E93\u540D\u79F0; -- \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u6570\u636E\u5E93

create database \u6570\u636E\u5E93\u540D\u79F0 character set \u5B57\u7B26\u96C6; -- \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u6307\u5B9A\u5B57\u7B26\u96C6\u7684\u6570\u636E\u5E93

create database if not exists \u6570\u636E\u5E93\u540D\u79F0; -- \u5982\u679C\u6570\u636E\u5E93\u4E0D\u5B58\u5728\uFF0C\u5219\u521B\u5EFA\uFF1B\u5982\u679C\u5B58\u5728\uFF0C\u5219\u4E0D\u521B\u5EFA
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Retrieve\uFF1A\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show databases; -- \u67E5\u8BE2\u6240\u6709\u6570\u636E\u5E93

show create database \u6570\u636E\u5E93\u540D\u79F0; -- \u67E5\u8BE2\u67D0\u4E2A\u6570\u636E\u5E93\u7684\u521B\u5EFA\u8BED\u53E5\u548C\u5B57\u7B26\u96C6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Update\uFF1A\u4FEE\u6539</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter database \u6570\u636E\u5E93\u540D\u79F0 character set \u5B57\u7B26\u96C6; -- \u4FEE\u6539\u6570\u636E\u5E93\u7684\u5B57\u7B26\u96C6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>Delete\uFF1A\u5220\u9664</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>drop database \u6570\u636E\u5E93\u540D\u79F0; -- \u5220\u9664\u6570\u636E\u5E93

drop database if exists \u6570\u636E\u5E93\u540D\u79F0; -- \u5982\u679C\u6570\u636E\u5E93\u5B58\u5728\uFF0C\u5219\u5220\u9664\uFF1B\u5982\u679C\u5B58\u5728\uFF0C\u5219\u4E0D\u5220\u9664
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4F7F\u7528\u6570\u636E\u5E93</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select database(); -- \u67E5\u8BE2\u5F53\u524D\u6B63\u5728\u4F7F\u7528\u7684\u6570\u636E\u5E93\u540D\u79F0

use \u6570\u636E\u5E93\u540D\u79F0; -- \u4F7F\u7528\u67D0\u4E2A\u6570\u636E\u5E93
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="\u64CD\u4F5C\u8868" tabindex="-1"><a class="header-anchor" href="#\u64CD\u4F5C\u8868" aria-hidden="true">#</a> \u64CD\u4F5C\u8868</h3><ul><li><p>Create\uFF1A\u521B\u5EFA</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table \u8868\u540D(			-- \u521B\u5EFA\u8868\u7684\u57FA\u672C\u8BED\u6CD5
		\u5217\u540D1 \u6570\u636E\u7C7B\u578B1,
  	\u5217\u540D2 \u6570\u636E\u7C7B\u578B2,
  	...
  	\u5217\u540Dn \u6570\u636E\u7C7B\u578Bn
);

-- \u5728\u6570\u636E\u7C7B\u578B\u540E\u63A5 default xx \u7ED9\u8FD9\u4E2A\u5217\u4E00\u4E2A\u9ED8\u8BA4\u503C

create table \u65B0\u8868\u540D like \u88AB\u590D\u5236\u7684\u8868\u540D; -- \u590D\u5236\u4E00\u4EFD\u8868\u7ED3\u6784\u76F8\u540C\u7684\u8868
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F8B\u5B50</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table student(
		id int,
  	name varchar(32),
  	age int,
  	score double(4, 1),
  	birthday date,
  	insert_time timestamp
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Retrieve\uFF1A\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show tables; -- \u67E5\u8BE2\u67D0\u4E2A\u6570\u636E\u5E93\u4E2D\u6240\u6709\u7684\u8868\u540D\u79F0

desc \u8868\u540D; -- \u67E5\u8BE2\u67D0\u4E2A\u8868\u7684\u7ED3\u6784(\u5B57\u6BB5\u3001\u7C7B\u578B\u7B49\u4FE1\u606F)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Update\uFF1A\u4FEE\u6539</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table \u8868\u540D rename to \u65B0\u8868\u540D; -- \u4FEE\u6539\u8868\u540D

show create table \u8868\u540D; -- \u67E5\u770B\u5EFA\u8868\u8BED\u53E5

alter table \u8868\u540D character set \u5B57\u7B26\u96C6 -- \u4FEE\u6539\u8868\u7684\u5B57\u7B26\u96C6

alter table \u8868\u540D add \u5217\u540D \u6570\u636E\u7C7B\u578B; -- \u65B0\u589E\u4E00\u5217

alter table \u8868\u540D change \u5217\u540D \u65B0\u5217\u540D \u65B0\u6570\u636E\u7C7B\u578B; -- \u4FEE\u6539\u5217
alter table \u8868\u540D modify \u5217\u540D \u65B0\u6570\u636E\u7C7B\u578B; -- \u4FEE\u6539\u5217\u7684\u6570\u636E\u7C7B\u578B

alter table \u8868\u540D drop \u5217\u540D; -- \u5220\u9664\u5217
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Delete\uFF1A\u5220\u9664</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>drop table \u8868\u540D;	-- \u5220\u9664\u8868

drop table if exists \u8868\u540D; -- \u5220\u9664\u524D\u5220\u9664
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="dml" tabindex="-1"><a class="header-anchor" href="#dml" aria-hidden="true">#</a> DML</h2><h3 id="\u6DFB\u52A0\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u6570\u636E" aria-hidden="true">#</a> \u6DFB\u52A0\u6570\u636E</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>insert into \u8868\u540D(\u5217\u540D1, \u5217\u540D2,...\u5217\u540Dn) values(\u503C1, \u503C2,...\u503Cn); -- \u7ED9\u5BF9\u5E94\u7684\u5217\u6DFB\u52A0\u6570\u636E
-- \u5217\u540D\u548C\u503C\u8981\u4E00\u4E00\u5BF9\u5E94
-- \u5982\u679C\u8868\u540D\u540E\u4E0D\u5B9A\u4E49\u5217\u540D\u5219\u9ED8\u8BA4\u7ED9\u6240\u6709\u5217\u6DFB\u52A0\u503C\uFF0C\u4F46\u662F\u8981\u7ED9\u591F\u5217
insert into \u8868\u540D values(\u503C1, \u503C2,...\u503Cn); -- \u7ED9\u6240\u6709\u7684\u5217\u6DFB\u52A0\u6570\u636E
-- \u9664\u4E86\u6570\u5B57\u7C7B\u578B\uFF0C\u5176\u4ED6\u7C7B\u578B\u90FD\u9700\u8981\u4F7F\u7528\u5F15\u53F7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5220\u9664\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u6570\u636E" aria-hidden="true">#</a> \u5220\u9664\u6570\u636E</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>delete from \u8868\u540D [where \u6761\u4EF6]; -- \u6309\u6761\u4EF6\u5220\u9664\u6570\u636E
-- \u5982\u679C\u4E0D\u52A0\u6761\u4EF6\uFF0C\u5219\u5220\u9664\u8868\u4E2D\u6240\u6709\u8BB0\u5F55

truncate table \u8868\u540D; -- \u5220\u9664\u8868\uFF0C\u7136\u540E\u518D\u521B\u5EFA\u4E00\u4E2A\u4E00\u6478\u4E00\u6837\u7684\u7A7A\u8868 \u6570\u636E\u91CF\u5927\u7684\u65F6\u5019\u6BD4\u76F4\u63A5drop table\u6548\u7387\u8981\u9AD8
-- truncate\u548C\u4E0D\u5E26where\u5B50\u53E5\u7684delete\u8BED\u53E5\u4F5C\u7528\u4E00\u6837
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4FEE\u6539\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u6570\u636E" aria-hidden="true">#</a> \u4FEE\u6539\u6570\u636E</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>update \u8868\u540D set \u5217\u540D1 = \u503C1, \u5217\u540D2 = \u503C2,...[where \u6761\u4EF6]; -- \u4FEE\u6539\u6570\u636E
-- \u5982\u679C\u4E0D\u52A0\u6761\u4EF6\uFF0C\u5219\u4FEE\u6539\u8868\u4E2D\u6240\u6709\u8BB0\u5F55

-- mysql\u4E0D\u652F\u6301\u4FEE\u6539\u7ED3\u679C\u96C6\u7684\u6570\u636E
update(select ...)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dql" tabindex="-1"><a class="header-anchor" href="#dql" aria-hidden="true">#</a> DQL</h2><h3 id="\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> \u57FA\u672C\u8BED\u6CD5</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select 					-- \u67E5\u8BE2\u8BED\u53E5\u57FA\u672C\u8BED\u6CD5
		\u5B57\u6BB5\u5217\u8868
from
		\u8868\u540D\u5217\u8868
where
		\u6761\u4EF6\u5217\u8868
group by
		\u5206\u7EC4\u5B57\u6BB5
having
		\u5206\u7EC4\u4E4B\u540E\u7684\u6761\u4EF6
order by
		\u6392\u5E8F
limit
		\u6570\u636E\u91CF\u9650\u5B9A;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u57FA\u7840\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u67E5\u8BE2" aria-hidden="true">#</a> \u57FA\u7840\u67E5\u8BE2</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from \u8868\u540D; -- \u67E5\u8BE2\u8868\u4E2D\u6240\u6709\u6570\u636E

select \u5217\u540D1, \u5217\u540D2,... from \u8868\u540D; -- \u6309\u5217\u67E5\u8BE2\u6570\u636E

select distinct \u5217\u540D from \u8868\u540D; -- \u53BB\u9664\u91CD\u590D\u7684\u7ED3\u679C\u96C6
-- \u5728\u67E5\u8BE2\u65F6distinct\u5173\u952E\u5B57\u4F1A\u5E94\u7528\u4E8E\u6240\u6709\u5217\u800C\u4E0D\u662F\u524D\u7F6E\u5B83\u7684\u5217

-- \u5982\u679C\u6709null\u503C\u53C2\u4E0E\u8BA1\u7B97\uFF0C\u8BA1\u7B97\u7ED3\u679C\u90FD\u662Fnull
-- \u89E3\u51B3\u65B9\u6CD5 ifnull(\u539F\u503C\uFF0C\u5982\u679C\u662Fnull\u66FF\u6362\u7684\u503C)
select ifnull(\u5217\u540D, 0)+ifnull(\u5217\u540D, 0) from \u8868\u540D;

select \u5217\u540D (as) \u522B\u540D from \u8868\u540D; -- \u7ED9\u67E5\u8BE2\u7684\u5217\u540D\u8D77\u522B\u540D as\u53EF\u4EE5\u7701\u7565
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6761\u4EF6\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u6761\u4EF6\u67E5\u8BE2" aria-hidden="true">#</a> \u6761\u4EF6\u67E5\u8BE2</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8FD0\u7B97\u7B26
&gt;\u3001&lt;\u3001&lt;=\u3001&gt;=\u3001=\u3001&lt;&gt; 	 -- \u6BD4\u8F83\u5224\u65AD\u7B26\u53F7 \u4E0D\u7B49\u4E8E\uFF1A&lt;&gt;
between...and...		-- \u5728...\u8303\u56F4\u4E2D
in() 								-- \u62EC\u53F7\u5185\u586B\u5199 \u5B50\u67E5\u8BE2\u6216\u96C6\u5408
is null 						-- \u67E5\u8BE2null\u503C \u4E0D\u4E3Anull\u503C\uFF1Ais not null
and &amp;&amp;
or ||
not !
like								-- \u6A21\u7CCA\u67E5\u8BE2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6A21\u7CCA\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u6A21\u7CCA\u67E5\u8BE2" aria-hidden="true">#</a> \u6A21\u7CCA\u67E5\u8BE2</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5360\u4F4D\u7B26
_ -- \u5355\u4E2A\u4EFB\u610F\u5B57\u7B26
% -- \u591A\u4E2A\u4EFB\u610F\u5B57\u7B26

-- \u4F8B\u5B50
-- \u67E5\u8BE2\u59D3\u540D\u4E09\u4E2A\u5B57\u7684\u4EBA
select name from student where name like &#39;___&#39;;
-- \u67E5\u8BE2\u59D3\u540D\u7B2C\u4E8C\u4E2A\u5B57\u662F\u4F1F\u7684\u4EBA
select name from student where name like &#39;_\u4F1F%&#39;;
-- \u67E5\u8BE2\u59D3\u540D\u5305\u542B\u4F1F\u7684\u4EBA
select name from student where name like &#39;%\u4F1F%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6392\u5E8F\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u6392\u5E8F\u67E5\u8BE2" aria-hidden="true">#</a> \u6392\u5E8F\u67E5\u8BE2</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8BED\u6CD5
order by \u6392\u5E8F\u5B57\u6BB51 \u6392\u5E8F\u65B9\u5F0F1, \u6392\u5E8F\u5B57\u6BB52 \u6392\u5E8F\u65B9\u5F0F2...;
-- \u540E\u9762\u7684\u6392\u5E8F\u6761\u4EF6\u53EA\u6709\u5F53\u524D\u9762\u7684\u4E00\u6837\u7684\u6761\u4EF6\u4E0B\u624D\u4F1A\u4F7F\u7528\u540E\u9762\u7684\u6392\u5E8F\u6761\u4EF6

-- \u6392\u5E8F\u65B9\u5F0F
asc -- \u5347\u5E8F \u9ED8\u8BA4
desc -- \u964D\u5E8F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u805A\u5408\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u805A\u5408\u51FD\u6570" aria-hidden="true">#</a> \u805A\u5408\u51FD\u6570</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5C06\u4E00\u5217\u6570\u636E\u4F5C\u4E3A\u4E00\u4E2A\u6574\u4F53\uFF0C\u8FDB\u884C\u7EB5\u5411\u8BA1\u7B97
-- \u5E38\u7528\u805A\u5408\u51FD\u6570 (\u6392\u9664\u4E86null\u503C\uFF0C\u6CE8\u610F)
count -- \u8BA1\u7B97\u6570\u91CF
max -- \u6700\u5927\u503C
min -- \u6700\u5C0F\u503C
sum -- \u6C42\u548C
avg -- \u8BA1\u7B97\u5E73\u5747\u503C

-- \u4F8B\u5B50
select count(\`name\`) from student; -- \u7EDF\u8BA1\u4E00\u4E2A\u6709\u591A\u5C11\u4E2A\u5B66\u751F
select count(ifnull(english, 0)) from student; -- \u907F\u514D\u82F1\u8BED\u6210\u7EE9\u4E3Anull\u4E0D\u8BA1\u7B97
select count(*) from student; -- \u53EA\u8981\u8FD9\u4E00\u884C\u6570\u636E\u6709\u4E00\u5217\u4E0D\u4E3Anull\uFF0C\u5C31\u7B97\u4E00\u6761\u8BB0\u5F55

select max(math) from student; -- \u7EDF\u8BA1\u6570\u5B66\u6210\u7EE9\u6700\u9AD8\u5206
select min(math) from student; -- \u7EDF\u8BA1\u6570\u5B66\u6210\u7EE9\u6700\u4F4E\u5206

select sum(math) from student; -- \u7EDF\u8BA1\u5404\u4E2A\u540C\u5B66\u7684\u6570\u5B66\u6210\u7EE9\u4E4B\u548C

select avg(math) from sutdent; -- \u8BA1\u7B97\u6570\u5B66\u6210\u7EE9\u7684\u5E73\u5747\u5206
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5206\u7EC4\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u5206\u7EC4\u67E5\u8BE2" aria-hidden="true">#</a> \u5206\u7EC4\u67E5\u8BE2</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8BED\u6CD5
group by \u5206\u7EC4\u5B57\u6BB5 having \u6761\u4EF6;
-- \u5206\u7EC4\u540E\u53EA\u80FD\u67E5\uFF1A\u5206\u7EC4\u5B57\u6BB5\u3001\u805A\u5408\u51FD\u6570\uFF1B\u67E5\u5176\u4ED6\u5B57\u6BB5\u6CA1\u6709\u610F\u4E49
-- where\u4E0Ehaving\u7684\u533A\u522B
-- 1.where\u4F5C\u7528\u5728\u5206\u7EC4\u4E4B\u524D\u8FDB\u884C\u9650\u5B9A\uFF0C\u5982\u679C\u4E0D\u6EE1\u8DB3\u6761\u4EF6\uFF0C\u5219\u4E0D\u53C2\u4E0E\u5206\u7EC4;
--   having\u5728\u5206\u7EC4\u4E4B\u540E\u9650\u5B9A\uFF0C\u5982\u679C\u4E0D\u6EE1\u8DB3\u7ED3\u679C\uFF0C\u5219\u4E0D\u4F1A\u88AB\u67E5\u8BE2\u51FA\u6765
-- 2.where\u540E\u4E0D\u53EF\u63A5\u805A\u5408\u51FD\u6570\uFF0Chaving\u540E\u53EF\u4EE5\u8FDB\u884C\u805A\u5408\u51FD\u6570\u7684\u5224\u65AD

-- \u4F8B\u5B50
-- \u67E5\u8BE2\u7537\u751F\u5973\u751F\u7684\u6570\u5B66\u5E73\u5747\u5206
SELECT sex &#39;\u6027\u522B&#39;, AVG(math) &#39;\u6570\u5B66\u5E73\u5747\u5206&#39;, COUNT(Id) &#39;\u4EBA\u6570&#39; FROM \`student3 GROUP BY sex;

-- 70\u5206\u4EE5\u4E0B\u7684\u4E0D\u53C2\u4E0E\u5206\u7EC4
SELECT sex &#39;\u6027\u522B&#39;, AVG(math) &#39;\u6570\u5B66\u5E73\u5747\u5206&#39;, COUNT(Id) &#39;\u4EBA\u6570&#39; FROM \`student3\` WHERE math &gt; 70 GROUP BY sex;

-- \u5206\u7EC4\u540E\u53EA\u770B\u4EBA\u6570\u5927\u4E8E2\u7684\u6570\u636E
SELECT sex &#39;\u6027\u522B&#39;, AVG(math) &#39;\u6570\u5B66\u5E73\u5747\u5206&#39;, COUNT(Id) &#39;\u4EBA\u6570&#39; FROM \`student3\` WHERE math &gt; 70 GROUP BY sex HAVING COUNT(Id) &gt; 2;
-- \u53EF\u4EE5\u7ED9COUNT(Id) \u8D77\u522B\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5206\u9875\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u5206\u9875\u67E5\u8BE2" aria-hidden="true">#</a> \u5206\u9875\u67E5\u8BE2</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8BED\u6CD5
limit \u5F00\u59CB\u7684\u7D22\u5F15,\u6BCF\u9875\u67E5\u8BE2\u7684\u6761\u6570;
-- \u6CE8\u610F\uFF1A\u5F00\u59CB\u7684\u7D22\u5F15\u662F\u8BE5\u9875\u5F00\u59CB\u7684\u7D22\u5F15\uFF0C\u4E0D\u662F\u9875\u7801
-- \u516C\u5F0F\uFF1A(\u5F53\u524D\u9875\u7801 - 1) * \u6BCF\u9875\u663E\u793A\u7684\u6761\u6570
-- \u6700\u540E\u4E00\u9875\uFF1A\u6709\u591A\u5C11\u6761\u663E\u793A\u591A\u5C11\u6761

-- \u4F8B\u5B50
select * from student limit 0,3; -- \u7B2C\u4E00\u9875
select * from student limit 3,3; -- \u7B2C\u4E8C\u9875
select * from student limit 6,3; -- \u7B2C\u4E09\u9875
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5408\u5E76\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u5408\u5E76\u67E5\u8BE2" aria-hidden="true">#</a> \u5408\u5E76\u67E5\u8BE2</h3><ul><li><p>union(\u65E0\u91CD\u590D\u5E76\u96C6) \u5408\u5E76\u65F6\uFF0C\u4E24\u4E2A\u8868\u5BF9\u5E94\u7684<strong>\u5217\u6570\u548C\u6570\u636E\u7C7B\u578B\u5FC5\u987B\u76F8\u540C</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from A
union
select * from B;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>union all(\u6709\u91CD\u590D\u5E76\u96C6) \u76F8\u540C\u6570\u636E\u4E0D\u53BB\u91CD\uFF0C\u6709\u591A\u5C11\u663E\u793A\u591A\u5C11</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from A
union all
select * from B;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>intersect(\u4EA4\u96C6) \u663E\u793A\u540C\u65F6\u6EE1\u8DB3\u4E24\u4E2A\u67E5\u8BE2\u7684\u8BB0\u5F55 <strong>mysql\u4E0D\u652F\u6301</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>minus(\u5DEE\u96C6) \u663E\u793A\u6EE1\u8DB3\u524D\u4E00\u4E2A\u67E5\u8BE2\u4F46\u4E0D\u6EE1\u8DB3\u540E\u4E00\u4E2A\u67E5\u8BE2\u7684\u8BB0\u5F55 <strong>mysql\u4E0D\u652F\u6301</strong></p></li><li><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="\u591A\u8868\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u591A\u8868\u67E5\u8BE2" aria-hidden="true">#</a> \u591A\u8868\u67E5\u8BE2-----</h3><ul><li><p>\u7B1B\u5361\u5C14\u79EF \u4E24\u4E2A\u96C6\u5408\u53D6\u5979\u4EEC\u7684\u6240\u6709\u7EC4\u5408\u60C5\u51B5(\u5E76\u4E0D\u662F\u6240\u6709\u90FD\u662F\u6B63\u786E\u7684\u6570\u636E)\uFF0C\u6240\u4EE5\u8981\u6D88\u9664\u65E0\u7528\u6570\u636E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from table_a, table_b;
-- \u83B7\u53D6table_a\u548Ctable_b\u7684\u7B1B\u5361\u5C14\u79EF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5185\u8FDE\u63A5\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u9690\u5F0F\u5185\u8FDE\u63A5\uFF1A\u4F7F\u7528where\u6761\u4EF6\u6D88\u9664\u65E0\u7528\u6570\u636E
-- \u4F8B\u5B50
select * from emp, dept where emp.dept_id = dept.id;
select t1.name, t2.name from emp t1, dept t2 where t1.dept_id = t2.id;

-- \u663E\u5F0F\u5185\u8FDE\u63A5
-- \u8BED\u6CD5
select \u5B57\u6BB5\u540D from \u8868\u540D1 [inner] join \u8868\u540D2 on \u6761\u4EF6; -- inner\u53EF\u4EE5\u7701\u7565
-- \u4F8B\u5B50
-- \u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u7684\u540D\u5B57\u53CA\u5176\u90E8\u95E8\u7684\u540D\u5B57
select t1.name, t2.name from emp t1 inner join dept t2 on t1.dept.id = t2.id;


-- \u6CE8\u610F
-- \u67E5\u8BE2\u7684\u8868\u3001\u67E5\u8BE2\u7684\u6761\u4EF6\u3001\u67E5\u8BE2\u7684\u5B57\u6BB5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5916\u8FDE\u63A5\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5DE6\u5916\u8FDE\u63A5
-- \u8BED\u6CD5
select \u5B57\u6BB5\u540D from \u8868\u540D1 left [outer] join \u8868\u540D2 on \u6761\u4EF6; -- outer\u53EF\u4EE5\u7701\u7565
-- \u67E5\u8BE2\u7684\u662F\u5DE6\u8868\u6240\u6709\u6570\u636E\u53CA\u5176\u4EA4\u96C6\u90E8\u5206,\u5728\u5185\u8FDE\u63A5\u57FA\u7840\u4E0A\u4FDD\u8BC1\u5DE6\u8868\u6570\u636E\u5B8C\u6574,\u5982\u679C\u4E0D\u5339\u914D\u663E\u793A\u4E3Anull
-- \u4F8B\u5B50
-- \u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u7684\u540D\u5B57\u53CA\u5176\u90E8\u95E8\u7684\u540D\u5B57\uFF0C\u6CA1\u6709\u90E8\u95E8\u7684\u4E5F\u67E5\u51FA\u6765
select t1.name, t2.name from emp t1 left join dept t2 on emp.dept_id = t2.id;

-- \u53F3\u5916\u8FDE\u63A5
-- \u8BED\u6CD5
select \u5B57\u6BB5\u540D from \u8868\u540D1 right [outer] join \u8868\u540D2 on \u6761\u4EF6; -- outer\u53EF\u4EE5\u7701\u7565
-- \u67E5\u8BE2\u7684\u53F3\u8868\u6240\u6709\u6570\u636E\u53CA\u5176\u4EA4\u96C6\u90E8\u5206
-- \u4F8B\u5B50
-- \u6CA1\u6709\u90E8\u95E8\u7684\u5458\u5DE5\u67E5\u8BE2\u4E0D\u51FA\u6765
select t1.name, t2.name from emp t1 right join dept t2 on emp.dept_id = t2.id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5B50\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u8BE2\u4E2D\u5D4C\u5957\u67E5\u8BE2\uFF0C\u79F0\u4E3A\u5B50\u67E5\u8BE2

-- \u5B50\u67E5\u8BE2\u7684\u7ED3\u679C\u662F\u5355\u884C\u5355\u5217\u7684
		-- \u5B50\u67E5\u8BE2\u53EF\u4EE5\u4F5C\u4E3A\u6761\u4EF6\uFF0C\u4F7F\u7528\u8FD0\u7B97\u7B26\u53BB\u5224\u65AD\uFF1A&lt; &lt;= &gt; &gt;= =
-- \u4F8B\u5B50 \u67E5\u8BE2\u5DE5\u8D44\u5C0F\u4E8E\u5E73\u5747\u5DE5\u8D44\u7684\u4EBA
select name from emp where salary &lt;= (select avg(salary) from emp);


-- \u5B50\u67E5\u8BE2\u7684\u7ED3\u679C\u662F\u591A\u884C\u5355\u5217\u7684
		-- \u5B50\u67E5\u8BE2\u53EF\u4EE5\u4F5C\u4E3A\u6761\u4EF6\uFF0C\u4F7F\u7528\u8FD0\u7B97\u7B26\u53BB\u5224\u65AD\uFF1Ain\u3001not in
-- \u4F8B\u5B50 \u67E5\u8BE2\u8D22\u52A1\u90E8\u548C\u5E02\u573A\u90E8\u7684\u5458\u5DE5
select name from emp where dept_id in (select id from dept where name = &#39;\u8D22\u52A1\u90E8&#39; or name = &#39;\u5E02\u573A\u90E8&#39;);


-- \u5B50\u67E5\u8BE2\u7684\u7ED3\u679C\u662F\u591A\u884C\u591A\u5217\u7684
		-- \u5B50\u67E5\u8BE2\u53EF\u4EE5\u4F5C\u4E3A\u865A\u62DF\u8868\uFF0C\u53EF\u4EE5\u5BF9\u5176\u8FDB\u884C\u666E\u901A\u7684\u8868\u67E5\u8BE2
-- \u4F8B\u5B50 \u67E5\u8BE2\u5458\u5DE5\u5165\u804C\u65E5\u671F\u662F2011-11-11\u4E4B\u540E\u7684\u5458\u5DE5\u4FE1\u606F\u548C\u90E8\u95E8\u4FE1\u606F
select t1.name, t2.name from (select * from emp where join_date &gt; &#39;2011-11-11&#39;) t1, dept t2 where t1.dept_id = t2.id;
-- \u666E\u901A\u5185\u8FDE\u63A5\u67E5\u8BE2\u505A\u6CD5\uFF1A
select t1.name, t2.name from emp t1 where t1.join_date &gt; &#39;2011-11-11&#39; join dept t2 on t1.dept = t2.id;
select t1.name, t2.name from emp t1, dept t2 where t1.dept_id = t2.id and t1.join_date &gt; &#39;2011-11-11&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u7EC3\u4E60</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- 1.\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u4FE1\u606F\u3002\u67E5\u8BE2\u5458\u5DE5\u7F16\u53F7\uFF0C\u5458\u5DE5\u59D3\u540D\uFF0C\u5DE5\u8D44\uFF0C\u804C\u52A1\u540D\u79F0\uFF0C\u804C\u52A1\u63CF\u8FF0
SELECT 
	t1.id, 
	t1.ename, 
	t1.salary, 
	t2.jname, 
	t2.description 
FROM 
	emp t1, 
	job t2 
WHERE 
	t1.job_id = t2.id;


-- 2.\u67E5\u8BE2\u5458\u5DE5\u7F16\u53F7\uFF0C\u5458\u5DE5\u59D3\u540D\uFF0C\u5DE5\u8D44\uFF0C\u804C\u52A1\u540D\u79F0\uFF0C\u804C\u52A1\u63CF\u8FF0\uFF0C\u90E8\u95E8\u540D\u79F0\uFF0C\u90E8\u95E8\u4F4D\u7F6E
SELECT 
	t1.id, 
	t1.ename, 
	t1.salary, 
	t2.jname, 
	t2.description, 
	t3.dname, 
	t3.loc 
FROM 
	emp t1, 
	job t2, 
	dept t3 
WHERE 
	t1.job_id = t2.id 
	AND t1.dept_id = t3.id;


-- 3.\u67E5\u8BE2\u5458\u5DE5\u59D3\u540D\uFF0C\u5DE5\u8D44\uFF0C\u5DE5\u8D44\u7B49\u7EA7
SELECT
	t1.ename,
	t1.salary,
	t2.grade
FROM
	emp t1,
	salarygrade t2
WHERE
	t1.salary BETWEEN t2.losalary AND t2.hisalary;


-- 4.\u67E5\u8BE2\u5458\u5DE5\u59D3\u540D\uFF0C\u5DE5\u8D44\uFF0C\u804C\u52A1\u540D\u79F0\uFF0C\u804C\u52A1\u63CF\u8FF0\uFF0C\u90E8\u95E8\u540D\u79F0\uFF0C\u90E8\u95E8\u4F4D\u7F6E\uFF0C\u5DE5\u8D44\u7B49\u7EA7
SELECT
	t1.ename,
	t1.salary,
	t2.jname,
	t2.description,
	t3.dname,
	t3.loc,
	t4.grade
FROM
	emp t1,
	job t2,
	dept t3,
	salarygrade t4
WHERE
	t1.job_id = t2.id 
	AND t1.dept_id = t3.id 
	AND t1.salary BETWEEN t4.losalary AND t4.hisalary;


-- 5.\u67E5\u8BE2\u51FA\u90E8\u95E8\u7F16\u53F7\u3001\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u4F4D\u7F6E\u3001\u90E8\u95E8\u4EBA\u6570
SELECT 
	t1.id,
	t1.dname,
	t1.loc,
	t2.\`count\`
FROM
	dept t1,
	(SELECT
		dept_id,
		COUNT(id) \`count\`
	FROM
		emp
	GROUP BY dept_id) t2
WHERE 
	t1.id = t2.dept_id;
 

-- 6.\u67E5\u8BE2\u6240\u6709\u5458\u5DE5\u7684\u59D3\u540D\u53CA\u5176\u76F4\u63A5\u4E0A\u7EA7\u7684\u59D3\u540D,\u6CA1\u6709\u9886\u5BFC\u7684\u5458\u5DE5\u4E5F\u9700\u8981\u67E5\u8BE2
SELECT
	t1.ename,
	t2.ename
FROM
	emp t1
LEFT JOIN
	emp t2
ON
	t1.mgr = t2.id;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="dcl" tabindex="-1"><a class="header-anchor" href="#dcl" aria-hidden="true">#</a> DCL</h2><h3 id="\u7BA1\u7406\u5458\u6237" tabindex="-1"><a class="header-anchor" href="#\u7BA1\u7406\u5458\u6237" aria-hidden="true">#</a> \u7BA1\u7406\u5458\u6237</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u8BE2\u7528\u6237
select * from user;
-- \u901A\u914D\u7B26\uFF1A% \u8868\u793A\u53EF\u4EE5\u5728\u4EFB\u610F\u4E3B\u673A\u4F7F\u7528\u7528\u6237\u767B\u9646\u6570\u636E\u5E93

-- \u521B\u5EFA\u7528\u6237
create user &#39;\u7528\u6237\u540D&#39;@&#39;\u4E3B\u673A\u540D&#39; identified by &#39;\u5BC6\u7801&#39;;

-- \u5220\u9664\u7528\u6237
drop user &#39;\u7528\u6237\u540D&#39;@&#39;\u4E3B\u673A\u540D&#39;;

-- \u4FEE\u6539\u5BC6\u7801
update user set password = password(&#39;\u65B0\u5BC6\u7801&#39;) where user = &#39;\u7528\u6237\u540D&#39;;
-- \u6216
set password for &#39;\u7528\u6237\u540D&#39;@&#39;\u4E3B\u673A\u540D&#39; = password(&#39;\u65B0\u5BC6\u7801&#39;)\uFF1B

-- \u5FD8\u8BB0root\u7528\u6237\u5BC6\u7801
-- 1.\u505C\u6B62mysql\u670D\u52A1 net stop mysql 
-- 2.\u4F7F\u7528\u65E0\u9A8C\u8BC1\u65B9\u5F0F\u542F\u52A8mysql\u670D\u52A1 mysqld --skip-grant-tables
-- 3.\u65E0\u9700\u7528\u6237\u540D \u767B\u9646mysql\u670D\u52A1
-- 4.\u8BBE\u7F6Eroot\u7528\u6237\u5BC6\u7801
-- 5.\u6740\u6389mysqld\u7684\u8FDB\u7A0B
-- 6.\u542F\u52A8mysql\u670D\u52A1\uFF0C\u4F7F\u7528\u65B0\u5BC6\u7801\u767B\u9646
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6388\u6743" tabindex="-1"><a class="header-anchor" href="#\u6388\u6743" aria-hidden="true">#</a> \u6388\u6743</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u8BE2\u6743\u9650
SHOW GRANTS FOR &#39;\u7528\u6237\u540D&#39;@&#39;\u4E3B\u673A\u540D&#39;;

-- \u6388\u4E88\u6743\u9650
GRANT \u6743\u9650\u5217\u8868 on &#39;\u6570\u636E\u5E93\u540D&#39;.&#39;\u8868\u540D&#39; to &#39;\u7528\u6237\u540D&#39;@&#39;\u4E3B\u673A\u540D&#39;;
-- \u6388\u4E88\u6240\u6709\u6743\u9650 on *.*

-- \u64A4\u9500\u6743\u9650
revoke \u6743\u9650\u5217\u8868 on &#39;\u6570\u636E\u5E93\u540D&#39;.&#39;\u8868\u540D&#39; from &#39;\u7528\u6237\u540D&#39;@&#39;\u4E3B\u673A\u540D&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7EA6\u675F" tabindex="-1"><a class="header-anchor" href="#\u7EA6\u675F" aria-hidden="true">#</a> \u7EA6\u675F</h2><p>\u6982\u5FF5\uFF1A\u5BF9\u8868\u4E2D\u7684<strong>\u6570\u636E</strong>\u8FDB\u884C\u9650\u5B9A\uFF0C\u4ECE\u800C\u4FDD\u8BC1\u6570\u636E\u6B63\u786E\u6027\u3001\u6709\u6548\u6027\u3001\u5B8C\u6574\u6027</p><h3 id="\u5206\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u5206\u7C7B" aria-hidden="true">#</a> \u5206\u7C7B</h3><ul><li>\u4E3B\u952E\u7EA6\u675F\uFF1Aprimary key</li><li>\u975E\u7A7A\u7EA6\u675F\uFF1Anot null</li><li>\u552F\u4E00\u7EA6\u675F\uFF1Aunique</li><li>\u5916\u952E\u7EA6\u675F\uFF1Aforeign key</li></ul><h3 id="\u975E\u7A7A\u7EA6\u675F-not-null" tabindex="-1"><a class="header-anchor" href="#\u975E\u7A7A\u7EA6\u675F-not-null" aria-hidden="true">#</a> \u975E\u7A7A\u7EA6\u675F not null</h3><ul><li><p>\u521B\u5EFA\u8868\u65F6\u6DFB\u52A0\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE stu(
	id INT,
	name VARCHAR(20) NOT NULL -- name\u4E3A\u975E\u7A7A
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5220\u9664\u975E\u7A7A\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu modify name varchar(20); -- \u540E\u9762\u4E0D\u5199\u5C31\u4EE3\u8868name\u8FD9\u4E00\u5217\u6CA1\u6709\u5176\u4ED6\u7EA6\u675F\u4E86
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u4FEE\u6539\u8868\u65B9\u5F0F\u6DFB\u52A0\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu modify name varchar(20) not null;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="\u552F\u4E00\u7EA6\u675F-unique" tabindex="-1"><a class="header-anchor" href="#\u552F\u4E00\u7EA6\u675F-unique" aria-hidden="true">#</a> \u552F\u4E00\u7EA6\u675F unique</h3><ul><li><p>\u521B\u5EFA\u8868\u65F6\u6DFB\u52A0\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE TABLE stu(
	id INT,
	phone VARCHAR(20) UNIQUE -- \u6DFB\u52A0\u552F\u4E00\u7EA6\u675F
);

-- \u6CE8\u610F \u552F\u4E00\u7EA6\u675F\u9650\u5B9A\u7684\u5217\u7684\u503C\u53EF\u4EE5\u6709\u591A\u4E2Anull
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5220\u9664\u552F\u4E00\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu drop index phone; -- \u5220\u9664\u552F\u4E00\u7D22\u5F15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u4FEE\u6539\u8868\u65B9\u5F0F\u6DFB\u52A0\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu modify phone varchar(20) unique; -- \u6DFB\u52A0\u4E4B\u524D\u5E94\u5148\u68C0\u67E5\u539F\u6709\u6570\u636E\u662F\u5426\u7B26\u5408\u7EA6\u675F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="\u4E3B\u952E\u7EA6\u675F-primary-key" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u952E\u7EA6\u675F-primary-key" aria-hidden="true">#</a> \u4E3B\u952E\u7EA6\u675F primary key</h3><ul><li><p>\u542B\u4E49\uFF1A\u975E\u7A7A\u4E14\u552F\u4E00 not null+unique\uFF0C \u8868\u4E2D\u8BB0\u5F55\u7684\u552F\u4E00\u6807\u8BC6</p></li><li><p>\u4E00\u5F20\u8868\u53EA\u80FD\u6709\u4E00\u4E2A\u5B57\u6BB5\u4E3A\u4E3B\u952E</p></li><li><p>\u521B\u5EFA\u8868\u65F6\u6DFB\u52A0\u7EA6\u675F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table stu(
	id int primary key, -- \u7ED9id\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F
  name varchar(20)
);

-- \u805A\u5408\u4E3B\u952E
primary key(col1, col2);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5220\u9664\u4E3B\u952E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu drop primary key; -- \u7531\u4E8E\u4E00\u4E2A\u8868\u53EA\u80FD\u6709\u4E00\u4E2A\u4E3B\u952E\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4E0D\u7528\u6307\u5B9A\u5B57\u6BB5\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u4FEE\u6539\u8868\u65B9\u5F0F\u6DFB\u52A0\u4E3B\u952E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu modify id int primary key;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u81EA\u52A8\u589E\u957F</p><ul><li><p>\u6982\u5FF5\u5982\u679C\u67D0\u4E00\u5217\u662F\u6570\u503C\u7C7B\u578B\uFF0C\u4F7F\u7528auto_increment \u53EF\u4EE5\u5B8C\u6210\u81EA\u52A8\u589E\u957F\uFF0C\u4E4B\u540E\u8D4B\u503C\u7684\u65F6\u5019\u8D4Bnull\u503C\u4E5F\u4E0D\u4F1A\u5F71\u54CD\uFF0Cnull\u503C\u4E4B\u524D\u81EA\u589E\u3002\u81EA\u589E\u662F\u6309\u7167\u4E0A\u4E00\u6761\u8BB0\u5F55\u7684\u503C\u6765\u81EA\u589E\uFF0C\u65E0\u8BBA\u524D\u9762\u7684\u503C\u662F\u5426\u8FDE\u7EED\u3002</p></li><li><p>\u521B\u5EFA\u8868\u65F6\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F\u5E76\u5B8C\u6210\u81EA\u52A8\u589E\u957F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table stu(
	id int primary key auto_increment, -- \u7ED9id\u6DFB\u52A0\u4E3B\u952E\u7EA6\u675F
  name varchar(20)
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5220\u9664\u81EA\u52A8\u589E\u957F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu modify id int; -- \u5220\u9664\u81EA\u52A8\u589E\u957F\uFF0C\u4F46\u662F\u65E0\u6CD5\u5220\u9664\u4E3B\u952E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u4FEE\u6539\u8868\u7684\u65B9\u5F0F\u6DFB\u52A0\u81EA\u52A8\u589E\u957F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table stu modify id int auto_increment;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="\u5916\u952E\u7EA6\u675F-foreign-key" tabindex="-1"><a class="header-anchor" href="#\u5916\u952E\u7EA6\u675F-foreign-key" aria-hidden="true">#</a> \u5916\u952E\u7EA6\u675F foreign key</h3><ul><li><p>\u8BA9\u8868\u4E8E\u8868\u4EA7\u751F\u5173\u7CFB\uFF0C\u4FDD\u8BC1\u6570\u636E\u7684\u6B63\u786E\u6027</p></li><li><p>\u521B\u5EFA\u8868\u65F6\u5EFA\u7ACB\u5916\u952E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8BED\u6CD5
create table \u8868\u540D {
	...
	\u5916\u952E\u5217
	constraint \u5916\u952E\u540D\u79F0 foreign key (\u5916\u952E\u5217) references \u4E3B\u8868\u540D\u79F0(\u5217\u540D)
}

-- \u53EF\u4EE5\u7701\u7565constraint \u5916\u952E\u540D\u79F0\uFF0C \u7CFB\u7EDF\u4F1A\u5206\u914D\u4E00\u4E2A\u552F\u4E00\u7684\u540D\u79F0\u7ED9\u8FD9\u4E2A\u5916\u952E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5220\u9664\u5916\u952E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table \u8868\u540D drop foreign key \u5916\u952E\u540D;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u6DFB\u52A0\u5916\u952E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>alter table \u8868\u540D add constraint \u5916\u952E\u540D foreign key (\u5916\u952E\u5217) references \u4E3B\u8868\u540D\u79F0(\u5217\u540D);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u7EA7\u8054\u64CD\u4F5C</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8BED\u6CD5
alter table \u8868\u540D add constraint \u5916\u952E\u540D foreign key (\u5916\u952E\u5217) references \u4E3B\u8868\u540D\u79F0(\u5217\u540D)
on update cascade on delete cascade;


-- \u5206\u7C7B
-- \u7EA7\u8054\u66F4\u65B0\u3001\u7EA7\u8054\u5220\u9664
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="\u6570\u636E\u5E93\u8FD8\u539F\u4E0E\u5907\u4EFD" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5E93\u8FD8\u539F\u4E0E\u5907\u4EFD" aria-hidden="true">#</a> \u6570\u636E\u5E93\u8FD8\u539F\u4E0E\u5907\u4EFD</h2><ul><li><p>\u547D\u4EE4\u884C\u65B9\u5F0F</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u5907\u4EFD\uFF1Amysqldump -u\u7528\u6237\u540D -p\u5BC6\u7801 \u6570\u636E\u5E93\u540D &gt; \u4FDD\u5B58\u7684\u8DEF\u5F84

\u8FD8\u539F\uFF1A
	1.\u767B\u9646\u6570\u636E\u5E93
	2.\u521B\u5EFA\u6570\u636E\u5E93
	3.\u4F7F\u7528\u6570\u636E\u5E93
	4.\u6267\u884C\u6587\u4EF6 source \u6587\u4EF6\u8DEF\u5F84
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u56FE\u5F62\u5316\u5DE5\u5177\u65B9\u5F0F</p></li></ul><h2 id="select-\u8BED\u53E5\u5B8C\u6574\u7684\u6267\u884C\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#select-\u8BED\u53E5\u5B8C\u6574\u7684\u6267\u884C\u987A\u5E8F" aria-hidden="true">#</a> select \u8BED\u53E5\u5B8C\u6574\u7684\u6267\u884C\u987A\u5E8F</h2><ol><li><strong>from \u5B50\u53E5\u7EC4\u88C5\u6765\u81EA\u4E0D\u540C\u6570\u636E\u6E90\u7684\u6570\u636E</strong>\uFF0C\u6240\u4EE5\u4E3A\u8868\u521B\u5EFA\u522B\u540D\uFF0C\u522B\u7684\u5730\u65B9\u80FD\u7528</li><li><strong>join...on \u5B50\u53E5</strong></li><li><strong>where \u5B50\u53E5\u57FA\u4E8E\u6307\u5B9A\u7684\u6761\u4EF6\u5BF9\u8BB0\u5F55\u884C\u8FDB\u884C\u7B5B\u9009</strong></li><li><strong>group by \u5B50\u53E5\u5C06\u6570\u636E\u5212\u5206\u4E3A\u591A\u4E2A\u5206\u7EC4</strong></li><li><strong>\u4F7F\u7528\u805A\u96C6\u51FD\u6570\u8FDB\u884C\u8BA1\u7B97</strong></li><li><strong>\u4F7F\u7528 having \u5B50\u53E5\u7B5B\u9009\u5206\u7EC4</strong></li><li>\u8BA1\u7B97\u6240\u6709\u7684\u8868\u8FBE\u5F0F</li><li><strong>select \u7684\u5B57\u6BB5</strong></li><li>distinct</li><li><strong>\u4F7F\u7528 order by \u5BF9\u7ED3\u679C\u96C6\u8FDB\u884C\u6392\u5E8F</strong></li></ol><h2 id="in\u548Cexists\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#in\u548Cexists\u533A\u522B" aria-hidden="true">#</a> In\u548CExists\u533A\u522B</h2><h3 id="in" tabindex="-1"><a class="header-anchor" href="#in" aria-hidden="true">#</a> In</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select 
	*
from
	A
where
	A.field IN (
    select 
    	B.field
    from
    	B
  )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u987A\u5E8F</p><ol><li>\u6267\u884C\u5B50\u67E5\u8BE2</li><li>\u5C06\u67E5\u8BE2\u7ED3\u679C\u548C\u539F\u6709\u7684A\u8868\u505A\u7B1B\u5361\u5C14\u79EF</li><li>\u518D\u6839\u636E<code>where A.field IN B.field</code>\u7684\u6761\u4EF6\u8FDB\u884C\u7B5B\u9009</li></ol><h3 id="exists" tabindex="-1"><a class="header-anchor" href="#exists" aria-hidden="true">#</a> Exists</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>SELECT
	A.*
FROM
	A
WHERE
	EXISTS (
		SELECT
			B.user_id
		FROM
			B
		WHERE
			A.id = B.user_id
	)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u987A\u5E8F</p><ol><li>\u6267\u884C\u4E3B\u67E5\u8BE2</li><li>\u5C06\u67E5\u8BE2\u7ED3\u679C\u6267\u884C<code>EXISTS</code>\u5B50\u53E5</li><li>\u4F9D\u6B21\u53BB\u5224\u65AD\u540E\u9762\u7684\u6761\u4EF6\u662F\u5426\u6210\u7ACB</li></ol><h3 id="\u5E94\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> \u5E94\u7528\u573A\u666F</h3><p>\u5982\u679C<strong>\u5B50\u67E5\u8BE2</strong>\u5F97\u51FA\u7684\u7ED3\u679C\u96C6<strong>\u8BB0\u5F55\u8F83\u5C11</strong>\uFF0C<strong>\u4E3B\u67E5\u8BE2</strong>\u4E2D\u7684<strong>\u8868\u8F83\u5927</strong>\u4E14\u53C8\u6709\u7D22\u5F15\u65F6\u5E94\u8BE5\u7528<code>in</code></p><p>\u5982\u679C<strong>\u4E3B\u67E5\u8BE2\u8BB0\u5F55\u8F83\u5C11</strong>\uFF0C<strong>\u5B50\u67E5\u8BE2\u4E2D\u7684\u8868\u5927</strong>\uFF0C\u53C8\u6709\u7D22\u5F15\u65F6\u4F7F\u7528<code>exists</code></p><p>\u5982\u679C\u662Fexists\uFF0C\u90A3\u4E48\u4EE5\u5916\u5C42\u8868\u4E3A\u9A71\u52A8\u8868\uFF0C\u5148\u88AB\u8BBF\u95EE\uFF0C\u5982\u679C\u662FIN\uFF0C\u90A3\u4E48\u5148\u6267\u884C\u5B50\u67E5\u8BE2\uFF0C\u6240\u4EE5\u6211\u4EEC\u4F1A\u4EE5\u9A71\u52A8\u8868\u7684\u5FEB\u901F\u8FD4\u56DE\u4E3A\u76EE\u6807</p><p>\u5982\u679C\u67E5\u8BE2\u8BED\u53E5\u4F7F\u7528\u4E86not in \u90A3\u4E48\u5185\u5916\u8868\u90FD\u8FDB\u884C\u5168\u8868\u626B\u63CF\uFF0C\u6CA1\u6709\u7528\u5230\u7D22\u5F15\uFF1B\u800Cnot extsts \u7684\u5B50\u67E5\u8BE2\u4F9D\u7136\u80FD\u7528\u5230\u8868\u4E0A\u7684\u7D22\u5F15\u3002<strong>\u6240\u4EE5\u65E0\u8BBA\u90A3\u4E2A\u8868\u5927\uFF0C\u7528not exists\u90FD\u6BD4not in\u8981\u5FEB</strong>\u3002</p><h2 id="\u5E38\u7528\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u64CD\u4F5C" aria-hidden="true">#</a> \u5E38\u7528\u64CD\u4F5C</h2><h3 id="\u5B57\u7B26\u4E32\u622A\u53D6" tabindex="-1"><a class="header-anchor" href="#\u5B57\u7B26\u4E32\u622A\u53D6" aria-hidden="true">#</a> \u5B57\u7B26\u4E32\u622A\u53D6</h3><ul><li>left(str, length): \u4ECE\u5B57\u7B26\u4E32\u5DE6\u8FB9\u622A\u53D6length\u7684\u957F\u5EA6</li><li>right(str, length): \u4ECE\u5B57\u7B26\u4E32\u53F3\u8FB9\u622A\u53D6length\u7684\u957F\u5EA6</li><li>substring(str, pos, len): \u4ECE\u5B57\u7B26\u4E32\u7684\u7B2Cpos\u4E2A\u4F4D\u7F6E\u5F00\u59CB\u622A\u53D6\uFF0Clen\u4E3A\u7A7A\u7684\u8BDD\u4EE3\u8868\u622A\u53D6\u5230\u7ED3\u5C3E</li></ul><h3 id="\u7C7B\u578B\u8F6C\u6362" tabindex="-1"><a class="header-anchor" href="#\u7C7B\u578B\u8F6C\u6362" aria-hidden="true">#</a> \u7C7B\u578B\u8F6C\u6362</h3><ul><li>cast(value as type)</li><li>convert(value, type)</li><li>type: DECIMAL\u6D6E\u70B9\u6570\u3001SIGNED\u6574\u578B\u3001UNSIGNED\u65E0\u7B26\u53F7\u6574\u6570</li></ul><h3 id="\u5B57\u6BB5\u9012\u589E\u8D4B\u503C" tabindex="-1"><a class="header-anchor" href="#\u5B57\u6BB5\u9012\u589E\u8D4B\u503C" aria-hidden="true">#</a> \u5B57\u6BB5\u9012\u589E\u8D4B\u503C</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u8BBE\u7F6E\u4E00\u4E2A\u53D8\u91CF \u6CE8\u610F@
set @r:=0;
-- \u8D4B\u503C
update tablename set id=(@r:=@r+1)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u683C\u5F0F\u5316\u5B57\u7B26\u4E32\u88650" tabindex="-1"><a class="header-anchor" href="#\u683C\u5F0F\u5316\u5B57\u7B26\u4E32\u88650" aria-hidden="true">#</a> \u683C\u5F0F\u5316\u5B57\u7B26\u4E32\u88650</h3><ul><li>LPAD(str, len, 0): \u5DE6\u8FB9\u88650</li><li>RPAD(str, len, 0): \u53F3\u8FB9\u88650</li><li>\u5982\u679Clen\u5C0F\u4E8Estr\u7684\u957F\u5EA6\uFF0C\u5219\u622A\u53D6str</li></ul><h2 id="explain\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#explain\u89E3\u6790" aria-hidden="true">#</a> explain\u89E3\u6790</h2><h3 id="id" tabindex="-1"><a class="header-anchor" href="#id" aria-hidden="true">#</a> id</h3><ul><li><p>\u6709\u591A\u5C11\u4E2A\u4E0D\u540C\u7684id\u5C31\u8BF4\u660E\u6709\u591A\u5C11\u4E2A\u67E5\u8BE2(\u4E3B\u67E5\u8BE2+\u5B50\u67E5\u8BE2)\uFF0C\u4ECEid\u5927\u5230\u5C0F\u6267\u884C</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u8BE2mysql\u8BFE\u7A0B\u7684\u8001\u5E08\u624B\u673A\u53F7
explain
select tc.phone
from teacher_contact tc
where tcid = (
	select tcid
	from teacher t
	where t.tid = (
  	select c.tid
  	from course c
  	where c.cname = &#39;mysql&#39;
  )
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200930181447617.png" alt="image-20200930181447617"></p></li><li><p>\u76F8\u540C\u7684id\uFF0Ctable\u5217\u4ECE\u4E0A\u5230\u4E0B\u67E5\u8BE2\u3002(\u6570\u636E\u91CF\u4F1A\u5F71\u54CDsql\u8BED\u53E5\u6267\u884C\u987A\u5E8F--\u5C0F\u8868\u9A71\u52A8\u5927\u8868)</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u8BE2\u8BFE\u7A0Bid\u4E3A2\uFF0C\u6216\u8005\u8054\u7CFB\u8868id\u4E3A3\u7684\u8001\u5E08
explain
select t.tname, c.cname, tc.phone
from teacher t, course c, teacher_contact tc
where t.tid = c.tid
and t.tcid = tc.tcid
and (
  c.cid = 2 or tc.tcid = 3
);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u8868\u7684\u987A\u5E8F\u662F tc--t--c</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20201003152102982.png" alt="image-20201003152102982"></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5220\u6389\u4E09\u884C
delete from teacher where tid in (4,5,6);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u8868\u7684\u987A\u5E8F\u662F t--c--tc</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20201003152450710.png" alt="image-20201003152450710"></p><p>\u5173\u8054\u67E5\u8BE2\u672C\u8D28\u662F\u7B1B\u5361\u5C14\u79EF\uFF0C\u6700\u7EC8\u6570\u91CF\u7B49\u4E8Ea * b * c\uFF0C<strong>\u67E5\u8BE2\u4F18\u5316\u5668\u4F1A\u9009\u62E9\u4E2D\u95F4\u7ED3\u679C\u6BD4\u8F83\u5C11\u7684\u6267\u884C\u65B9\u5F0F</strong></p></li></ul><h3 id="select-type" tabindex="-1"><a class="header-anchor" href="#select-type" aria-hidden="true">#</a> select_type</h3><ul><li><p>SIMPLE\u3002\u6CA1\u6709\u5B50\u67E5\u8BE2\uFF0C\u6CA1\u6709\u5173\u8054\u67E5\u8BE2</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select * from teacher;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>PRIMARY\u3002\u5D4C\u5957\u67E5\u8BE2\u4E2D\u6700\u5916\u5C42\u7684\u67E5\u8BE2</p></li><li><p>SUBQUERY\u3002\u5B50\u67E5\u8BE2</p></li><li><p>DERIVED\u3002\u884D\u751F\u67E5\u8BE2\uFF0C\u67E5\u8BE2\u4E2D\u51FA\u73B0\u4E34\u65F6\u7ED3\u679C\uFF0C\u4E2D\u95F4\u62EC\u53F7\u90E8\u5206\u53EB\u4E34\u65F6\u8868\u6216\u6D3E\u751F\u8868</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select cr.name
from (
	select * from course where t.id = 1
	union
  select * from course where t.id = 2 
) cr;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20201003153741682.png" alt="image-20201003153741682"></p></li><li><p>UNION\u3002\u7528\u5230\u4E86union\u5173\u952E\u5B57\u7684\u67E5\u8BE2</p></li></ul><h3 id="type-\u8FDE\u63A5\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#type-\u8FDE\u63A5\u7C7B\u578B" aria-hidden="true">#</a> type(\u8FDE\u63A5\u7C7B\u578B)</h3><p>\u6309\u6548\u7387\u4ECE\u4E0A\u5F80\u4E0B\u6392\u5E8F</p><ul><li>\u53EF\u9047\u4E0D\u53EF\u6C42 <ul><li>null\u3002MySQL \u5728\u4F18\u5316\u8FC7\u7A0B\u4E2D\u5206\u89E3\u8BED\u53E5\uFF0C<strong>\u6267\u884C\u65F6\u751A\u81F3\u4E0D\u7528\u8BBF\u95EE\u8868\u6216\u7D22\u5F15</strong>\uFF0C\u4F8B\u5982\u4ECE\u4E00\u4E2A\u7D22\u5F15\u5217\u91CC\u9009\u53D6\u6700\u5C0F\u503C\u53EF\u4EE5\u901A\u8FC7\u5355\u72EC\u7D22\u5F15\u67E5\u627E\u5B8C\u6210\u3002</li><li>system\uFF0Cconst\u7C7B\u578B\u7684\u4E00\u79CD\u7279\u4F8B\uFF0C\u8DDF\u8FDE\u63A5\u4E2Dmysql\u5E93\u6709\u5173\u8054\u3002<strong>\u5F53\u67E5\u8BE2\u7CFB\u7EDF\u8868\u4E2D\u53EA\u6709\u4E00\u884C\u7ED3\u679C\u7684\u60C5\u51B5</strong></li><li>const\uFF0C\u5E38\u91CF\u3002<strong>\u5355\u8868\u67E5\u8BE2</strong>\uFF0C\u5F53\u4F7F\u7528\u4E3B\u952E\u7D22\u5F15\u6216\u552F\u4E00\u7D22\u5F15\u67E5\u8BE2\u5230\u53EA\u6709\u4E00\u884C\u7ED3\u679C\u7684\u60C5\u51B5\uFF0C\u6027\u80FD\u975E\u5E38\u597D\u7684\u4E00\u79CD\u67E5\u8BE2</li><li>eq_ref\u3002<strong>\u5173\u8054\u67E5\u8BE2\u4E2D</strong>\uFF0C\u7528\u7D22\u5F15\u53BB\u67E5\u8BE2\u6570\u636E\u65F6\uFF0C\u4E00\u4E2A\u7D22\u5F15\u53EA\u6709\u4E00\u6761\u8BB0\u5F55\u5BF9\u5E94(<strong>\u552F\u4E00\u7D22\u5F15unique index\uFF0C\u805A\u96C6\u7D22\u5F15primary index</strong>)\uFF0C\u5F53\u627E\u5230\u4E00\u6761\u6570\u636E\u540E\u9A6C\u4E0A\u505C\u6B62\u641C\u7D22\u3002</li></ul></li><li>\u4F18\u5316\u7684\u76EE\u6807 <ul><li>ref\u3002\u5173\u8054\u67E5\u8BE2\u4E2D\uFF0C\u4F7F\u7528\u975E\u552F\u4E00\u7D22\u5F15\u67E5\u8BE2\u6570\u636E\uFF0C\u4E00\u4E2A\u7D22\u5F15\u53EF\u80FD\u5BF9\u5E94\u591A\u6761\u8BB0\u5F55\uFF0C\u6240\u4EE5\u641C\u7D22\u5230\u4E00\u6761\u8BB0\u5F55\u540E\uFF0C\u8981\u8FDB\u884C\u76EE\u6807\u503C\u9644\u8FD1\u7684\u5C0F\u8303\u56F4\u626B\u63CF\uFF0C\u4F46\u4E5F\u4E0D\u4F1A\u8FDB\u884C\u5168\u8868\u626B\u63CF</li><li>range\u3002\u8303\u56F4\u67E5\u8BE2\uFF0C\u5927\u4E8E\u3001\u5C0F\u4E8E\u3001<code>in</code>\u3001<code>between and</code>\u3002\u53EA\u68C0\u7D22\u7ED9\u5B9A\u8303\u56F4\u7684\u884C\uFF0C\u4F7F\u7528\u4E00\u4E2A\u7D22\u5F15\u6765\u9009\u62E9\u884C</li></ul></li><li>\u4E00\u5B9A\u9700\u8981\u4F18\u5316\u7684\u60C5\u51B5 <ul><li>index\u3002\u6CA1\u6709\u8FC7\u6EE4\u6761\u4EF6\uFF0C\u67E5\u8BE2\u7D22\u5F15\u4E0A\u5168\u90E8\u7684\u6570\u636E\uFF0C<strong>\u904D\u5386\u7D22\u5F15\u6811</strong>\u3002</li><li>all\u3002\u6CA1\u6709\u7528\u5230\u4EFB\u4F55\u7D22\u5F15\u6216\u8FD9\u5F20\u8868\u6CA1\u6709\u7D22\u5F15\uFF0C\u4EE3\u8868<strong>\u5168\u8868\u626B\u63CF</strong>\u3002</li></ul></li></ul><h3 id="possible-keys-\u53EF\u80FD\u7528\u5230\u7684\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#possible-keys-\u53EF\u80FD\u7528\u5230\u7684\u7D22\u5F15" aria-hidden="true">#</a> possible_keys(\u53EF\u80FD\u7528\u5230\u7684\u7D22\u5F15)</h3><h3 id="key-\u5B9E\u9645\u7528\u5230\u7684\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#key-\u5B9E\u9645\u7528\u5230\u7684\u7D22\u5F15" aria-hidden="true">#</a> key(\u5B9E\u9645\u7528\u5230\u7684\u7D22\u5F15)</h3><p>possible_keys\u4E3Anull\uFF0Ckey\u4E0D\u4E3Anull\u7684\u60C5\u51B5</p><blockquote><p>\u5F53\u8868\u4E2D\u5B58\u5728\u8054\u5408\u7D22\u5F15(a,b,c)\u65F6\uFF0C\u6267\u884C\u4EE5\u4E0Bsql\u8BED\u53E5 select b from tab where b = &#39;xxx&#39;;</p><p>possible_keys\u4E3Anull\uFF0Ckey\u4E3Acomidx_a_b_c\uFF0CExtra\u6709Using index</p><p>\u548C\u7D22\u5F15\u8986\u76D6\u6709\u4E00\u5B9A\u8054\u7CFB\uFF1A\u7406\u8BBA\u4E0A\u6CA1\u6709\u4F7F\u7528\u5230\u7D22\u5F15\uFF0C\u4F46\u662F\u7531\u4E8E\u67E5\u8BE2\u7684\u6570\u636E\u521A\u597D\u5728\u7D22\u5F15\u7684\u5B57\u6BB5\u4E2D\uFF0C\u6240\u4EE5\u8FD8\u662F\u4F1A\u5728\u7D22\u5F15\u4E2D\u68C0\u7D22\u6570\u636E</p></blockquote><h3 id="key-len-\u7D22\u5F15\u7684\u957F\u5EA6" tabindex="-1"><a class="header-anchor" href="#key-len-\u7D22\u5F15\u7684\u957F\u5EA6" aria-hidden="true">#</a> key_len(\u7D22\u5F15\u7684\u957F\u5EA6)</h3><p>\u6839\u636E\u5B9E\u9645\u7528\u5230\u7684\u7D22\u5F15\u6765\u8BA1\u7B97\u7D22\u5F15\u7684\u957F\u5EA6\uFF0C\u4E0E\u7D22\u5F15\u5B57\u6BB5\u7684\u7C7B\u578B\u53CA\u5176\u957F\u5EA6\u6709\u5173\u7CFB\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u503C\u53BB\u5224\u65AD\u662F\u4E0D\u662F\u7528\u5230\u671F\u671B\u7684\u7D22\u5F15</p><h3 id="rows-\u4F30\u7B97\u627E\u5230\u5BF9\u5E94\u8BB0\u5F55\u6240\u9700\u8981\u7684\u884C\u6570" tabindex="-1"><a class="header-anchor" href="#rows-\u4F30\u7B97\u627E\u5230\u5BF9\u5E94\u8BB0\u5F55\u6240\u9700\u8981\u7684\u884C\u6570" aria-hidden="true">#</a> rows(\u4F30\u7B97\u627E\u5230\u5BF9\u5E94\u8BB0\u5F55\u6240\u9700\u8981\u7684\u884C\u6570)</h3><h3 id="extra" tabindex="-1"><a class="header-anchor" href="#extra" aria-hidden="true">#</a> Extra</h3><ul><li>\u6BD4\u8F83\u597D\u7684\u60C5\u51B5 <ul><li><code>Using index</code> \u8986\u76D6\u7D22\u5F15\uFF0C\u7D22\u5F15\u8986\u76D6\u4E86\u67E5\u8BE2\u7684\u5217\uFF0C\u4E0D\u9700\u8981\u56DE\u8868</li><li><code>Using index condition</code> \u7D22\u5F15\u4E0B\u63A8\uFF0C\u670D\u52A1\u7AEF\u628A\u6761\u4EF6\u4E0B\u63A8\u7ED9\u5B58\u50A8\u5F15\u64CE</li></ul></li><li>\u666E\u901A\u7684 <ul><li><code>Using where</code> \u4E0D\u7528\u8BFB\u53D6\u8868\u4E2D\u6240\u6709\u4FE1\u606F\uFF0C\u4EC5\u901A\u8FC7\u7D22\u5F15\u5C31\u53EF\u4EE5\u83B7\u53D6\u6240\u9700\u6570\u636E\uFF0C\u8FD9\u53D1\u751F\u5728\u5BF9\u8868\u7684\u5168\u90E8\u7684\u8BF7\u6C42\u5217\u90FD\u662F\u540C\u4E00\u4E2A\u7D22\u5F15\u7684\u90E8\u5206\u7684\u65F6\u5019\uFF0C\u4ECE\u5B58\u50A8\u5F15\u64CE\u4E2D\u83B7\u53D6\u6570\u636E\u540E\u8FD8\u9700\u8981\u5728\u670D\u52A1\u7AEF\u4E2D\u518D\u6B21\u8FC7\u6EE4</li><li><code>Using filesort</code> \u4E0D\u80FD\u57FA\u4E8E\u7D22\u5F15(where\u5B50\u53E5\u4E2D\u7684\u6761\u4EF6)\u6392\u5E8F\uFF0C\u4F7F\u7528\u4E86\u989D\u5916\u7684\u65B9\u5F0F(order\u5B57\u53E5)\u6765\u6392\u5E8F</li><li><code>Using temporary</code> \u4F7F\u7528\u4E86\u4E34\u65F6\u8868\u3002 <ul><li>\u5728\u6CA1\u6709\u7D22\u5F15\u7684\u5217\u4E0A\u4F7F\u7528<code>distinct</code>\u67E5\u8BE2\u65F6</li><li>\u5728\u6CA1\u6709\u7D22\u5F15\u7684\u5217\u4E0A\u4F7F\u7528<code>group by</code>\u64CD\u4F5C</li><li>\u505A<code>join</code>\u67E5\u8BE2\u65F6\uFF0C\u5BF9\u4EFB\u610F\u4E00\u4E2A\u5217\u8FDB\u884C<code>group by</code>\u64CD\u4F5C</li><li>\u6392\u5E8F<code>order by</code>\u64CD\u4F5C</li></ul></li></ul></li></ul><h1 id="\u5B58\u50A8\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#\u5B58\u50A8\u5F15\u64CE" aria-hidden="true">#</a> \u5B58\u50A8\u5F15\u64CE</h1><p>MyISAM\u3001InnoDB\u3001HEAP\u3001BOB\u3001ARCHIVE\u3001CSV\u7B49</p><h2 id="innodb" tabindex="-1"><a class="header-anchor" href="#innodb" aria-hidden="true">#</a> InnoDB</h2><p>MySQL\u9ED8\u8BA4\u4E8B\u52A1\u578B\u5F15\u64CE</p><ul><li>\u6570\u636E\u5B58\u50A8\u5728\u8868\u7A7A\u95F4(\u7531InnoDB\u7BA1\u7406\u7684\u4E00\u4E2A\u9ED1\u76D2\u5B50\uFF0C\u7531\u4E00\u7CFB\u5217\u6570\u636E\u6587\u4EF6\u7EC4\u6210)\u4E2D\u3002</li><li>\u91C7\u7528MVCC\u6765\u652F\u6301\u9AD8\u5E76\u53D1\uFF0C\u5B9E\u73B0\u4E86\u56DB\u4E2A\u6807\u51C6\u7684\u9694\u79BB\u7EA7\u522B\u3002\u9ED8\u8BA4\u662Frepeatable read\u3002\u901A\u8FC7<strong>\u95F4\u9699\u9501</strong>\u7684\u7B56\u7565\u9632\u6B62\u5E7B\u8BFB\u7684\u51FA\u73B0</li><li>\u57FA\u4E8E\u7C07\u7EC4\u7D22\u5F15\u5EFA\u7ACB\u7684</li><li>\u652F\u6301<strong>\u4E8B\u52A1</strong></li><li>\u652F\u6301<strong>\u5916\u952E</strong></li><li>\u652F\u6301<strong>\u884C\u7EA7\u9501</strong>\uFF1B\u5408\u9002\u4E8E\u63D2\u5165\u548C\u66F4\u65B0\u64CD\u4F5C\u6BD4\u8F83\u591A\u7684\u5E94\u7528\uFF0C\u9002\u5408\u5927\u6570\u636E\uFF0C\u5927\u5E76\u53D1\u3002</li></ul><h2 id="myisam" tabindex="-1"><a class="header-anchor" href="#myisam" aria-hidden="true">#</a> MyISAM</h2><ul><li>\u5C06\u8868\u5B58\u50A8\u5728\u4E24\u4E2A\u6587\u4EF6\u4E2D\uFF1A\u6570\u636E\u6587\u4EF6(.MYD)\u3001\u7D22\u5F15\u6587\u4EF6(.MYI)</li><li><strong>\u8868\u7EA7\u9501</strong>\uFF1B\u9488\u5BF9\u8868\u52A0\u9501\uFF0C\u8BFB\u53D6\u65F6\u4F1A\u5BF9\u6240\u6709\u9700\u8981\u8BFB\u7684\u8868\u52A0\u4E0A\u5171\u4EAB\u9501\uFF0C\u5199\u5165\u65F6\u5BF9\u8868\u52A0\u4E0A\u6392\u4ED6\u9501\u3002\u652F\u6301\u5E76\u53D1\u63D2\u5165\uFF0C\u67E5\u8BE2\u7684\u540C\u65F6\u53EF\u4EE5\u63D2\u5165\u65B0\u8BB0\u5F55\u3002\u9002\u5408\u7528\u4E8E<strong>\u9891\u7E41\u67E5\u8BE2</strong>\u7684\u5E94\u7528\u3002\u8868\u9501\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u6B7B\u9501\uFF0C\u9002\u5408<strong>\u5C0F\u6570\u636E\uFF0C\u5C0F\u5E76\u53D1</strong>\u3002</li><li>\u7D22\u5F15\uFF0C\u5C31\u7B97\u662Fblob\u548Ctext\u7C7B\u578B\u4E5F\u53EF\u4EE5\u57FA\u4E8E\u524D500\u4E2A\u5B57\u7B26\u6765\u5EFA\u7ACB\u7D22\u5F15\u3002\u4E5F\u652F\u6301\u5168\u6587\u7D22\u5F15\uFF0C\u662F\u4E00\u79CD\u57FA\u4E8E\u5206\u8BCD\u521B\u5EFA\u7684</li></ul><h1 id="\u4E8B\u52A1" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1" aria-hidden="true">#</a> \u4E8B\u52A1</h1><h2 id="\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u6982\u5FF5" aria-hidden="true">#</a> \u6982\u5FF5</h2><p>\u6570\u636E\u5E93\u6700\u5C0F\u7684\u5DE5\u4F5C\u5355\u5143</p><p>\u5982\u679C\u4E00\u4E2A\u5305\u542B\u591A\u4E2A\u6B65\u9AA4\u7684\u4E1A\u52A1\u64CD\u4F5C\uFF0C\u88AB\u4E8B\u52A1\u7BA1\u7406\uFF0C\u90A3\u4E48\u8FD9\u4E9B\u64CD\u4F5C\u8981\u4E48\u540C\u65F6\u6210\u529F\uFF0C\u8981\u4E48\u540C\u65F6\u5931\u8D25\u3002</p><h2 id="\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u64CD\u4F5C" aria-hidden="true">#</a> \u64CD\u4F5C</h2><ul><li>\u5F00\u542F\u4E8B\u52A1\uFF1A<code>start transaction</code></li><li>\u4E8B\u52A1\u56DE\u6EDA\uFF1A<code>rollback</code></li><li>\u4E8B\u52A1\u63D0\u4EA4\uFF1A<code>commit</code></li></ul><p>\u5F00\u542F\u4E8B\u52A1\u540E\uFF0C\u6CA1\u6709\u8FDB\u884C\u56DE\u6EDA\u6216\u63D0\u4EA4\u4E4B\u524D\uFF0C\u6570\u636E\u4F1A\u53D1\u751F\u201C\u4E34\u65F6\u201D\u7684\u53D8\u5316\uFF0C\u4F46\u662F\u8FD9\u4E2A\u53D8\u5316\u4E0D\u662F\u6301\u4E45\u7684\uFF0C\u5F53\u5173\u95ED\u5F53\u524D\u7A97\u53E3\uFF0C\u6570\u636E\u5C31\u4F1A\u81EA\u52A8\u9ED8\u8BA4\u56DE\u6EDA\u5230\u4E4B\u524D\u7684\u72B6\u6001\u3002\u5982\u679C\u53D1\u73B0\u8FC7\u7A0B\u4E2D\u6709\u5931\u8D25\u7684\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528\u56DE\u6EDA\uFF0C\u56DE\u6EDA\u5230\u4E8B\u52A1\u5F00\u542F\u7684\u65F6\u5019\u6570\u636E\u7684\u72B6\u6001\uFF1B\u5982\u679C\u6574\u4E2A\u8FC7\u7A0B\u90FD\u6210\u529F\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528\u4E8B\u52A1\u63D0\u4EA4\uFF0C\u8BA9\u8FD9\u4E2A\u4E34\u65F6\u7684\u53D8\u5316\u53D8\u6210\u6301\u4E45\u7684\u53D8\u5316\u3002</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5F00\u542F\u4E8B\u52A1
start transaction

-- \u8F6C\u8D26
update account set balance = balance - 500 where name = &#39;\u5F20\u4E09&#39;;
-- \u51FA\u9519\u4E86 \u5BFC\u81F4\u5F20\u4E09\u7684\u94B1\u6263\u4E86\uFF0C\u4F46\u662F\u674E\u56DB\u7684\u94B1\u6CA1\u6709\u6263\u5230
update account set balance = balance + 500 where name = &#39;\u674E\u56DB&#39;;

-- \u53D1\u73B0\u4E8B\u52A1\u6709\u95EE\u9898\uFF0C\u8FDB\u884C\u4E8B\u52A1\u56DE\u6EDA
rollback;

-- \u53D1\u73B0\u4E8B\u52A1\u6CA1\u6709\u95EE\u9898\uFF0C\u8FDB\u884C\u4E8B\u52A1\u63D0\u4EA4
commit;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E8B\u52A1\u63D0\u4EA4\u7684\u4E24\u79CD\u65B9\u5F0F</p><ul><li>\u81EA\u52A8 <ul><li>mysql\u5C31\u662F\u9ED8\u8BA4\u81EA\u52A8\u63D0\u4EA4\u7684\u3002\u4E00\u6761DML\u8BED\u53E5\u5C31\u4F1A\u81EA\u52A8\u63D0\u4EA4\u4E00\u6B21\u4E8B\u52A1</li></ul></li><li>\u624B\u52A8 <ul><li>\u9700\u8981\u5148<code>start transaction</code>\u5F00\u542F\u4E8B\u52A1\uFF0C\u518D<code>commit</code>\u63D0\u4EA4\u4E8B\u52A1\uFF1B\u5728\u5904\u7406\u8FC7\u7A0B\u4E2D\u5982\u679C\u9047\u5230\u9519\u8BEF\uFF0CMySQL\u4E00\u822C\u4F1A\u81EA\u52A8\u56DE\u6EDA</li></ul></li></ul><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u770B\u4E8B\u52A1\u9ED8\u8BA4\u7684\u63D0\u4EA4\u65B9\u5F0F
select @@autocommit; -- 1 \u81EA\u52A8\u63D0\u4EA4 2 \u624B\u52A8\u63D0\u4EA4

-- \u4FEE\u6539\u9ED8\u8BA4\u63D0\u4EA4\u65B9\u5F0F
set @@autocommit = 0;
-- \u4FEE\u6539\u4E4B\u540E\u6BCF\u6B21\u7684dml\u8BED\u53E5\u7684\u6267\u884C\u82E5\u60F3\u6301\u4E45\u5316\u6539\u53D8\u5C31\u8981\u624B\u52A8\u6267\u884Ccommit\u8BED\u53E5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u56DB\u5927\u7279\u5F81" tabindex="-1"><a class="header-anchor" href="#\u56DB\u5927\u7279\u5F81" aria-hidden="true">#</a> \u56DB\u5927\u7279\u5F81</h2><ul><li>\u539F\u5B50\u6027(Atomicity)\uFF1A\u4E8B\u52A1\u662F\u4E0D\u53EF\u518D\u5206\u5272\u7684\u6700\u5C0F\u64CD\u4F5C\u5355\u4F4D\uFF0C\u4E8B\u52A1\u4E2D\u7684\u6240\u6709\u64CD\u4F5C\u8981\u4E48\u540C\u65F6\u6210\u529F\uFF0C\u8981\u4E48\u540C\u65F6\u5931\u8D25</li><li>\u4E00\u81F4\u6027(Consiitency)\uFF1A\u4E8B\u52A1\u64CD\u4F5C\u524D\u540E\uFF0C\u6570\u636E\u3001\u7ED3\u6784\u5B8C\u6574\u6027\u4E0D\u88AB\u7834\u574F</li><li>\u9694\u79BB\u6027(Isolation)\uFF1A\u591A\u4E2A\u4E8B\u52A1\u4E4B\u95F4\uFF0C\u76F8\u4E92\u72EC\u7ACB\u3002\u4E00\u4E2A\u4E8B\u52A1\u6240\u505A\u7684\u4FEE\u6539\u5728\u6700\u7EC8\u63D0\u4EA4\u524D\uFF0C\u5BF9\u5176\u4ED6\u7684\u4E8B\u52A1\u4E0D\u53EF\u89C1</li><li>\u6301\u4E45\u6027(Durability)\uFF1A\u5982\u679C\u4E8B\u52A1\u63D0\u4EA4\u6216\u8005\u56DE\u6EDA\uFF0C\u90A3\u4E48\u5B83\u4F1A\u6301\u4E45\u5730\u66F4\u65B0\u6570\u636E\u5E93</li><li>C\u662F\u76EE\u7684\uFF0CAID\u662F\u624B\u6BB5</li></ul><h2 id="\u4E8B\u52A1\u56DB\u5927\u7279\u6027\u4E2D\u539F\u5B50\u6027\u3001\u6301\u4E45\u6027\u3001\u9694\u79BB\u6027\u5B9E\u73B0\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1\u56DB\u5927\u7279\u6027\u4E2D\u539F\u5B50\u6027\u3001\u6301\u4E45\u6027\u3001\u9694\u79BB\u6027\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> \u4E8B\u52A1\u56DB\u5927\u7279\u6027\u4E2D\u539F\u5B50\u6027\u3001\u6301\u4E45\u6027\u3001\u9694\u79BB\u6027\u5B9E\u73B0\u539F\u7406</h2><blockquote><p>\u539F\u5B50\u6027\uFF1A\u5F53\u4E8B\u52A1\u6267\u884C\u65F6\uFF0C\u5148\u8BB0\u5F55undolog(undolog\u8BB0\u5F55\u7684\u662F\u64CD\u4F5C\u524D\u7684\u503C)\uFF0C\u968F\u540E\u8BB0\u5F55redolog(redolog\u8BB0\u5F55\u7684\u662F\u64CD\u4F5C\u540E\u7684\u503C)\u3002\u5F53\u672A\u63D0\u4EA4\u4E8B\u52A1\u65F6\u53D1\u751F\u5B95\u673A\uFF0C\u5148\u6267\u884Credolog\uFF0C\u628A\u503C\u66F4\u65B0\u6210\u64CD\u4F5C\u540E\u7684\u503C\uFF0C\u518D\u6267\u884Cundolog\uFF0C\u628A\u503C\u66F4\u65B0\u56DE\u64CD\u4F5C\u524D\u7684\u503C\uFF0C\u4ECE\u800C\u4FDD\u8BC1\u4E8B\u52A1\u7684\u6267\u884C\u72B6\u6001\u4E00\u81F4</p><p>\u9694\u79BB\u6027\uFF1A\u4E24\u79CD\u65B9\u6848\uFF1A1\u3001\u52A0\u9501\uFF1B2\u3001MVCC\u3002\u4FDD\u8BC1\u5728\u4E0D\u540C\u7684\u4E8B\u52A1\u4E2D\u4FDD\u8BC1\u524D\u540E\u4E24\u6B21\u6267\u884C\u76F8\u540C\u7684\u67E5\u8BE2\u64CD\u4F5C\u8BFB\u53D6\u5230\u76F8\u540C\u7684\u6570\u636E</p><p>\u6301\u4E45\u6027\uFF1A\u56E0\u4E3A\u64CD\u4F5C\u65F6\uFF0C\u6570\u636E\u4F1A\u5199\u5165redolog\uFF0C\u6240\u4EE5\u5373\u4F7F\u53D1\u751F\u5B95\u673A\u4E86\uFF0C\u4E5F\u80FD\u4ECEredolog\u4E2D\u53BB\u6062\u590D\u4FEE\u6539\u7684\u6570\u636E\uFF0C\u4FDD\u8BC1\u4E86\u6570\u636E\u7684\u6301\u4E45\u6027</p></blockquote><h2 id="\u4E8B\u52A1\u5E76\u53D1\u4E09\u5927\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1\u5E76\u53D1\u4E09\u5927\u95EE\u9898" aria-hidden="true">#</a> \u4E8B\u52A1\u5E76\u53D1\u4E09\u5927\u95EE\u9898</h2><p>\u6982\u5FF5\uFF1A\u591A\u4E2A\u4E8B\u52A1\u4E4B\u95F4\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\u3002\u4F46\u662F\u591A\u4E2A\u4E8B\u52A1\u64CD\u4F5C\u540C\u4E00\u6279\u6570\u636E\uFF0C\u5219\u4F1A\u5F15\u53D1\u4E00\u4E9B\u95EE\u9898\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u4E0D\u540C\u7684\u9694\u79BB\u7EA7\u522B\u6765\u89C4\u907F\u8FD9\u4E9B\u95EE\u9898</p><p>\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p><ol><li>\u810F\u8BFB\uFF1A\u4E00\u4E2A\u4E8B\u52A1<strong>\u8BFB\u53D6</strong>\u53E6\u4E00\u4E2A\u4E8B\u52A1\u4E2D<strong>\u6CA1\u6709\u63D0\u4EA4\u7684\u6570\u636E</strong></li><li>\u4E0D\u53EF\u91CD\u590D\u8BFB(\u865A\u8BFB)\uFF1A\u5728\u540C\u4E00\u4E2A\u4E8B\u52A1\u4E2D\uFF0C\u4E24\u6B21\u8BFB\u53D6\u7684<strong>\u6570\u636E\u5185\u5BB9\u4E0D\u4E00\u81F4</strong>\u3002\u8FD9\u662F\u4E8B\u52A1 **update **\u6216 <strong>delete</strong> \u5F15\u53D1\u7684\u3002</li><li>\u5E7B\u8BFB\uFF1A\u67D0\u4E2A\u4E8B\u52A1\u5728\u8BFB\u53D6\u67D0\u4E2A\u8303\u56F4\u5185\u7684\u8BB0\u5F55\u65F6\uFF0C\u53E6\u4E00\u4E2A\u4E8B\u52A1\u53C8\u4ECE\u5728\u8303\u56F4\u63D2\u5165\u4E86\u65B0\u7EAA\u5F55\uFF0C\u5F53\u524D\u7684\u4E8B\u52A1\u5728\u8BFB\u53D6\u8BE5\u8303\u56F4\u7684\u8BB0\u5F55\u65F6\uFF0C\u5C31\u4F1A\u4EA7\u751F\u5E7B\u8BFB\u3002\u5728\u540C\u4E00\u4E2A\u4E8B\u52A1\u4E2D\uFF0C\u4E24\u6B21\u8BFB\u53D6\u7684<strong>\u6570\u636E\u7684\u6570\u91CF\u4E0D\u4E00\u81F4</strong>\u3002\u8FD9\u662F <strong>insert</strong> \u65F6\u5F15\u53D1\u7684\u95EE\u9898</li></ol><h2 id="\u9694\u79BB\u7EA7\u522B" tabindex="-1"><a class="header-anchor" href="#\u9694\u79BB\u7EA7\u522B" aria-hidden="true">#</a> \u9694\u79BB\u7EA7\u522B</h2><ol><li><p>read uncommitted\uFF1A\u8BFB\u672A\u63D0\u4EA4\u3002\u4EA7\u751F\u95EE\u9898\uFF1A\u810F\u8BFB\u3001\u865A\u8BFB\u3001\u5E7B\u8BFB\u3002</p><p><strong>\u5728\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u8BFB\u53D6\u5230\u53E6\u4E00\u4E8B\u52A1\u672A\u63D0\u4EA4\u7684\u6570\u636E</strong></p></li><li><p>read committed\uFF1A\u8BFB\u5DF2\u63D0\u4EA4\u3002\u4EA7\u751F\u95EE\u9898\uFF1A\u865A\u8BFB\u3001\u5E7B\u8BFB\u3002</p><p><strong>\u5728\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u8BFB\u53D6\u5230\u53E6\u4E00\u4E8B\u52A1\u5DF2\u63D0\u4EA4\u7684\u6570\u636E\u3002</strong></p></li><li><p>repeatable read\uFF1A\u53EF\u91CD\u590D\u8BFB\u3002\u4EA7\u751F\u95EE\u9898\uFF1A\u5E7B\u8BFB(MySQL\u9ED8\u8BA4\u7EA7\u522B)\u3002</p><p><strong>\u5728\u540C\u4E00\u4E8B\u52A1\u5185\uFF0C\u591A\u6B21\u8BFB\u53D6\u7684\u6570\u636E\u90FD\u662F\u4E00\u6837\u7684\uFF0C\u9664\u975E\u63D0\u4EA4\u4E8B\u52A1\uFF0C\u5426\u5219\u65E0\u6CD5\u8BFB\u53D6\u5176\u4ED6\u4E8B\u52A1\u63D0\u4EA4\u7684\u6570\u636E</strong></p></li><li><p>serializable\uFF1A\u4E32\u884C\u5316\u3002\u53EF\u4EE5\u89E3\u51B3\u6240\u6709\u95EE\u9898\uFF0C\u5728\u8BFB\u53D6\u7684\u6BCF\u4E00\u884C\u6570\u636E\u4E0A\u90FD\u52A0\u9501</p><p><strong>\u9501\u8868\u64CD\u4F5C\u3002\u5728\u4E00\u4E2A\u4E8B\u52A1\u64CD\u4F5C\u8FD9\u4E2A\u8868\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u53E6\u5916\u7684\u4E8B\u52A1\u4E0D\u5141\u8BB8\u64CD\u4F5C\u8FD9\u4E2A\u8868\uFF0C\u53EA\u6709\u9501\u6253\u5F00\u4E86\uFF0C\u624D\u53EF\u4EE5\u64CD\u4F5C</strong></p></li></ol><table><thead><tr><th>\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B</th><th>\u810F\u8BFB</th><th>\u4E0D\u53EF\u91CD\u590D\u8BFB(\u865A\u8BFB)</th><th>\u5E7B\u8BFB</th></tr></thead><tbody><tr><td>Read Uncommitted</td><td>\u53EF\u80FD</td><td>\u53EF\u80FD</td><td>\u53EF\u80FD</td></tr><tr><td>Read Committed</td><td>\u4E0D\u53EF\u80FD</td><td>\u53EF\u80FD</td><td>\u53EF\u80FD</td></tr><tr><td>Repeatable Read</td><td>\u4E0D\u53EF\u80FD</td><td>\u4E0D\u53EF\u80FD</td><td>\u5BF9InnoDB\u4E0D\u53EF\u80FD</td></tr><tr><td>Serializable</td><td>\u4E0D\u53EF\u80FD</td><td>\u4E0D\u53EF\u80FD</td><td>\u4E0D\u53EF\u80FD</td></tr></tbody></table><p>\u6CE8\u610F\uFF1A\u9694\u79BB\u7EA7\u522B\u4ECE\u5C0F\u5230\u5927\uFF0C<strong>\u5B89\u5168\u6027\u8D8A\u6765\u8D8A\u9AD8</strong>\uFF0C\u4F46<strong>\u6548\u7387\u8D8A\u6765\u8D8A\u4F4E</strong></p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u67E5\u8BE2\u9694\u79BB\u7EA7\u522B
SELECT @@transaction_isolation;

-- \u8BBE\u7F6E\u9694\u79BB\u7EA7\u522B(\u91CD\u542F\u751F\u6548)
set global transaction isolation level \u7EA7\u522B;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6B7B\u9501" tabindex="-1"><a class="header-anchor" href="#\u6B7B\u9501" aria-hidden="true">#</a> \u6B7B\u9501</h3><p>\u4E24\u4E2A\u6216\u4E24\u4E2A\u4EE5\u4E0A\u7684\u4E8B\u52A1\u5728\u540C\u4E00\u4E2A\u8D44\u6E90\u4E0A\u76F8\u4E92\u5360\u7528\uFF0C\u5E76\u8BF7\u6C42\u9501\u5B9A\u5BF9\u65B9\u5360\u7528\u7684\u8D44\u6E90\uFF0C\u4ECE\u800C\u5BFC\u81F4\u6076\u6027\u5FAA\u73AF\u7684\u73B0\u8C61</p><p><strong>\u89E3\u51B3\u65B9\u6CD5</strong>\uFF1A</p><p>InnoDB\uFF1A\u5C06\u6301\u6709<strong>\u6700\u5C11\u884C\u7EA7\u6392\u4ED6\u9501</strong>\u7684\u4E8B\u52A1\u8FDB\u884C\u56DE\u6EDA</p><h3 id="innodb\u89E3\u51B3\u5E7B\u8BFB\u7684\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#innodb\u89E3\u51B3\u5E7B\u8BFB\u7684\u65B9\u5F0F" aria-hidden="true">#</a> InnoDB\u89E3\u51B3\u5E7B\u8BFB\u7684\u65B9\u5F0F</h3><p>MVCC</p><p>\u57FA\u4E8E\u7248\u672CId</p><p>\u4E34\u952E\u9501</p><p>\u5F53\u524D\u8BFB\u9700\u8981\u52A0\u9501\uFF0CMVCC\u4E2D\u7684\u5FEB\u7167\u8BFB(\u6570\u636E\u7684\u526F\u672C)\u4E0D\u9700\u8981\u52A0\u9501</p><h1 id="\u9501" tabindex="-1"><a class="header-anchor" href="#\u9501" aria-hidden="true">#</a> \u9501</h1><p>\u4F5C\u7528\uFF1A\u4E8B\u52A1\u83B7\u53D6\u9501\u8FD9\u79CD\u63A7\u5236\u8D44\u6E90\uFF0C\u7528\u4E8E\u4FDD\u62A4\u6570\u636E\u8D44\u6E90\uFF0C\u9632\u6B62\u5176\u4ED6\u4E8B\u52A1\u5BF9\u6570\u636E\u8FDB\u884C\u51B2\u7A81\u7684\u6216\u4E0D\u517C\u5BB9\u7684\u8BBF\u95EE\uFF0C\u89E3\u51B3\u4E8B\u52A1\u5BF9\u4E8E\u6570\u636E\u5E76\u53D1\u8BBF\u95EE\u7684\u95EE\u9898</p><h2 id="\u9501\u7C92\u5EA6" tabindex="-1"><a class="header-anchor" href="#\u9501\u7C92\u5EA6" aria-hidden="true">#</a> \u9501\u7C92\u5EA6</h2><ul><li>\u9501\u5B9A\u7C92\u5EA6\uFF1A\u8868\u9501 &gt; \u884C\u9501</li><li>\u52A0\u9501\u6548\u7387\uFF1A\u8868\u9501 &gt; \u884C\u9501\uFF0C\u56E0\u4E3A\u884C\u9501\u9700\u8981\u5148\u4ECE\u8868\u4E2D\u68C0\u7D22\u5230\u4E4B\u540E\u624D\u53EF\u4EE5\u52A0\u9501</li><li>\u51B2\u7A81\u6982\u7387\uFF1A\u8868\u9501 &gt; \u884C\u9501</li><li>\u5E76\u53D1\u6027\u80FD\uFF1A\u8868\u9501 &lt; \u884C\u9501</li></ul><p>InnoDB\u652F\u6301\u884C\u9501\u548C\u8868\u9501\uFF1BMyISAM\u652F\u6301\u8868\u9501</p><h3 id="\u8868\u9501" tabindex="-1"><a class="header-anchor" href="#\u8868\u9501" aria-hidden="true">#</a> \u8868\u9501</h3><p>\u5F00\u9500\u6700\u5C0F\u7684\u7B56\u7565\u3002\u9501\u5B9A\u6574\u5F20\u8868\uFF0C\u5F53\u4E00\u4E2A\u7528\u6237\u5728\u5BF9\u8868\u8FDB\u884C\u65B0\u589E\u3001\u5220\u9664\u3001\u4FEE\u6539\u64CD\u4F5C\u65F6\uFF0C\u9700\u8981\u5148\u83B7\u53D6\u5199\u9501\uFF0C\u8FD9\u4F1A\u963B\u585E\u5176\u4ED6\u7528\u6237\u5BF9\u8FD9\u5F20\u8868\u7684\u8BFB\u53D6\u548C\u4FEE\u6539\u64CD\u4F5C\u3002</p><p>\u5199\u9501\u4F1A\u6BD4\u8BFB\u9501\u6709\u66F4\u9AD8\u4F18\u5148\u7EA7\uFF0C\u5199\u9501\u53EF\u4EE5\u5728\u9501\u961F\u5217\u4E2D\u63D2\u5165\u5230\u8BFB\u9501\u7684\u524D\u9762\uFF0C\u8BFB\u9501\u4E0D\u53EF\u4EE5\u3002</p><h3 id="\u884C\u7EA7\u9501" tabindex="-1"><a class="header-anchor" href="#\u884C\u7EA7\u9501" aria-hidden="true">#</a> \u884C\u7EA7\u9501</h3><p>\u9501\u673A\u5236\u90FD\u662F\u5728<strong>\u5B58\u50A8\u5F15\u64CE\u5C42\u5B9E\u73B0</strong>\u7684\uFF0C\u9664\u4E86\u670D\u52A1\u5668\u67D0\u4E9B\u60C5\u51B5\u4F1A\u52A0\u8868\u9501(\u5982\u4FEE\u6539\u8868ALTER TABLE\u7684\u65F6\u5019)</p><h2 id="\u9501\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u9501\u7C7B\u578B" aria-hidden="true">#</a> \u9501\u7C7B\u578B</h2><p>\u4E8B\u52A1\u7ED3\u675F\u65F6\u81EA\u52A8\u91CA\u653E\u9501</p><h3 id="\u5171\u4EAB\u9501-\u8BFB-\u884C" tabindex="-1"><a class="header-anchor" href="#\u5171\u4EAB\u9501-\u8BFB-\u884C" aria-hidden="true">#</a> \u5171\u4EAB\u9501(\u8BFB)(\u884C)</h3><ul><li><p>\u5F53\u8BD5\u56FE<strong>\u8BFB\u53D6</strong>\u6570\u636E\u65F6\uFF0C\u4E8B\u52A1\u4F1A\u4E3A\u6240\u4F9D\u8D56\u7684\u6570\u636E\u8D44\u6E90\u8BF7\u6C42\u5171\u4EAB\u9501</p></li><li><p>\u6301\u6709\u5171\u4EAB\u9501\u65F6\u95F4\uFF1A\u4ECE\u4E8B\u52A1\u5F97\u5230\u5171\u4EAB\u9501\u5230\u8BFB\u64CD\u4F5C\u5B8C\u6210</p></li><li><p>\u591A\u4E2A\u4E8B\u52A1\u53EF\u4EE5\u5728<strong>\u540C\u4E00\u9636\u6BB5\u7528\u5171\u4EAB\u9501\u4F5C\u7528\u4E8E\u540C\u4E00\u6570\u636E\u8D44\u6E90</strong></p></li><li><p>\u52A0\u9501\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>select * from student where id = 1 LOCK IN SHARE MODE;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="\u6392\u4ED6\u9501-\u5199-\u884C" tabindex="-1"><a class="header-anchor" href="#\u6392\u4ED6\u9501-\u5199-\u884C" aria-hidden="true">#</a> \u6392\u4ED6\u9501(\u5199)(\u884C)</h3><ul><li><p>\u5F53\u8BD5\u56FE<strong>\u4FEE\u6539</strong>\u6570\u636E\u65F6\uFF0C\u4E8B\u52A1\u53EA\u80FD\u4E3A\u6240\u4F9D\u8D56\u7684\u6570\u636E\u8D44\u6E90\u8BF7\u6C42\u6392\u4ED6\u9501</p></li><li><p>\u6301\u6709\u6392\u4ED6\u9501\u65F6\u95F4\uFF1A\u4E00\u65E6\u67D0\u4E2A\u4E8B\u52A1\u5F97\u5230\u4E86\u6392\u4ED6\u9501\uFF0C\u5219\u8FD9\u4E2A\u4E8B\u52A1\u5C06\u4E00\u76F4\u6301\u6709\u6392\u4ED6\u9501\u76F4\u5230\u4E8B\u52A1\u5B8C\u6210</p></li><li><p>\u4E00\u4E2A\u4E8B\u52A1\u83B7\u5F97\u4E86\u4E00\u884C\u6570\u636E\u7684\u6392\u4ED6\u9501\uFF0C\u5176\u4ED6\u4E8B\u52A1\u5C31\u4E0D\u80FD\u518D\u83B7\u53D6\u8BE5\u884C\u7684\u9501(\u5171\u4EAB\u3001\u6392\u4ED6)\uFF0C\u53EA\u6709\u83B7\u53D6\u4E86\u6392\u4ED6\u9501\u7684\u4E8B\u52A1\u624D\u53EF\u4EE5\u5BF9\u6570\u636E\u8FDB\u884C\u8BFB\u53D6\u548C\u4FEE\u6539</p></li><li><p>\u52A0\u9501\u65B9\u5F0F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u81EA\u52A8
delete / update / insert \u9ED8\u8BA4\u52A0\u4E0A\u6392\u4ED6\u9501
-- \u624B\u52A8
select * from student where id = 1 FOR UPDATE;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="\u610F\u5411\u5171\u4EAB\u9501-\u8868" tabindex="-1"><a class="header-anchor" href="#\u610F\u5411\u5171\u4EAB\u9501-\u8868" aria-hidden="true">#</a> \u610F\u5411\u5171\u4EAB\u9501(\u8868)</h3><p>\u610F\u5411\u9501\u662F\u5B58\u50A8\u5F15\u64CE\u7EF4\u62A4\u7684\uFF0C\u7528\u6237\u65E0\u6CD5\u624B\u52A8\u64CD\u4F5C\u610F\u5411\u9501</p><p>\u8868\u793A\u4E8B\u52A1\u51C6\u5907\u7ED9\u6570\u636E\u884C\u52A0\u5165\u5171\u4EAB\u9501\uFF0C\u4E5F\u5C31\u662F\u8BF4\u4E00\u884C\u6570\u636E\u52A0\u5171\u4EAB\u9501\u524D\u5FC5\u987B\u5148\u53D6\u5F97\u8BE5\u8868\u7684\u610F\u5411\u5171\u4EAB\u9501</p><h3 id="\u610F\u5411\u6392\u4ED6\u9501-\u8868" tabindex="-1"><a class="header-anchor" href="#\u610F\u5411\u6392\u4ED6\u9501-\u8868" aria-hidden="true">#</a> \u610F\u5411\u6392\u4ED6\u9501(\u8868)</h3><p>\u8868\u793A\u4E8B\u52A1\u51C6\u5907\u7ED9\u6570\u636E\u884C\u52A0\u5165\u6392\u4ED6\u9501\uFF0C\u4E5F\u5C31\u662F\u8BF4\u4E00\u884C\u6570\u636E\u52A0\u6392\u4ED6\u9501\u524D\u5FC5\u987B\u5148\u53D6\u5F97\u8BE5\u8868\u7684\u610F\u5411\u6392\u4ED6\u9501</p><h3 id="\u610F\u5411\u9501\u7684\u610F\u4E49" tabindex="-1"><a class="header-anchor" href="#\u610F\u5411\u9501\u7684\u610F\u4E49" aria-hidden="true">#</a> \u610F\u5411\u9501\u7684\u610F\u4E49</h3><p>\u53EF\u4EE5\u7406\u89E3\u4E3A\u4E00\u4E2A\u6807\u5FD7\uFF0C\u4E00\u4E2A\u4E8B\u52A1\u8981\u6210\u529F\u5730\u9501\u5B9A\u4E00\u5F20\u8868\u7684\u524D\u63D0\uFF1A\u5FC5\u987B\u786E\u8BA4\u6CA1\u6709\u5176\u4ED6\u4E8B\u52A1\u5DF2\u7ECF\u9501\u5B9A\u4E86\u8FD9\u5F20\u8868\u7684\u4EFB\u610F\u4E00\u884C\u6570\u636E\u3002\u610F\u5411\u9501\u7684\u5B58\u5728\u53EF\u4EE5\u4F7F\u5F97\u52A0\u9501\u524D\u4E0D\u9700\u8981\u8FDB\u884C\u5168\u8868\u626B\u63CF\uFF0C\u6240\u4EE5\u52A0\u9501\u7684\u6548\u7387\u5C31\u66F4\u7A33\u5B9A\u4E86</p><h3 id="\u9501\u7684\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u9501\u7684\u5185\u5BB9" aria-hidden="true">#</a> \u9501\u7684\u5185\u5BB9</h3><p>\u4E0D\u52A0\u7D22\u5F15\uFF0C\u9501\u8868</p><p>\u5EFA\u7ACB\u4E3B\u952E\u7D22\u5F15\uFF0C\u9501\u884C</p><p>\u5EFA\u7ACB\u4E3B\u952E\u7D22\u5F15\uFF0C\u5EFA\u7ACB\u552F\u4E00\u7D22\u5F15\uFF0C\u9501\u884C</p><ul><li><p><strong>\u9501\u7684\u5185\u5BB9\u662F\u7D22\u5F15</strong></p></li><li><p>\u6CA1\u6709\u7D22\u5F15\u65F6\uFF0C\u52A0\u884C\u9501\u4F1A\u9501\u8868</p></li></ul><blockquote><p>\u56E0\u4E3A\u6CA1\u6709\u76F4\u63A5\u4F7F\u7528\u7D22\u5F15\u6765\u52A0\u9501\uFF0CInnoDB\u505A\u4E86\u4E00\u4E2A\u5168\u8868\u626B\u63CF\uFF0C\u628A\u8FD9\u5F20\u8868\u6240\u6709\u7684\u9690\u542B\u7684\u9ED8\u8BA4\u7684\u805A\u96C6\u7D22\u5F15\u5168\u90E8\u9501\u4F4F\u4E86\uFF0C\u6240\u4EE5\u9020\u6210\u4E86\u9501\u8868\u7684\u5047\u8C61\u3002</p></blockquote><ul><li>\u901A\u8FC7\u552F\u4E00\u7D22\u5F15\u52A0\u9501\u65F6\u4F1A\u628A\u4E3B\u952E\u7D22\u5F15\u4E5F\u9501\u4F4F</li></ul><blockquote><p>\u56E0\u4E3A\u552F\u4E00\u7D22\u5F15\u5B58\u4E86\u4E8C\u7EA7\u7D22\u5F15\u672C\u8EAB\u8FD8\u5B58\u4E86\u4E3B\u952E\u503C\uFF0C\u9501\u5B9A\u4E86\u8F85\u52A9\u7D22\u5F15\u540E\uFF0C\u4F1A\u628A\u4E3B\u952E\u7D22\u5F15\u4E5F\u9501\u4F4F</p></blockquote><h2 id="\u884C\u9501\u7B97\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u884C\u9501\u7B97\u6CD5" aria-hidden="true">#</a> \u884C\u9501\u7B97\u6CD5</h2><p><strong>\u7D22\u5F15\u533A\u95F4\u5212\u5206</strong></p><ul><li><p>\u8BB0\u5F55\uFF1A\u5177\u4F53\u7684\u7D22\u5F15\u503C</p></li><li><p>\u95F4\u9699\uFF1A\u6BCF\u4E2A\u8BB0\u5F55\u4E4B\u95F4\u7684\u7A7A\u5185\u5BB9\u7684\u533A\u95F4</p></li><li><p>\u4E34\u952E\uFF1A\u95F4\u9699+\u4E0B\u4E00\u4E2A\u8BB0\u5F55\uFF0C<strong>\u5DE6\u5F00\u53F3\u95ED</strong></p></li><li><p>N\u4E2A\u8BB0\u5F55\uFF0CN+1\u95F4\u9699</p></li></ul><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200928225821932.png" alt="image-20200928225821932"></p><h3 id="\u8BB0\u5F55\u9501" tabindex="-1"><a class="header-anchor" href="#\u8BB0\u5F55\u9501" aria-hidden="true">#</a> \u8BB0\u5F55\u9501</h3><p>\u4F7F\u7528\u6761\u4EF6\uFF1A\u552F\u4E00\u6027\u7D22\u5F15(\u552F\u4E00\u7D22\u5F15\u6216\u805A\u96C6\u7D22\u5F15)\u7B49\u503C\u67E5\u8BE2(\u4F7F\u7528<code>=</code>\uFF0C\u4E0D\u662F\u8303\u56F4\u67E5\u8BE2)\uFF0C\u7CBE\u51C6\u5339\u914D\u5230\u67D0\u4E00\u6761\u8BB0\u5F55</p><p>\u9501\u5B9A\u5185\u5BB9\uFF1A\u7D22\u5F15</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200928231714612.png" alt="image-20200928231714612"></p><h3 id="\u95F4\u9699\u9501" tabindex="-1"><a class="header-anchor" href="#\u95F4\u9699\u9501" aria-hidden="true">#</a> \u95F4\u9699\u9501</h3><p><strong>\u53EA\u6709\u5728\u53EF\u91CD\u590D\u8BFB\u7684\u4E8B\u52A1\u9694\u79BB\u7EA7\u522B\u4E0B\u5B58\u5728</strong></p><p>\u4F7F\u7528\u6761\u4EF6\uFF1A\u67E5\u8BE2\u65F6\u6CA1\u6709\u547D\u4E2D\u4EFB\u4F55\u4E00\u6761\u8BB0\u5F55\uFF0C\u65E0\u8BBA\u4F7F\u7528\u8303\u56F4\u67E5\u8BE2\u8FD8\u662F\u7B49\u503C\u67E5\u8BE2</p><p>\u9501\u5B9A\u5185\u5BB9\uFF1A\u547D\u4E2D\u7684\u90A3\u4E00\u4E2A\u95F4\u9699\u3002\u9501\u5B9A\u540E\uFF0C\u5BF9\u8BE5\u95F4\u9699\u7684\u63D2\u5165\u548C\u67E5\u8BE2\u90FD\u4E0D\u6210\u529F</p><p><strong>\u53EF\u4EE5\u9632\u6B62\u5E7B\u8BFB</strong></p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200928232138971.png" alt="image-20200928232138971"></p><h3 id="\u4E34\u952E\u9501" tabindex="-1"><a class="header-anchor" href="#\u4E34\u952E\u9501" aria-hidden="true">#</a> \u4E34\u952E\u9501</h3><p>\u4F7F\u7528\u6761\u4EF6\uFF1A\u8303\u56F4\u67E5\u8BE2\u65F6\uFF0C\u8303\u56F4\u540C\u65F6\u5305\u542B\u4E86\u8BB0\u5F55\u548C\u533A\u95F4\uFF1B\u5982\u679C\u6CA1\u6709\u4EFB\u4F55\u8BB0\u5F55\uFF0C\u90A3\u4E48\u9000\u5316\u6210\u95F4\u9699\u9501\uFF1B\u5982\u679C\u7CBE\u51C6\u5339\u914D\u5230\u4E00\u6761\u8BB0\u5F55\uFF0C\u90A3\u4E48\u9000\u5316\u6210\u8BB0\u5F55\u9501</p><p>\u9501\u5B9A\u5185\u5BB9\uFF1A\u8BB0\u5F55+\u533A\u95F4</p><p><strong>\u662FInnoDB\u9ED8\u8BA4\u7684\u884C\u9501\u7B97\u6CD5</strong></p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200928234952461.png" alt="image-20200928234952461"></p><h2 id="\u4E50\u89C2\u9501\u548C\u60B2\u89C2\u9501\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#\u4E50\u89C2\u9501\u548C\u60B2\u89C2\u9501\u7684\u533A\u522B" aria-hidden="true">#</a> \u4E50\u89C2\u9501\u548C\u60B2\u89C2\u9501\u7684\u533A\u522B</h2><blockquote><p>\u4E24\u8005\u90FD\u4E0D\u662F\u9501\u7684\u5B9E\u73B0\uFF0C\u800C\u53EA\u662F\u9501\u7684\u7B56\u7565</p><p>\u60B2\u89C2\u9501\u4F1A\u5728\u4E8B\u52A1\u5F00\u59CB\u65F6\u5BF9\u6570\u636E\u8FDB\u884C\u4E0A\u9501\u64CD\u4F5C\uFF0C\u4ECE\u800C\u4FDD\u8BC1\u5176\u4ED6\u7EBF\u7A0B\u65E0\u6CD5\u5BF9\u8BE5\u884C\u6570\u636E\u8FDB\u884C\u4FEE\u6539\uFF0C\u7B49\u5230\u4E8B\u52A1\u7ED3\u675F\u65F6\u624D\u4F1A\u91CA\u653E\u9501</p><p>\u4E50\u89C2\u9501\u6700\u5927\u7684\u7279\u70B9\u5C31\u662F\u4E0D\u52A0\u9501\uFF0C\u53EA\u4F1A\u5728\u63D0\u4EA4\u4E8B\u52A1\u65F6\u68C0\u67E5\u5BF9\u5E94\u7684\u6570\u636E(\u72B6\u6001\u3001\u7248\u672C\u53F7\u3001\u65F6\u95F4\u6233\u7B49)\u6765\u4FDD\u8BC1\u8981\u64CD\u4F5C\u7684\u6570\u636E\u662F\u5426\u88AB\u4FEE\u6539\u8FC7\uFF0C\u5982\u679C\u4FEE\u6539\u8FC7\u5219\u672C\u6B21\u4FEE\u6539\u5931\u6548\u5E76\u56DE\u6EDA</p></blockquote><h2 id="\u9501\u517C\u5BB9\u60C5\u51B5" tabindex="-1"><a class="header-anchor" href="#\u9501\u517C\u5BB9\u60C5\u51B5" aria-hidden="true">#</a> \u9501\u517C\u5BB9\u60C5\u51B5</h2><h3 id="\u5171\u4EAB\u9501\u3001\u6392\u4ED6\u9501\u3001\u610F\u5411\u9501" tabindex="-1"><a class="header-anchor" href="#\u5171\u4EAB\u9501\u3001\u6392\u4ED6\u9501\u3001\u610F\u5411\u9501" aria-hidden="true">#</a> \u5171\u4EAB\u9501\u3001\u6392\u4ED6\u9501\u3001\u610F\u5411\u9501</h3><table><thead><tr><th style="text-align:center;">\u5DF2\u6301\u6709\\\u8BF7\u6C42\u7684</th><th style="text-align:center;">\u5171\u4EAB\u9501</th><th style="text-align:center;">\u6392\u4ED6\u9501</th><th style="text-align:center;">\u610F\u5411\u5171\u4EAB\u9501</th><th style="text-align:center;">\u610F\u5411\u6392\u4ED6\u9501</th></tr></thead><tbody><tr><td style="text-align:center;">\u5171\u4EAB\u9501</td><td style="text-align:center;">\u517C\u5BB9</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u517C\u5BB9</td><td style="text-align:center;">\u51B2\u7A81</td></tr><tr><td style="text-align:center;">\u6392\u4ED6\u9501</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u51B2\u7A81</td></tr><tr><td style="text-align:center;">\u610F\u5411\u5171\u4EAB\u9501</td><td style="text-align:center;">\u517C\u5BB9</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u517C\u5BB9</td><td style="text-align:center;">\u517C\u5BB9</td></tr><tr><td style="text-align:center;">\u610F\u5411\u6392\u4ED6\u9501</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u51B2\u7A81</td><td style="text-align:center;">\u517C\u5BB9</td><td style="text-align:center;">\u517C\u5BB9</td></tr></tbody></table><ol><li>\u6392\u4ED6\u9501\u8DDF\u5176\u4ED6\u9501\u90FD\u662F\u51B2\u7A81\u7684</li><li>\u610F\u5411\u9501\u4E92\u76F8\u517C\u5BB9</li></ol><h3 id="\u95F4\u9699\u9501\u3001\u8BB0\u5F55\u9501\u3001\u4E34\u952E\u9501" tabindex="-1"><a class="header-anchor" href="#\u95F4\u9699\u9501\u3001\u8BB0\u5F55\u9501\u3001\u4E34\u952E\u9501" aria-hidden="true">#</a> \u95F4\u9699\u9501\u3001\u8BB0\u5F55\u9501\u3001\u4E34\u952E\u9501</h3><h2 id="\u67E5\u770B\u52A0\u9501\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u52A0\u9501\u65B9\u5F0F" aria-hidden="true">#</a> \u67E5\u770B\u52A0\u9501\u65B9\u5F0F</h2><p><code>select * from schema.INNODB_TRX</code></p><h3 id="\u53C2\u6570\u542B\u4E49" tabindex="-1"><a class="header-anchor" href="#\u53C2\u6570\u542B\u4E49" aria-hidden="true">#</a> \u53C2\u6570\u542B\u4E49</h3><table><thead><tr><th style="text-align:center;">\u53C2\u6570</th><th style="text-align:center;">\u53C2\u6570\u610F\u4E49</th></tr></thead><tbody><tr><td style="text-align:center;">trx_state</td><td style="text-align:center;">\u4E8B\u52A1\u6267\u884C\u72B6\u6001\uFF1ARUNNING\u3001LOCK WAIT\u3001ROLLING BACK\u3001COMMITING</td></tr><tr><td style="text-align:center;">trx_started</td><td style="text-align:center;">\u4E8B\u52A1\u5F00\u59CB\u7684\u65F6\u95F4</td></tr><tr><td style="text-align:center;">trx_requested_lock_id</td><td style="text-align:center;">\u7B49\u5F85\u4E8B\u52A1\u7684\u9501Id</td></tr><tr><td style="text-align:center;">trx_mysql_thread_id</td><td style="text-align:center;">\u67E5\u8BE2\u65F6\uFF0C\u53EF\u80FD\u4F7F\u7528\u7684\u7D22\u5F15</td></tr></tbody></table><p>\u5F53\u524D\u4E8B\u52A1\u5982\u679C\u7B49\u5F85\u65F6\u95F4\u8FC7\u957F\u6216\u51FA\u73B0\u6B7B\u9501\u7684\u60C5\u51B5\uFF0C\u53EF\u4EE5\u901A\u8FC7 \u300C<strong>kill \u7EBF\u7A0BID(trx_requested_lock_id)</strong>\u300D \u7684\u65B9\u5F0F\u91CA\u653E\u5F53\u524D\u7684\u9501\u3002</p><h1 id="\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u65E5\u5FD7" aria-hidden="true">#</a> \u65E5\u5FD7</h1><p>MySQL\u65E5\u5FD7\u4E3B\u8981\u5305\u62EC\u9519\u8BEF\u65E5\u5FD7\u3001\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\u3001\u6162\u67E5\u8BE2\u65E5\u5FD7\u3001<strong>\u4E8B\u52A1\u65E5\u5FD7</strong>\u3001<strong>\u4E8C\u8FDB\u5236</strong>\u65E5\u5FD7\u51E0\u5927\u7C7B</p><p>\u65E5\u5FD7\u5237\u65B0\u64CD\u4F5C</p><p>mysql</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>FLUSH LOGS;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>shell</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysqladmin flush-logs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u9519\u8BEF\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u9519\u8BEF\u65E5\u5FD7" aria-hidden="true">#</a> \u9519\u8BEF\u65E5\u5FD7</h2><p>\u8BB0\u5F55MySQL\u670D\u52A1\u542F\u52A8\u548C\u505C\u6B62\u6B63\u786E\u548C\u9519\u8BEF\u7684\u4FE1\u606F\uFF0C\u8FD8\u8BB0\u5F55\u4E86<code>mysqld</code>\u5B9E\u4F8B\u8FD0\u884C\u8FC7\u7A0B\u4E2D\u53D1\u751F\u7684\u9519\u8BEF\u4E8B\u4EF6\u4FE1\u606F</p><p>\u67E5\u770B\u9519\u8BEF\u65E5\u5FD7\u7684\u4F4D\u7F6E</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show variables like &#39;log_error&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7" aria-hidden="true">#</a> \u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7</h2><p>\u67E5\u8BE2\u65E5\u5FD7\u53EF\u4EE5\u5206\u4E3A\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\u548C\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u901A\u8FC7\u67E5\u8BE2\u65F6\u95F4<code>long_query_time</code>\u7684\u503C\u6765\u5224\u5B9A</p><p>\u5EFA\u8BAE\u5173\u95ED\u8FD9\u79CD\u65E5\u5FD7\uFF0C<strong>\u9ED8\u8BA4\u662F\u5173\u95ED\u7684</strong>\uFF0C\u56E0\u4E3A\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\u8BB0\u5F55\u7684\u610F\u4E49\u4E0D\u5927\uFF0C\u4E14\u6570\u636E\u91CF\u5DE8\u5927\uFF0C\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\u8BB0\u5F55\u7684\u4E0D\u4EC5\u4EC5\u662F<code>select</code>\u8BED\u53E5\uFF0C\u51E0\u4E4E\u6240\u6709\u7684\u8BED\u53E5\u90FD\u4F1A\u8BB0\u5F55</p><p>\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\u76F8\u5173\u53D8\u91CF</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>general_log=off # \u662F\u5426\u542F\u7528\u4E00\u822C\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u4E3A\u5168\u5C40\u53D8\u91CF\uFF0C\u5FC5\u987B\u5728global\u4E0A\u4FEE\u6539\u3002
general_log_file=/mydata/data/hostname.log  # \u9ED8\u8BA4\u662F\u5E93\u6587\u4EF6\u8DEF\u5F84\u4E0B\u4E3B\u673A\u540D\u52A0\u4E0A.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6162\u67E5\u8BE2\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u6162\u67E5\u8BE2\u65E5\u5FD7" aria-hidden="true">#</a> \u6162\u67E5\u8BE2\u65E5\u5FD7</h2><p>\u67E5\u8BE2\u65F6\u95F4\u8D85\u51FA\u53D8\u91CF<code>long_query_time</code>\u6240\u8BBE\u5B9A\u503C\u7684\u67E5\u8BE2\u88AB\u8BA4\u4E3A\u662F\u6162\u67E5\u8BE2\uFF0C\u4F46\u662F\u67E5\u8BE2\u83B7\u53D6\u9501(\u5305\u62EC\u9501\u7B49\u5F85)\u7684\u65F6\u95F4\u4E0D\u8BA1\u5165\u67E5\u8BE2\u65F6\u95F4\u5185</p><p>\u67E5\u770B\u6162\u67E5\u8BE2\u65E5\u5FD7\u7684\u5F00\u542F\u60C5\u51B5</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>show variables like &#39;slow_query%&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F00\u542F\u6162\u67E5\u8BE2\u65E5\u5FD7</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u4F1A\u8BDD
set slow_query_log=&#39;ON&#39;;
-- \u5168\u5C40
set global slow_query_log=&#39;ON&#39;;
-- \u6C38\u4E45
-- \u4FEE\u6539my.cnf\u6587\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6162\u67E5\u8BE2\u65E5\u5FD7\u76F8\u5173\u53D8\u91CF:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>long_query_time=10 # \u6307\u5B9A\u6162\u67E5\u8BE2\u8D85\u65F6\u65F6\u957F(\u9ED8\u8BA410\u79D2)\uFF0C\u8D85\u51FA\u6B64\u65F6\u957F\u7684\u5C5E\u4E8E\u6162\u67E5\u8BE2
slow_query_log={on|off}  # \u662F\u5426\u542F\u7528\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u9ED8\u8BA4\u4E3Aoff
slow_query_log_file=/mydata/data/hostname-slow.log  # \u6162\u67E5\u8BE2\u65E5\u5FD7\u4F4D\u7F6E\uFF0C\u9ED8\u8BA4\u6587\u4EF6\u540D\u540E\u9762\u4F1A\u52A0\u4E0A-slow.log
log_queries_not_using_indexes={on|off} # \u67E5\u8BE2\u6CA1\u6709\u4F7F\u7528\u7D22\u5F15\u7684\u65F6\u5019\u662F\u5426\u4E5F\u8BB0\u5165\u6162\u67E5\u8BE2\u65E5\u5FD7\uFF0C\u9ED8\u8BA4\u4E3Aoff
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6162\u67E5\u8BE2\u65E5\u5FD7\u4E13\u7528\u5206\u6790\u5DE5\u5177\uFF1A<code>mysqldumpslow</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> mysqldumpslow <span class="token punctuation">[</span>option<span class="token punctuation">]</span> slow_query_log_file
  -d           <span class="token variable"><span class="token variable">\`</span>debug<span class="token variable">\`</span></span>\uFF1A\u5F52\u7C7B\u540E\u7684\u7ED3\u679C\u53EA\u662F\u7CBE\u786E\u52300.01\u79D2\u7684\uFF0Cdebug\u9009\u9879\u53EF\u4EE5\u663E\u793A\u5176\u7CBE\u786E\u7684\u79D2\u6570
  -v           <span class="token variable"><span class="token variable">\`</span>verbose<span class="token variable">\`</span></span>\uFF1A\u663E\u793A\u8BE6\u7EC6\u4FE1\u606F
  -t NUM       <span class="token variable"><span class="token variable">\`</span>just show the <span class="token function">top</span> n queries<span class="token variable">\`</span></span>\uFF1A\u4EC5\u663E\u793A\u524Dn\u6761\u67E5\u8BE2
  -a           <span class="token variable"><span class="token variable">\`</span>don<span class="token string">&#39;t abstract all numbers to N and strings to &#39;</span>S&#39;<span class="token variable">\`</span></span>\uFF1A\u5F52\u7C7B\u65F6\u4E0D\u8981\u4F7F\u7528N\u66FF\u6362\u6570\u5B57\uFF0CS\u66FF\u6362\u5B57\u7B26\u4E32\u53D8\u91CF
  -g PATTERN   <span class="token variable"><span class="token variable">\`</span>grep: only consider stmts that include this string<span class="token variable">\`</span></span>\uFF1A\u901A\u8FC7grep\u6765\u7B5B\u9009select\u8BED\u53E5\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E8C\u8FDB\u5236\u65E5\u5FD7-binlog" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u8FDB\u5236\u65E5\u5FD7-binlog" aria-hidden="true">#</a> \u4E8C\u8FDB\u5236\u65E5\u5FD7(binlog)</h2><ul><li><code>binlog</code>\uFF08\u5F52\u6863\u65E5\u5FD7\uFF09\u5305\u542B\u4E86<strong>\u5F15\u8D77\u6216\u53EF\u80FD\u5F15\u8D77\u6570\u636E\u5E93\u6539\u53D8</strong>(\u5982<code>update</code>\u3001<code>delete</code>\u8BED\u53E5\u4F46\u6CA1\u6709\u5339\u914D\u884C)\u7684\u4E8B\u4EF6\u4FE1\u606F\uFF0C\u4F46\u7EDD\u4E0D\u4F1A\u5305\u62EC<code>select</code>\u548C<code>show</code>\u8FD9\u6837\u7684\u67E5\u8BE2\u8BED\u53E5\u3002\u8BED\u53E5\u4EE5**&quot;\u4E8B\u4EF6&quot;\u7684\u5F62\u5F0F\u4FDD\u5B58**\uFF0C\u6240\u4EE5\u5305\u542B\u4E86<strong>\u65F6\u95F4\u3001\u4E8B\u4EF6\u5F00\u59CB\u548C\u7ED3\u675F\u4F4D\u7F6E\u7B49\u4FE1\u606F</strong>\u3002</li><li>\u5BF9\u4E8E\u4E8B\u52A1\u8868\u7684\u64CD\u4F5C\uFF0C\u4E8C\u8FDB\u5236\u65E5\u5FD7<strong>\u53EA\u5728\u4E8B\u52A1\u63D0\u4EA4\u7684\u65F6\u5019\u4E00\u6B21\u6027\u5199\u5165</strong>\uFF0C\u63D0\u4EA4\u524D\u7684\u6BCF\u4E2A\u4E8C\u8FDB\u5236\u65E5\u5FD7\u8BB0\u5F55\u90FD\u5148cache\uFF0C\u63D0\u4EA4\u65F6\u5199\u5165\u3002</li><li>\u5BF9\u4E8E\u4E8B\u52A1\u8868\u6765\u8BF4\uFF0C\u4E00\u4E2A\u4E8B\u52A1\u4E2D\u53EF\u80FD\u5305\u542B\u591A\u6761\u4E8C\u8FDB\u5236\u65E5\u5FD7\u4E8B\u4EF6\uFF0C\u5B83\u4EEC\u4F1A\u5728\u63D0\u4EA4\u65F6\u4E00\u6B21\u6027\u5199\u5165\uFF1B\u800C\u5BF9\u4E8E\u975E\u4E8B\u52A1\u8868\u7684\u64CD\u4F5C\uFF0C\u6BCF\u6B21\u6267\u884C\u5B8C\u8BED\u53E5\u5C31\u76F4\u63A5\u5199\u5165\u3002</li><li>MySQL\u6570\u636E\u5E93\u7684<strong>\u6570\u636E\u5907\u4EFD</strong>\u3001<strong>\u4E3B\u5907</strong>\u3001<strong>\u4E3B\u4E3B</strong>\u3001<strong>\u4E3B\u4ECE</strong>\u90FD\u9700\u8981<code>binlog</code>\u6765\u540C\u6B65\u6570\u636E\uFF0C\u4FDD\u8BC1\u6570\u636E\u4E00\u81F4\u6027</li></ul><h3 id="\u67E5\u770B\u4E8C\u8FDB\u5236\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u4E8C\u8FDB\u5236\u65E5\u5FD7" aria-hidden="true">#</a> \u67E5\u770B\u4E8C\u8FDB\u5236\u65E5\u5FD7</h3><h4 id="\u5728\u547D\u4EE4\u884C\u4F7F\u7528mysqlbinlog\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#\u5728\u547D\u4EE4\u884C\u4F7F\u7528mysqlbinlog\u5DE5\u5177" aria-hidden="true">#</a> \u5728\u547D\u4EE4\u884C\u4F7F\u7528mysqlbinlog\u5DE5\u5177</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> mysqlbinlog <span class="token punctuation">[</span>option<span class="token punctuation">]</span> log-file<span class="token punctuation">..</span>.
  -d name, --database<span class="token operator">=</span>name	\u53EA\u67E5\u770B\u6307\u5B9A\u6570\u636E\u5E93\u7684\u65E5\u5FD7\u64CD\u4F5C
  -o n, --offset<span class="token operator">=</span>n				\u5FFD\u7565\u6389\u65E5\u5FD7\u4E2D\u7684\u524Dn\u4E2A\u64CD\u4F5C\u547D\u4EE4<span class="token punctuation">(</span>\u4E8B\u4EF6<span class="token punctuation">)</span>
  -r name, --result-file<span class="token operator">=</span>name		\u5C06\u8F93\u51FA\u7684\u65E5\u5FD7\u4FE1\u606F\u8F93\u51FA\u5230\u6307\u5B9A\u7684\u6587\u4EF6\u4E2D\uFF0C\u4F7F\u7528\u91CD\u5B9A\u5411\u4E5F\u4E00\u6837\u53EF\u4EE5\u3002
  -s, --short-form					\u663E\u793A\u7B80\u5355\u683C\u5F0F\u7684\u65E5\u5FD7\uFF0C\u4F1A\u7701\u7565\u6389\u4E00\u4E9B\u989D\u5916\u7684\u4FE1\u606F\u5982\u4F4D\u7F6E\u4FE1\u606F\u548C\u65F6\u95F4\u4FE1\u606F\u4EE5\u53CA\u57FA\u4E8E\u884C\u7684\u65E5\u5FD7\u3002
  --start-datetime<span class="token operator">=</span>m, --stop-datetime<span class="token operator">=</span>n			\u6307\u5B9A\u8F93\u51FA\u5F00\u59CB\u65F6\u95F4\u548C\u7ED3\u675F\u65F6\u95F4\u5185\u7684\u6240\u6709\u65E5\u5FD7\u4FE1\u606F
  --start-position<span class="token operator">=</span>m, --stop-position<span class="token operator">=</span>n			\u6307\u5B9A\u8F93\u51FA\u5F00\u59CB\u4F4D\u7F6E\u548C\u7ED3\u675F\u4F4D\u7F6E\u5185\u7684\u6240\u6709\u65E5\u5FD7\u4FE1\u606F
  --set-charset<span class="token operator">=</span>char_name	\u5728\u8F93\u51FA\u65E5\u5FD7\u4FE1\u606F\u5230\u6587\u4EF6\u4E2D\u65F6\uFF0C\u5728\u6587\u4EF6\u7B2C\u4E00\u884C\u52A0\u4E0Aset names char_name
  -v, -vv		\u663E\u793A\u66F4\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u57FA\u4E8Erow\u7684\u65E5\u5FD7\u9ED8\u8BA4\u4E0D\u4F1A\u663E\u793A\u51FA\u6765\uFF0C\u6B64\u65F6\u4F7F\u7528-v\u6216-vv\u53EF\u4EE5\u67E5\u770B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6210\u529F\u6267\u884CDML\u547D\u4EE4\u5728binlog\u4E2D\u4F1A\u5305\u542B\u4E00\u5BF9<code>begin</code>\u548C<code>commit</code></li></ul><h4 id="\u5728mysql\u5BA2\u6237\u7AEF\u4E2D\u4F7F\u7528show\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u5728mysql\u5BA2\u6237\u7AEF\u4E2D\u4F7F\u7528show\u547D\u4EE4" aria-hidden="true">#</a> \u5728mysql\u5BA2\u6237\u7AEF\u4E2D\u4F7F\u7528show\u547D\u4EE4</h4><ul><li><code>show binary logs</code> \uFF0C\u67E5\u770B\u5F53\u524D\u4F7F\u7528\u4E86\u54EA\u4E9B\u4E8C\u8FDB\u5236\u65E5\u5FD7\u6587\u4EF6</li><li><code>show binlog events in file</code>\uFF0C\u67E5\u770B\u65E5\u5FD7\u4E2D\u8FDB\u884C\u4E86\u54EA\u4E9B\u64CD\u4F5C</li><li><code>show master status</code>\uFF0C\u663E\u793A\u4E3B\u670D\u52A1\u5668\u4E2D\u7684\u4E8C\u8FDB\u5236\u65E5\u5FD7\u4FE1\u606F\u3002\u5982\u679C\u662F\u4E3B\u4ECE\u7ED3\u6784\uFF0C\u5B83\u53EA\u4F1A\u663E\u793A\u4E3B\u4ECE\u7ED3\u6784\u4E2D\u4E3B\u670D\u52A1\u5668\u7684\u4E8C\u8FDB\u5236\u65E5\u5FD7\u4FE1\u606F\u3002\u53EF\u4EE5\u67E5\u770B\u5230\u5F53\u524D\u6B63\u5728\u4F7F\u7528\u7684\u65E5\u5FD7\u53CA\u4E0B\u4E00\u4E8B\u4EF6\u8BB0\u5F55\u7684\u5F00\u59CB\u4F4D\u7F6E\uFF0C\u8FD8\u80FD\u67E5\u770B\u5230\u54EA\u4E9B\u6570\u636E\u5E93\u9700\u8981\u8BB0\u5F55\u4E8C\u8FDB\u5236\u65E5\u5FD7\uFF0C\u54EA\u4E9B\u6570\u636E\u5E93\u4E0D\u8BB0\u5F55\u4E8C\u8FDB\u5236\u65E5\u5FD7</li></ul><h3 id="\u5220\u9664\u4E8C\u8FDB\u5236\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u4E8C\u8FDB\u5236\u65E5\u5FD7" aria-hidden="true">#</a> \u5220\u9664\u4E8C\u8FDB\u5236\u65E5\u5FD7</h3><ul><li><code>reset master</code>\uFF0C\u5220\u9664\u6240\u6709\u65E5\u5FD7\uFF0C\u5E76\u8BA9\u65E5\u5FD7\u6587\u4EF6\u91CD\u65B0\u4ECE000001\u5F00\u59CB</li><li><code>purge binary logs to &#39;filename.000006&#39;</code>\uFF0C\u6E05\u7A7A000006\u4E4B\u524D\u7684\u6240\u6709\u65E5\u5FD7\u6587\u4EF6</li><li><code>purge binary logs before &#39;2020-01-01 10:00:00&#39;</code>\uFF0C\u5220\u9664\u6307\u5B9A\u65E5\u671F\u4E4B\u524D\u7684\u6240\u6709\u65E5\u5FD7\u3002\u4F46\u662F\u82E5\u6307\u5B9A\u7684\u65F6\u95F4\u5904\u5728\u6B63\u5728\u4F7F\u7528\u4E2D\u7684\u65E5\u5FD7\u6587\u4EF6\u4E2D\uFF0C\u5C06\u65E0\u6CD5\u8FDB\u884Cpurge</li></ul><h3 id="binlog\u65E5\u5FD7\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#binlog\u65E5\u5FD7\u683C\u5F0F" aria-hidden="true">#</a> binlog\u65E5\u5FD7\u683C\u5F0F</h3><ul><li><p><code>statement</code>\uFF0C\u8BB0\u5F55\u4E3ASQL\u8BED\u53E5\u5F62\u5F0F\uFF0C\u5982\uFF1A<code>update T set update_time=now() where id=1</code>\uFF0C\u8BB0\u5F55\u7684\u5185\u5BB9\u5982\u4E0B\uFF1A</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210907111312.png" alt=""></p><p>\u540C\u6B65\u6570\u636E\u65F6\uFF0C\u5C31\u6267\u884C\u8BB0\u5F55\u91CC\u9762\u7684SQL\u8BED\u53E5</p><p>\u7F3A\u9677\uFF1A\u7531\u4E8E<code>uuid()</code>\u3001<code>now()</code>\u8FD9\u4E9B\u65B9\u6CD5\u6BCF\u6B21\u6267\u884C\u7684\u503C\u90FD\u662F\u4E0D\u4E00\u6837\u7684\uFF0C\u6240\u4EE5<strong>\u65E0\u6CD5\u8BB0\u5F55\u52A8\u6001\u503C</strong></p></li><li><p><code>row</code>\uFF0C\u8BB0\u5F55\u4E3ASQL\u8BED\u53E5\u53CA\u5176\u64CD\u4F5C\u7684\u5177\u4F53\u6570\u636E\uFF0C\u4FDD\u8BC1\u4E86\u52A8\u6001\u503C\u786E\u5B9A\u6027\uFF0C\u8BB0\u5F55\u7684\u5185\u5BB9\u5982\u4E0B\uFF1A</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210907111928.png" alt=""></p><p><code>row</code>\u683C\u5F0F\u8BB0\u5F55\u7684\u5185\u5BB9\u770B\u4E0D\u5230\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8981\u901A\u8FC7<code>mysqlbinlog</code>\u5DE5\u5177\u89E3\u6790\u51FA\u6765\u3002</p><p>\u7F3A\u9677\uFF1A\u5BFC\u81F4<strong>\u65E5\u5FD7\u6587\u4EF6\u53D8\u5F97\u975E\u5E38\u5927</strong>\uFF0C\u6062\u590D\u4E0E\u540C\u6B65\u65F6\u4F1A\u66F4\u6D88\u8017<code>IO</code>\u8D44\u6E90\uFF0C\u5F71\u54CD\u6267\u884C\u901F\u5EA6</p></li><li><p><code>mixed</code>\uFF0CMySQL\u81EA\u5DF1\u786E\u5B9A\u4F7F\u7528<code>statement</code>\u8FD8\u662F<code>row</code>\u5F62\u5F0F\uFF0C\u9ED8\u8BA4\u4F7F\u7528<code>statement</code>\uFF0C\u4EE5\u4E0B\u51E0\u79CD\u60C5\u51B5\u4F1A\u4F7F\u7528<code>row</code>\u5F62\u5F0F</p><ul><li>\u8868\u7684\u5B58\u50A8\u5F15\u64CE\u4E3ANDB\uFF0C\u8FD9\u65F6\u5BF9\u8868\u7684<code>DML</code>\u64CD\u4F5C\u90FD\u4F1A\u4EE5<code>row</code>\u7684\u683C\u5F0F\u8BB0\u5F55</li><li>\u4F7F\u7528<code>now()</code>\u3001<code>uuid()</code>\u3001<code>user()</code>\u7B49\u53EF\u80FD\u5F15\u8D77\u6570\u636E\u4E0D\u4E00\u81F4\u7684\u51FD\u6570</li><li>\u4F7F\u7528<code>insert delay</code>\u8BED\u53E5</li><li>\u4F7F\u7528\u4E34\u65F6\u8868</li></ul></li></ul><h3 id="binlog-\u5237\u76D8\u65F6\u673A" tabindex="-1"><a class="header-anchor" href="#binlog-\u5237\u76D8\u65F6\u673A" aria-hidden="true">#</a> binlog \u5237\u76D8\u65F6\u673A</h3><p>\u5728\u4E8B\u52A1\u6267\u884C\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u5148\u628A\u5185\u5BB9\u5199\u5165\u5230<code>binlog cache</code>\u4E2D\uFF0C\u5728\u65E5\u5FD7\u63D0\u4EA4\u65F6\uFF0C\u4F1A\u628A<code>binlog cache</code>\u4E2D\u7684\u5185\u5BB9\u5199\u5165<code>page cache</code>\u4E2D\uFF0C\u7136\u540E\u7B49\u5F85\u5237\u76D8\u5199\u5165\u5230<code>binlog</code>\u6587\u4EF6\u4E2D</p><p>\u56E0\u4E3A\u4E00\u4E2A\u4E8B\u52A1\u7684<code>binlog</code>\u4E0D\u80FD\u88AB\u62C6\u5F00\uFF0C\u65E0\u8BBA\u8FD9\u4E2A\u4E8B\u52A1\u591A\u5927\uFF0C\u4E5F\u8981<strong>\u786E\u4FDD\u4E00\u6B21\u6027\u5199\u5165</strong>\uFF0C\u6240\u4EE5\u7CFB\u7EDF\u4F1A\u7ED9\u6BCF\u4E2A\u7EBF\u7A0B\u5206\u914D\u4E00\u4E2A\u5757\u5185\u5B58\u4F5C\u4E3A<code>binlog cache</code>\uFF0C\u53EF\u4EE5\u901A\u8FC7<code>binlog_cache_size</code>\u53C2\u6570\u63A7\u5236\u5355\u4E2A\u7EBF\u7A0B <code>binlog cache</code> \u5927\u5C0F\uFF0C\u5982\u679C\u5B58\u50A8\u5185\u5BB9\u8D85\u8FC7\u4E86\u8FD9\u4E2A\u53C2\u6570\uFF0C\u5C31\u8981\u6682\u5B58\u5230\u78C1\u76D8<code>Swap</code></p><p><code>binlog</code>\u5237\u76D8\u7B56\u7565\u63D0\u4F9B\u4E86<code>sync_binlog</code>\u53C2\u6570</p><ul><li><p>0\uFF1A\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u65F6\u90FD\u53EA\u628A <code>binlog buffer</code> \u5185\u5BB9\u5199\u5165 <code>page cache</code>\uFF0C\u7B49\u5F85\u540E\u53F0\u7EBF\u7A0B\u6BCF\u79D2\u7684\u5237\u76D8\uFF0C\u628A<code>page cache</code>\u7684\u5185\u5BB9\u5199\u5165<code>binlog</code>\u6587\u4EF6**\uFF08\u9ED8\u8BA4\uFF09**</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210908143542.png" alt=""></p><p>\u7531\u4E8E<code>binlog cache</code>\u5199\u5165\u5230<code>page cache</code>\u90FD\u662F\u5185\u5B58\u4E2D\u7684\u64CD\u4F5C\uFF0C\u4E0D\u6D89\u53CA\u5230\u78C1\u76D8\u7684\u64CD\u4F5C\uFF0C\u6240\u4EE5\u6027\u80FD\u5F88\u9AD8</p><p>\u7F3A\u70B9\uFF1A\u5F53\u673A\u5668\u5B95\u673A\uFF0C\u800C\u4E14<code>page cache</code>\u8FD8\u6CA1\u8FDB\u884C\u5237\u76D8\u64CD\u4F5C\u65F6\uFF0C<code>page cache</code>\u4E2D\u672C\u8BE5\u8BB0\u5F55\u5230<code>binlog</code>\u65E5\u5FD7\u4E2D\u7684\u5185\u5BB9\u4F1A\u4E22\u5931</p></li><li><p>1\uFF1A\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u65F6\u90FD\u4F1A\u628A<code>page cache</code>\u7684\u5185\u5BB9\u8FDB\u884C\u5237\u76D8</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210908141410.png" alt=""></p><p>\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u90FD\u6267\u884C\u4E00\u6B21\u5B8C\u6574\u7684\u8BB0\u5F55\u6D41\u7A0B\uFF0C\u4ECE<code>binlog cache</code>\u5230<code>page cache</code>\u518D\u5230\u78C1\u76D8\uFF0C\u6570\u636E\u5B89\u5168\u4E0D\u6613\u4E22\u5931</p><p>\u7F3A\u70B9\uFF1A\u6BCF\u6B21\u63D0\u4EA4\u4E8B\u52A1\u90FD\u8FDB\u884C\u5199\u78C1\u76D8\u7684\u64CD\u4F5C\uFF0C\u6027\u80FD\u4E0D\u9AD8</p></li><li><p>N(N&gt;1)\uFF0C\u6298\u4E2D\u65B9\u6848\uFF0C\u6BCF\u6B21\u63D0\u4EA4\u4E8B\u52A1\u90FD\u628A<code>binlog cache</code>\u7684\u5185\u5BB9\u5199\u5165\u5230<code>page cache</code>\uFF0C\u4F46\u662F\u7D2F\u79EFN\u4E2A\u4E8B\u52A1\u540E\uFF0C\u624D\u628A<code>page cache</code>\u4E2D\u7684\u5185\u5BB9\u8FDB\u884C\u5237\u76D8</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210908144438.png" alt=""></p><p>\u5728\u51FA\u73B0<code>IO</code>\u74F6\u9888\u7684\u573A\u666F\u91CC\uFF0C\u5C06<code>sync_binlog</code>\u8BBE\u7F6E\u6210\u4E00\u4E2A\u6BD4\u8F83\u5927\u7684\u503C\uFF0C\u53EF\u4EE5\u63D0\u5347\u6027\u80FD</p><p>\u7F3A\u70B9\uFF1A\u5982\u679C\u673A\u5668\u5B95\u673A\uFF0C\u90A3\u4E48\u4F1A\u4E22\u5931\u6700\u8FD1\u7684N\u4E2A\u4E8B\u52A1\u7684<code>binlog</code>\u65E5\u5FD7</p></li></ul><h3 id="\u4E8C\u8FDB\u5236\u65E5\u5FD7\u76F8\u5173\u53D8\u91CF" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u8FDB\u5236\u65E5\u5FD7\u76F8\u5173\u53D8\u91CF" aria-hidden="true">#</a> \u4E8C\u8FDB\u5236\u65E5\u5FD7\u76F8\u5173\u53D8\u91CF</h3><ul><li>log_bin = {on | off | base_name} \u6307\u5B9A\u662F\u5426\u542F\u7528\u8BB0\u5F55\u4E8C\u8FDB\u5236\u65E5\u5FD7\u6216\u8005\u6307\u5B9A\u4E00\u4E2A\u65E5\u5FD7\u8DEF\u5F84(\u8DEF\u5F84\u4E0D\u80FD\u52A0.\u5426\u5219.\u540E\u7684\u88AB\u5FFD\u7565)</li><li>log_bin_index = name \u6307\u5B9Amysql-bin.index\u6587\u4EF6\u7684\u8DEF\u5F84</li><li>expire_logs_days = # \u6307\u5B9A\u81EA\u52A8\u5220\u9664\u4E8C\u8FDB\u5236\u65E5\u5FD7\u7684\u65F6\u95F4\uFF0C\u5373\u65E5\u5FD7\u8FC7\u671F\u65F6\u95F4</li><li>binlog_do_db = name \u660E\u786E\u6307\u5B9A\u8981\u8BB0\u5F55\u65E5\u5FD7\u7684\u6570\u636E\u5E93</li><li>binlog_ignore_db = name \u6307\u5B9A\u4E0D\u8BB0\u5F55\u4E8C\u8FDB\u5236\u65E5\u5FD7\u7684\u6570\u636E\u5E93</li><li>binlog_format = { mixed | row | statement } \u6307\u5B9A\u4E8C\u8FDB\u5236\u65E5\u5FD7\u57FA\u4E8E\u4EC0\u4E48\u6A21\u5F0F\u8BB0\u5F55</li><li>binlog_cache_size = 32768 <strong>\u57FA\u4E8E\u4E8B\u52A1\u7C7B\u578B\u7684\u65E5\u5FD7\u4F1A\u5148\u8BB0\u5F55\u5728\u7F13\u51B2\u533A</strong>\uFF0C\u5F53\u8FBE\u5230\u8BE5\u7F13\u51B2\u5927\u5C0F\u65F6\u8FD9\u4E9B\u65E5\u5FD7\u4F1A\u5199\u5165\u78C1\u76D8</li><li>max_binlog_cache_size = #\u6307\u5B9A\u4E8C\u8FDB\u5236\u65E5\u5FD7\u7F13\u5B58\u6700\u5927\u5927\u5C0F\uFF0C\u786C\u9650\u5236\u3002\u9ED8\u8BA44G\uFF0C\u591F\u5927\u4E86\uFF0C\u5EFA\u8BAE\u4E0D\u8981\u6539</li><li>binlog_cache_use\uFF1A\u4F7F\u7528\u7F13\u5B58\u5199\u4E8C\u8FDB\u5236\u65E5\u5FD7\u7684\u6B21\u6570(\u8FD9\u662F\u4E00\u4E2A\u5B9E\u65F6\u53D8\u5316\u7684\u7EDF\u8BA1\u503C)</li><li>binlog_cache_disk_use:\u4F7F\u7528\u4E34\u65F6\u6587\u4EF6\u5199\u4E8C\u8FDB\u5236\u65E5\u5FD7\u7684\u6B21\u6570\uFF0C\u5F53\u65E5\u5FD7\u8D85\u8FC7\u4E86binlog_cache_size\u7684\u65F6\u5019\u4F1A\u4F7F\u7528\u4E34\u65F6\u6587\u4EF6\u5199\u65E5\u5FD7\uFF0C\u5982\u679C\u8BE5\u53D8\u91CF\u503C\u4E0D\u4E3A0\uFF0C\u5219\u8003\u8651\u589E\u5927binlog_cache_size\u7684\u503C</li><li>sync_binlog = { 0 | n } <strong>\u8FD9\u4E2A\u53C2\u6570\u76F4\u63A5\u5F71\u54CDmysql\u7684\u6027\u80FD\u548C\u5B8C\u6574\u6027</strong><ul><li>sync_binlog=0:\u4E0D\u540C\u6B65\uFF0C\u65E5\u5FD7\u4F55\u65F6\u5237\u5230\u78C1\u76D8\u7531FileSystem\u51B3\u5B9A\uFF0C\u8FD9\u4E2A\u6027\u80FD\u6700\u597D</li><li>sync_binlog=n:\u6BCF\u5199n\u6B21\u4E8B\u52A1\uFF0CMySQL\u5C06\u6267\u884C\u4E00\u6B21\u78C1\u76D8\u540C\u6B65\u6307\u4EE4fdatasync()\u5C06\u7F13\u5B58\u65E5\u5FD7\u5237\u65B0\u5230\u78C1\u76D8\u65E5\u5FD7\u6587\u4EF6\u4E2D\u3002MySQL\u4E2D\u9ED8\u8BA4\u7684\u8BBE\u7F6E\u662Fsync_binlog=0\uFF0C\u5373\u4E0D\u540C\u6B65\uFF0C\u8FD9\u65F6\u6027\u80FD\u6700\u597D\uFF0C\u4F46\u98CE\u9669\u6700\u5927\u3002\u4E00\u65E6\u7CFB\u7EDF\u5954\u6E83\uFF0C\u7F13\u5B58\u4E2D\u7684\u65E5\u5FD7\u90FD\u4F1A\u4E22\u5931\u3002</li><li>\u5728innodb\u7684\u4E3B\u4ECE\u590D\u5236\u7ED3\u6784\u4E2D\uFF0C\u8981\u4FDD\u8BC1\u4E8B\u52A1\u7684\u4E00\u81F4\u6027\u548C\u6301\u4E45\u6027\u7684\u65F6\u5019\uFF0C<strong>\u5FC5\u987B\u5C06sync_binlog\u7684\u503C\u8BBE\u7F6E\u4E3A1</strong>\uFF0C\u56E0\u4E3A\u8BBE\u7F6E\u4E3A1\u5C31\u4FDD\u8BC1\u4E86\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u65F6\u4E8C\u8FDB\u5236\u65E5\u5FD7\u90FD\u4F1A\u5199\u5165\u5230\u78C1\u76D8\u4E2D\uFF0C\u4ECE\u800C\u7ACB\u5373\u88AB\u4ECE\u670D\u52A1\u5668\u590D\u5236\u8FC7\u53BB\u3002</li></ul></li></ul><h3 id="\u4E8C\u8FDB\u5236\u65E5\u5FD7\u5B9A\u70B9\u8FD8\u539F\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u8FDB\u5236\u65E5\u5FD7\u5B9A\u70B9\u8FD8\u539F\u6570\u636E\u5E93" aria-hidden="true">#</a> \u4E8C\u8FDB\u5236\u65E5\u5FD7\u5B9A\u70B9\u8FD8\u539F\u6570\u636E\u5E93</h3><ul><li><p>\u4E00\u822C\u4F7F\u7528\u57FA\u4E8E\u65F6\u95F4\u70B9\u6765\u6062\u590D\uFF0C\u548C\u57FA\u4E8E\u4F4D\u7F6E\u76F8\u6BD4\uFF0C\u8DE8\u65E5\u5FD7\u6587\u4EF6\u6062\u590D\u65F6\u66F4\u65B9\u4FBF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysqlbinlog --stop-datetime<span class="token operator">=</span><span class="token string">&quot;2014-7-2 15:27:48&quot;</span> /tmp/mysql-bin.000008 <span class="token operator">|</span> mysql -uuser -ppassword
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u53EF\u4EE5\u9009\u62E9\u6062\u590D\u591A\u4E2A\u4E8C\u8FDB\u5236\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysqlbinlog mysql-bin.<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token operator">|</span> mysql -uuser -ppassword
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6216\u8005\u5BFC\u5165\u5230\u4E00\u4E2A\u6587\u4EF6\u4E2D\u6765\u6062\u590D</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mysqlbinlog mysql-bin.000001 <span class="token operator">&gt;</span> /tmp/a.sql
mysqlbinlog mysql-bin.000002 <span class="token operator">&gt;&gt;</span> /tmp/a.sql
mysql -uuser -ppassword -e <span class="token string">&quot;source /tmp/a.sql&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="\u4E8B\u52A1\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1\u65E5\u5FD7" aria-hidden="true">#</a> \u4E8B\u52A1\u65E5\u5FD7</h2><h3 id="redo-log" tabindex="-1"><a class="header-anchor" href="#redo-log" aria-hidden="true">#</a> redo log</h3><p><strong>redo log</strong>\uFF08\u91CD\u505A\u65E5\u5FD7\uFF09\u662F<strong>InnoDB\u5B58\u50A8\u5F15\u64CE\u72EC\u6709</strong>\u7684\uFF0C\u5B83\u8BA9MySQL\u62E5\u6709\u4E86<strong>\u5D29\u6E83\u6062\u590D</strong>\u7684\u80FD\u529B\uFF0C\u6062\u590D\u6570\u636E\u65F6<code>InnoDB</code>\u4F1A\u4F7F\u7528<code>redo log</code>\u6765\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027\u548C\u6301\u4E45\u6027</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210902170055.png" alt=""></p><h4 id="redo-log\u5F15\u5165" tabindex="-1"><a class="header-anchor" href="#redo-log\u5F15\u5165" aria-hidden="true">#</a> redo log\u5F15\u5165</h4><p>\u56E0\u4E3AMySQL\u7684IO\u4EE3\u4EF7\u7684\u7F18\u6545\uFF0CMySQL\u5BA2\u6237\u7AEF\u4E0D\u4F1A\u6BCF\u6B21\u90FD\u76F4\u63A5\u64CD\u4F5C\u78C1\u76D8</p><p>\u5728\u6267\u884C\u67E5\u8BE2\u8BED\u53E5\u65F6\uFF0CMySQL\u4F1A\u4ECE\u78C1\u76D8\u4E2D\u628A\u4E00\u9875\u7684\u6570\u636E\uFF08\u79F0\u4E3A\u6570\u636E\u9875\uFF09\u52A0\u8F7D\u51FA\u6765\u653E\u5165<strong>Buffer Pool</strong>\u4E2D\uFF0C\u540E\u7EED\u7684\u67E5\u8BE2\u90FD\u4E0E\u8FD9\u4E2A<code>Buffer Pool</code>\u8FDB\u884C\u4EA4\u4E92\uFF0C\u51CF\u5C11\u78C1\u76D8IO\u5F00\u9500\uFF0C\u63D0\u5347\u6027\u80FD</p><p>\u5728\u6267\u884C\u66F4\u65B0\u8BED\u53E5\u65F6\uFF0CMySQL\u7684\u505A\u6CD5\u4E5F\u540C\u6837\u5982\u6B64\uFF0C\u5F53<code>Buffer Pool</code>\u91CC\u9762\u7684\u6570\u636E\u9700\u8981\u66F4\u65B0\u65F6\uFF0C\u5148\u5728<code>Buffer Pool</code>\u91CC\u9762\u8FDB\u884C\u66F4\u65B0\uFF0C\u5F53\u5185\u5B58\u4E2D(<code>Buffer Pool</code>)\u6570\u636E\u548C\u786C\u76D8\u4E2D\u7684\u6570\u636E\u4E0D\u4E00\u81F4\u65F6\uFF0C\u90A3\u4E48\u5185\u5B58\u4E2D\u7684\u6570\u636E\u79F0\u4E3A<strong>\u810F\u9875</strong>\uFF0C\u7B49\u5F85\u540E\u7EED<code>Buffer Pool</code>\u8FDB\u884C<strong>\u5237\u810F</strong>\uFF0C\u7136\u540E\u4F1A\u628A\u5728\u54EA\u4E2A\u6570\u636E\u9875\u4E0A\u505A\u4E86\u54EA\u4E9B\u4FEE\u6539\u8BB0\u5F55\u5230<strong>redo log buffer</strong>\uFF08\u79F0\u4E3A\u91CD\u505A\u65E5\u5FD7\u7F13\u5B58\uFF09\u91CC\u9762\uFF0C\u7B49\u5F85<strong>\u540E\u7EED\u5237\u76D8\u5230redo log\u6587\u4EF6\u91CC\u9762</strong></p><p><strong>\u4ECE\u66F4\u65B0\u64CD\u4F5C\u4E5F\u53EF\u4EE5\u770B\u51FA\uFF0CMySQL\u5728\u5199\u6587\u4EF6\u7684\u5904\u7406\u4E2D\u4E00\u822C\u4F1A\u4F34\u968F\u7F13\u5B58+\u6587\u4EF6\u7684\u7EC4\u5408</strong></p><p>redo log\u4E2D\u7684\u8BB0\u5F55\u662F\u7531<strong>\u8868\u7A7A\u95F4\u53F7+\u6570\u636E\u9875\u53F7+\u504F\u79FB\u91CF+\u4FEE\u6539\u6570\u636E\u957F\u5EA6+\u5177\u4F53\u4FEE\u6539\u7684\u6570\u636E</strong>\u7EC4\u6210</p><p><strong>\u603B\u7ED3</strong></p><p>\u4E0D\u628A\u6570\u636E\u9875\u76F4\u63A5\u5237\u76D8\uFF0C\u800C\u7528<code>redo log</code>\u8FDB\u884C\u4FEE\u6539\u5185\u5BB9\u7684\u8BB0\u5F55\u7684\u539F\u56E0</p><ol><li>\u6570\u636E\u9875\u5927\u5C0F\u662F<code>16KB=16384Byte</code>\uFF0C\u53EF\u80FD\u4E5F\u5C31\u4FEE\u6539\u4E86\u6570\u636E\u9875\u4E2D\u51E0<code>Byte</code>\u7684\u6570\u636E\uFF0C\u6CA1\u6709\u5FC5\u8981\u628A\u5B8C\u6574\u7684\u6570\u636E\u9875\u8FDB\u884C\u5237\u76D8\uFF0C<strong>IO\u4EE3\u4EF7\u592A\u5927</strong></li><li>\u6570\u636E\u9875\u5237\u76D8\u662F<strong>\u968F\u673A\u5199</strong>\uFF0C\u56E0\u4E3A\u4E00\u4E2A\u6570\u636E\u9875\u5BF9\u5E94\u7684\u4F4D\u7F6E\u53EF\u80FD\u5728\u786C\u76D8\u6587\u4EF6\u7684\u968F\u673A\u4F4D\u7F6E\uFF0C\u6240\u4EE5\u6027\u80FD\u662F\u5F88\u5DEE\u7684\uFF1B\u800C<code>redo log</code>\u662F<strong>\u987A\u5E8F\u5199</strong>\uFF0C\u5237\u76D8\u901F\u5EA6\u5F88\u5FEB</li></ol><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210902172253.png" alt=""></p><h4 id="redo-log\u5237\u76D8\u65F6\u673A" tabindex="-1"><a class="header-anchor" href="#redo-log\u5237\u76D8\u65F6\u673A" aria-hidden="true">#</a> redo log\u5237\u76D8\u65F6\u673A</h4><p><code>InnoDB</code>\u5B58\u50A8\u5F15\u64CE\u4E3A<code>redo log</code>\u7684\u5237\u76D8\u7B56\u7565\u63D0\u4F9B\u4E86 <code>innodb_flush_log_at_trx_commit</code> \u53C2\u6570\uFF0C\u5B83\u652F\u6301\u4E09\u79CD\u7B56\u7565\u3002\u53E6\u5916<code>InnoDB</code>\u5B58\u50A8\u5F15\u64CE\u6709\u4E00\u4E2A\u540E\u53F0\u7EBF\u7A0B\uFF0C\u6BCF\u96941\u79D2\uFF0C\u5C31\u4F1A\u628A<code>redo log buffer</code>\u4E2D\u7684\u5185\u5BB9\u5199\u5165\u5230<strong>page cache\uFF08\u6587\u4EF6\u7CFB\u7EDF\u7F13\u5B58\uFF09</strong>\uFF0C\u7136\u540E\u8C03\u7528<strong>fsync\u5237\u76D8</strong></p><ul><li><p>0\uFF1A\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u65F6\u4E0D\u8FDB\u884C\u5237\u76D8\u64CD\u4F5C\uFF0C\u53EA\u662F\u7B49\u5F85\u540E\u53F0\u7EBF\u7A0B\u8FDB\u884C\u6BCF\u79D2\u7684\u5237\u76D8</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210906165553.png" alt=""></p></li><li><p>1\uFF1A\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u65F6\u90FD\u8FDB\u884C\u5237\u76D8\u64CD\u4F5C**\uFF08\u9ED8\u8BA4\uFF09**\uFF0C\u9664\u4E86\u540E\u53F0\u7EBF\u7A0B\u8FDB\u884C\u7684\u6BCF\u79D2\u7684\u5237\u76D8\u5916\uFF0C\u4E00\u65E6\u4E8B\u52A1\u63D0\u4EA4\u5C31\u8FDB\u884C\u4E3B\u52A8\u5237\u76D8</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210906170211.png" alt=""></p></li><li><p>2\uFF1A\u6BCF\u6B21\u4E8B\u52A1\u63D0\u4EA4\u65F6\u90FD\u53EA\u628A <code>redo log buffer</code> \u5185\u5BB9\u5199\u5165 <code>page cache</code>\uFF0C\u7B49\u5F85\u540E\u53F0\u7EBF\u7A0B\u6BCF\u79D2\u7684\u5237\u76D8\uFF0C\u628A<code>page cache</code>\u7684\u5185\u5BB9\u5199\u5165<code>redo log</code>\u6587\u4EF6</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210906170444.png" alt=""></p></li></ul><h4 id="redo-log\u6587\u4EF6\u7EC4" tabindex="-1"><a class="header-anchor" href="#redo-log\u6587\u4EF6\u7EC4" aria-hidden="true">#</a> redo log\u6587\u4EF6\u7EC4</h4><p>\u786C\u76D8\u4E0A\u5B58\u50A8\u7684 <code>redo log</code> \u65E5\u5FD7\u6587\u4EF6\u662F\u4EE5\u4E00\u4E2A<strong>\u65E5\u5FD7\u6587\u4EF6\u7EC4</strong>\u7684\u5F62\u5F0F\u51FA\u73B0\u7684\uFF0C\u6BCF\u4E2A\u7684<code>redo</code>\u65E5\u5FD7\u6587\u4EF6\u5927\u5C0F\u90FD\u662F\u4E00\u6837\u7684</p><p>\u6BD4\u5982\u53EF\u4EE5\u914D\u7F6E\u4E3A\u4E00\u7EC4<code>4</code>\u4E2A\u6587\u4EF6\uFF0C\u6BCF\u4E2A\u6587\u4EF6\u7684\u5927\u5C0F\u662F <code>1GB</code>\uFF0C\u90A3\u4E48\u6574\u4E2A <code>redo log</code> \u65E5\u5FD7\u6587\u4EF6\u7EC4\u53EF\u4EE5\u8BB0\u5F55<code>4G</code>\u7684\u5185\u5BB9</p><p>\u5B83\u91C7\u7528\u7684\u662F<strong>\u73AF\u5F62\u6570\u7EC4</strong>\u5F62\u5F0F\uFF0C\u4ECE\u5934\u5F00\u59CB\u5199\uFF0C\u5199\u5230\u672B\u5C3E\u53C8\u56DE\u5230\u5934\u5FAA\u73AF\u5199</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210906171107.png" alt=""></p><p>\u5728\u65E5\u5FD7\u6587\u4EF6\u7EC4\u4E2D\u6709\u4E24\u4E2A\u91CD\u8981\u7684\u5C5E\u6027</p><ul><li><code>write pos</code>\uFF1A\u5F53\u524D\u8BB0\u5F55\u7684\u4F4D\u7F6E\uFF0C\u63D2\u5165\u8BB0\u5F55\u7684\u4F4D\u7F6E</li><li><code>checkpoint</code>\uFF1A\u5F53\u524D\u64E6\u9664\u7684\u4F4D\u7F6E\uFF0C\u4ECE<code>redo log</code>\u6062\u590D\u6570\u636E\u7684\u5F00\u59CB\u4F4D\u7F6E</li></ul><p>\u5982\u679C<code>write pos</code>\u8FFD\u4E0A\u4E86<code>checkpoint</code>\uFF0C<strong>\u90A3\u5C31\u8BF4\u660E\u5F53\u524D\u8BB0\u5F55\u7684<code>redo log</code>\u5DF2\u7ECF\u6EE1\u4E86\uFF0C\u5982\u679C\u518D\u8BB0\u5F55\u7684\u8BDD\u4F1A\u628A\u4E0A\u4E00\u6B21\u5F00\u59CB\u8BB0\u5F55\u7684\u5185\u5BB9\u8986\u76D6\u6389</strong>\uFF0C\u6240\u4EE5\u9700\u8981\u505C\u4E0B\u6765\u5148\u6E05\u7A7A\u4E00\u4E9B\u8BB0\u5F55\uFF0C\u628A<code>checkpoint</code>\u5F80\u524D\u63A8\u8FDB</p><h4 id="redo-log\u548Cbin-log\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#redo-log\u548Cbin-log\u533A\u522B" aria-hidden="true">#</a> redo log\u548Cbin log\u533A\u522B</h4><ul><li>\u65E5\u5FD7\u7684\u4F4D\u7F6E <ul><li><code>redo log</code>\u662F<code>InnoDB</code>\u5B58\u50A8\u5F15\u64CE\u7279\u6709\u7684\uFF0C\u4F4D\u4E8E<strong>\u5B58\u50A8\u5F15\u64CE\u5C42</strong></li><li><code>binlog</code>\u4F4D\u4E8E<strong>MySQL Server\u5C42</strong></li></ul></li><li>\u65E5\u5FD7\u7684\u5185\u5BB9 <ul><li><code>redo log</code>\u8BB0\u5F55\u7684\u683C\u5F0F\u662F<strong>\u8868\u7A7A\u95F4\u53F7+\u6570\u636E\u9875\u53F7+\u504F\u79FB\u91CF+\u4FEE\u6539\u6570\u636E\u957F\u5EA6+\u5177\u4F53\u4FEE\u6539\u7684\u6570\u636E</strong></li><li><code>binlog</code>\u8BB0\u5F55\u7684\u5185\u5BB9\u662F<strong>\u8BED\u53E5\u7684\u539F\u59CB\u903B\u8F91\uFF08SQL\u8BED\u53E5\uFF09</strong>\uFF0C\u4E0D\u7BA1\u7528\u4EC0\u4E48\u5B58\u50A8\u5F15\u64CE\uFF0C\u53EA\u8981\u53D1\u751F\u4E86\u8868\u6570\u636E\u66F4\u65B0\uFF0C\u90FD\u4F1A\u4EA7\u751F<code>binlog</code>\u65E5\u5FD7</li></ul></li><li>\u4E24\u8005\u90FD\u5C5E\u4E8E\u6301\u4E45\u5316\u7684\u4FDD\u8BC1\uFF0C\u4F46\u662F\u4FA7\u91CD\u70B9\u4E0D\u540C <ul><li><code>redo log</code>\u8BA9<code>InnoDB</code>\u5B58\u50A8\u5F15\u64CE\u62E5\u6709\u4E86\u5D29\u6E83\u6062\u590D\u80FD\u529B</li><li><code>binlog</code>\u4FDD\u8BC1\u4E86<code>MySQL</code>\u96C6\u7FA4\u67B6\u6784\u7684\u6570\u636E\u4E00\u81F4\u6027</li></ul></li></ul><h3 id="undo-log" tabindex="-1"><a class="header-anchor" href="#undo-log" aria-hidden="true">#</a> undo log</h3><p><code>undo log</code>\uFF08\u56DE\u6EDA\u65E5\u5FD7\uFF09\u4FDD\u8BC1\u4E86\u4E8B\u52A1\u7684<strong>\u539F\u5B50\u6027</strong></p><p>\u5F53\u5F02\u5E38\u53D1\u751F\u65F6\uFF0C\u5BF9\u5DF2\u6267\u884C\u7684\u64CD\u4F5C\u9700\u8981\u8FDB\u884C<strong>\u56DE\u6EDA</strong>\uFF0C\u5728MySQL\u4E2D\uFF0C\u6062\u590D\u673A\u5236\u662F\u901A\u8FC7<code>undo log</code>\u56DE\u6EDA\u65E5\u5FD7\u5B9E\u73B0\u7684</p><p><strong>\u56DE\u6EDA\u65E5\u5FD7\u4F1A\u5148\u4E8E\u6570\u636E\u6301\u4E45\u5316\u5230\u78C1\u76D8\u4E0A</strong>\uFF0C\u8FD9\u6837\u5C31\u4FDD\u8BC1\u4E86\u5373\u4F7F\u9047\u5230\u6570\u636E\u5E93\u7A81\u7136\u5B95\u673A\u7B49\u60C5\u51B5\uFF0C\u5F53\u7528\u6237\u518D\u6B21\u542F\u52A8\u6570\u636E\u5E93\u7684\u65F6\u5019\uFF0C\u6570\u636E\u5E93\u8FD8\u80FD\u591F\u901A\u8FC7\u67E5\u8BE2\u56DE\u6EDA\u65E5\u5FD7\u6765\u56DE\u6EDA\u5C06\u4E4B\u524D\u672A\u5B8C\u6210\u7684\u4E8B\u52A1</p><h4 id="redo-log\u548Cundo-log\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#redo-log\u548Cundo-log\u533A\u522B" aria-hidden="true">#</a> redo log\u548Cundo log\u533A\u522B</h4><p>MySQL <code>InnoDB</code> \u5F15\u64CE\u4F7F\u7528 <strong>redo log(\u91CD\u505A\u65E5\u5FD7)</strong> \u4FDD\u8BC1\u4E8B\u52A1\u7684<strong>\u6301\u4E45\u6027</strong>\uFF0C\u4F7F\u7528 <strong>undo log(\u56DE\u6EDA\u65E5\u5FD7)</strong> \u6765\u4FDD\u8BC1\u4E8B\u52A1\u7684<strong>\u539F\u5B50\u6027</strong>\u3002</p><h2 id="\u4E24\u9636\u6BB5\u63D0\u4EA4" tabindex="-1"><a class="header-anchor" href="#\u4E24\u9636\u6BB5\u63D0\u4EA4" aria-hidden="true">#</a> \u4E24\u9636\u6BB5\u63D0\u4EA4</h2><p>\u5728\u6267\u884C\u66F4\u65B0\u8BED\u53E5\u65F6\uFF0C\u4F1A\u8BB0\u5F55<code>redo log</code>\u548C<code>binlog</code>\u4E24\u4EFD\u65E5\u5FD7\uFF0C<code>redo log</code>\u5728\u4E8B\u52A1\u6267\u884C\u8FC7\u7A0B\u4E2D\u53EF\u4EE5\u4E0D\u65AD\u5199\u5165\uFF08\u56E0\u4E3A<code>InnoDB</code>\u5B58\u50A8\u5F15\u64CE\u6709\u4E00\u4E2A\u540E\u53F0\u7EBF\u7A0B\uFF0C\u6BCF\u96941\u79D2\uFF0C\u5C31\u4F1A\u628A<code>redo log buffer</code>\u4E2D\u7684\u5185\u5BB9\u5199\u5165\u5230<code>page cache</code>\uFF0C\u7136\u540E\u8C03\u7528<code>fsync</code>\u5237\u76D8\uFF09\uFF1B\u800C<code>binlog</code>\u53EA\u6709\u5728\u4E8B\u52A1\u63D0\u4EA4\u65F6\u624D\u5199\u5165\uFF0C\u6240\u4EE5<code>redo log</code>\u548C<code>binlog</code>\u7684\u5199\u5165\u65F6\u673A\u662F\u4E0D\u4E00\u81F4\u7684</p><h3 id="redo-log\u548Cbinlog\u4E24\u4EFD\u65E5\u5FD7\u4E0D\u4E00\u81F4\u5BFC\u81F4\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#redo-log\u548Cbinlog\u4E24\u4EFD\u65E5\u5FD7\u4E0D\u4E00\u81F4\u5BFC\u81F4\u7684\u95EE\u9898" aria-hidden="true">#</a> redo log\u548Cbinlog\u4E24\u4EFD\u65E5\u5FD7\u4E0D\u4E00\u81F4\u5BFC\u81F4\u7684\u95EE\u9898</h3><p>\u4EE5<code>update T set c = 1 where id = 2</code>\u4E3A\u4F8B\uFF0C\u5982\u679C\u5199\u5B8C<code>redo log </code>\u540E\uFF0C<code>binlog</code>\u5199\u5165\u7684\u8FC7\u7A0B\u4E2D\u53D1\u751F\u4E86\u5F02\u5E38</p><p>\u7531\u4E8E<code>binlog</code>\u6CA1\u5199\u5B8C\u5C31\u5F02\u5E38\uFF0C\u8FD9\u65F6\u5019<code>binlog</code>\u91CC\u9762\u6CA1\u6709\u5BF9\u5E94\u7684\u4FEE\u6539\u8BB0\u5F55\u3002\u56E0\u6B64\uFF0C\u4E4B\u540E\u7528<code>binlog</code>\u65E5\u5FD7\u6062\u590D\u4ECE\u5E93\u7684\u6570\u636E\u65F6\uFF0C\u5C31\u4F1A\u5C11\u8FD9\u4E00\u6B21\u66F4\u65B0\uFF0C\u6062\u590D\u51FA\u6765\u7684\u8FD9\u4E00\u884C<code>c</code>\u503C\u662F<code>0</code>\uFF0C\u800C\u539F\u5E93\u56E0\u4E3A<code>redo log</code>\u65E5\u5FD7\u6062\u590D\uFF0C\u8FD9\u4E00\u884C<code>c</code>\u503C\u662F<code>1</code>\uFF0C\u6700\u7EC8\u6570\u636E\u4E0D\u4E00\u81F4</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210909112032.png" alt=""></p><h3 id="\u4E24\u9636\u6BB5\u63D0\u4EA4\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u4E24\u9636\u6BB5\u63D0\u4EA4\u539F\u7406" aria-hidden="true">#</a> \u4E24\u9636\u6BB5\u63D0\u4EA4\u539F\u7406</h3><p>\u4E3A\u4E86\u9632\u6B62\u51FA\u73B0\u6570\u636E\u4E0D\u4E00\u81F4\u7684\u95EE\u9898\uFF0CMySQL\u5C06<code>redo log</code>\u7684\u5199\u5165\u62C6\u6210\u4E86\u4E24\u4E2A\u6B65\u9AA4<code>prepare</code>\u548C<code>commit</code>\uFF0C\u8FD9\u5C31\u662F<strong>\u4E24\u9636\u6BB5\u63D0\u4EA4</strong></p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210909112205.png" alt=""></p><ul><li><p>\u5F53\u5199\u5165<code>binlog</code>\u65F6\u53D1\u751F\u5F02\u5E38\uFF0CMySQL\u4F1A\u68C0\u67E5<code>redo log</code>\u5904\u4E8E\u4EC0\u4E48\u9636\u6BB5\uFF0C\u5982\u679C\u662F<code>prepare</code>\u9636\u6BB5\uFF0C\u5E76\u4E14\u4E5F\u6CA1\u6709\u5BF9\u5E94\u7684<code>binlog</code>\u65E5\u5FD7\u65F6\uFF0C\u5C31\u4F1A\u56DE\u6EDA\u4E8B\u52A1</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210909113524.png" alt=""></p></li><li><p>\u5F53<code>redo log</code>\u8BBE\u7F6E<code>commit</code>\u9636\u6BB5\u53D1\u751F\u5F02\u5E38\uFF0C\u6B64\u65F6\u867D\u7136<code>redo log</code>\u8FD8\u662F\u5904\u4E8E<code>prepare</code>\u9636\u6BB5\uFF0C\u4F46\u662F\u80FD\u901A\u8FC7\u4E8B\u52A1Id\u5728<code>binlog</code>\u4E2D\u627E\u5230\u5BF9\u5E94\u7684<code>binlog</code>\u65E5\u5FD7\uFF0C\u6240\u4EE5\u53EF\u4EE5\u8BA4\u4E3A\u8FD9\u662F\u5B8C\u6574\u7684\u8BB0\u5F55\uFF0C\u5C31\u4F1A\u628A\u4E8B\u52A1\u63D0\u4EA4</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20210909113538.png" alt=""></p></li></ul><h1 id="\u6570\u636E\u5E93\u8BBE\u8BA1" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5E93\u8BBE\u8BA1" aria-hidden="true">#</a> \u6570\u636E\u5E93\u8BBE\u8BA1</h1><h2 id="\u591A\u8868\u4E4B\u95F4\u7684\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u591A\u8868\u4E4B\u95F4\u7684\u5173\u7CFB" aria-hidden="true">#</a> \u591A\u8868\u4E4B\u95F4\u7684\u5173\u7CFB</h2><ul><li><p>\u4E00\u5BF9\u4E00(\u4E86\u89E3)</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5982\uFF1A\u4EBA\u548C\u8EAB\u4EFD\u8BC1\u7684\u5173\u7CFB
-- \u5206\u6790\uFF1A\u4E00\u4E2A\u4EBA\u53EA\u6709\u4E00\u4E2A\u8EAB\u4EFD\u8BC1\uFF0C\u4E00\u4E2A\u8EAB\u4EFD\u8BC1\u53EA\u80FD\u5BF9\u5E94\u4E00\u4E2A\u4EBA

-- \u5B9E\u73B0\uFF1A\u4E00\u5BF9\u4E00\u5173\u7CFB\u7684\u5B9E\u73B0\uFF0C\u53EF\u4EE5\u5728\u4EFB\u610F\u4E00\u65B9\u6DFB\u52A0\u552F\u4E00\u5916\u952Eunique\u6307\u5411\u53E6\u4E00\u65B9\u7684\u4E3B\u952E\uFF1B\u6216\u8005\u8BA9\u4E24\u4E2A\u8868\u7684\u4E3B\u952E\u76F8\u540C\uFF1B\u6216\u8005\u76F4\u63A5\u5408\u6210\u4E00\u5F20\u8868
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4E00\u5BF9\u591A(\u591A\u5BF9\u4E00)(\u91CD\u8981)</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5982\uFF1A\u90E8\u95E8\u548C\u5458\u5DE5\u7684\u5173\u7CFB
-- \u5206\u6790\uFF1A\u4E00\u4E2A\u90E8\u95E8\u6709\u591A\u4E2A\u5458\u5DE5\uFF0C\u4E00\u4E2A\u5458\u5DE5\u53EA\u80FD\u5BF9\u5E94\u4E00\u4E2A\u90E8\u95E8

-- \u5B9E\u73B0\uFF1A\u5728\u591A\u7684\u4E00\u65B9\u5EFA\u7ACB\u5916\u952E\uFF0C\u6307\u5411\u4E00\u7684\u4E00\u65B9\u7684\u4E3B\u952E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u591A\u5BF9\u591A</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>-- \u5982\uFF1A\u5B66\u751F\u548C\u8BFE\u7A0B
-- \u5206\u6790\uFF1A\u4E00\u4E2A\u5B66\u751F\u53EF\u4EE5\u9009\u62E9\u591A\u95E8\u8BFE\u7A0B\uFF0C\u4E00\u4E2A\u8BFE\u7A0B\u4E5F\u53EF\u4EE5\u88AB\u5F88\u591A\u5B66\u751F\u9009\u62E9

-- \u5B9E\u73B0\uFF1A\u591A\u5BF9\u591A\u5173\u7CFB\u5B9E\u73B0\u9700\u8981\u501F\u52A9\u7B2C\u4E09\u5F20\u4E2D\u95F4\u8868\uFF0C\u8FD9\u5F20\u4E2D\u95F4\u8868\u81F3\u5C11\u5305\u542B\u4E24\u4E2A\u5B57\u6BB5\uFF0C\u8FD9\u4E24\u4E2A\u5B57\u6BB5\u4F5C\u4E3A\u4E2D\u95F4\u8868\u7684\u4E3B\u952E\uFF0C\u5206\u522B\u6307\u5411\u4E24\u4E2A\u8868\u7684\u4E3B\u952E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="\u8303\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u8303\u5F0F" aria-hidden="true">#</a> \u8303\u5F0F</h2><p>\u8BBE\u8BA1\u6570\u636E\u5E93\u65F6\u9700\u8981\u9075\u5FAA\u7684\u89C4\u8303\u3002\u8981\u9075\u5FAA\u540E\u8FB9\u7684\u8303\u5F0F\u8981\u6C42\uFF0C\u5FC5\u987B\u5148\u9075\u5FAA\u524D\u8FB9\u7684\u6240\u6709\u8303\u5F0F\u8981\u6C42</p><p>\u5206\u7C7B</p><ul><li><p>\u7B2C\u4E00\u8303\u5F0F\uFF1A<strong>\u6BCF\u4E00\u9879\u90FD\u662F\u4E0D\u53EF\u5206\u5272\u7684\u539F\u5B50\u6570\u636E\u9879</strong></p><ul><li><p>\u4E0D\u5141\u8BB8\u51FA\u73B0<strong>\u590D\u5408\u5217</strong></p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrnje6vzj311y0r6arv.jpg" alt=""></p></li><li><p>\u5B58\u5728\u6570\u636E\u5197\u4F59</p></li><li><p>\u6570\u636E\u6DFB\u52A0\u5B58\u5728\u95EE\u9898</p></li><li><p>\u6570\u636E\u5220\u9664\u5B58\u5728\u95EE\u9898</p></li></ul></li><li><p>\u7B2C\u4E8C\u8303\u5F0F\uFF1A\u5728\u7B2C\u4E00\u8303\u5F0F\u57FA\u7840\u4E0A\uFF0C\u975E\u7801\u5C5E\u6027\u5FC5\u987B<strong>\u5B8C\u5168\u4F9D\u8D56\u4E8E\u7801</strong>\u3002\u5728\u7B2C\u4E00\u8303\u5F0F\u7684\u57FA\u7840\u4E0A<strong>\u6D88\u9664\u975E\u4E3B\u5C5E\u6027\u5BF9\u4E3B\u7801\u7684\u90E8\u5206\u51FD\u6570\u4F9D\u8D56</strong></p><ul><li><p>\u51E0\u4E2A\u6982\u5FF5</p><ul><li>\u51FD\u6570\u4F9D\u8D56\uFF1A\u5982\u679C\u901A\u8FC7A\u7684\u5C5E\u6027(\u5C5E\u6027\u7EC4)\u7684\u503C\u53EF\u4EE5\u786E\u5B9A\u552F\u4E00B\u7684\u5C5E\u6027\u7684\u503C\uFF0C\u90A3\u4E48\u5C31\u79F0B\u4F9D\u8D56\u4E8EA\u3002\u5982\u5B66\u53F7-&gt;\u59D3\u540D\uFF0C(\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u540D\u79F0)-&gt;\u5206\u6570</li><li>\u5B8C\u5168\u51FD\u6570\u4F9D\u8D56\uFF1A\u5982\u679CA\u662F\u4E00\u4E2A\u5C5E\u6027\u7EC4\uFF0CB\u5C5E\u6027\u503C\u7684\u786E\u5B9A\u9700\u8981\u4F9D\u8D56\u4E8EA\u5C5E\u6027\u7EC4\u4E2D\u6240\u6709\u7684\u5C5E\u6027\u503C\u3002\u5982\uFF1A(\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u540D\u79F0)-&gt;\u5206\u6570</li><li>\u90E8\u5206\u51FD\u6570\u4F9D\u8D56\uFF1A\u5982\u679CA\u662F\u4E00\u4E2A\u5C5E\u6027\u7EC4\uFF0CB\u5C5E\u6027\u503C\u7684\u786E\u5B9A\u9700\u8981\u4F9D\u8D56\u4E8EA\u5C5E\u6027\u7EC4\u4E2D\u67D0\u4E9B\u7684\u5C5E\u6027\u503C\u3002\u5982\uFF1A(\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u540D\u79F0)-&gt;\u59D3\u540D\uFF0C\u5176\u5B9E\u53EA\u9700\u5B66\u53F7\u6765\u786E\u5B9A\u59D3\u540D</li><li>\u4F20\u9012\u51FD\u6570\u4F9D\u8D56\uFF1A\u5982\u679C\u901A\u8FC7A\u7684\u5C5E\u6027(\u5C5E\u6027\u7EC4)\u7684\u503C\uFF0C\u53EF\u4EE5\u786E\u5B9A\u552F\u4E00B\u5C5E\u6027\u7684\u503C\uFF0C\u518D\u901A\u8FC7B\u7684\u5C5E\u6027(\u5C5E\u6027\u7EC4)\u7684\u503C\uFF0C\u53EF\u4EE5\u786E\u5B9A\u552F\u4E00C\u5C5E\u6027\u7684\u503C\uFF0C\u90A3\u4E48\u5C31\u79F0C\u4F20\u9012\u4F9D\u8D56\u4E8EA\u3002\u5982\uFF1A\u5B66\u53F7-&gt;\u7CFB\u540D-&gt;\u7CFB\u4E3B\u4EFB</li><li><strong>\u7801</strong>\uFF1A\u5982\u679C\u5728\u4E00\u5F20\u8868\u4E2D\uFF0C\u4E00\u4E2A\u5C5E\u6027\u6216\u8005\u4E00\u4E2A\u5C5E\u6027\u7EC4\uFF0C\u88AB\u5176\u4ED6\u6240\u6709\u5C5E\u6027\u6240\u5B8C\u5168\u4F9D\u8D56\uFF0C\u5219\u79F0\u8FD9\u4E2A\u5C5E\u6027(\u5C5E\u6027\u7EC4)\u4E3A\u8BE5\u8868\u7684\u7801\u3002\u5982\uFF1A\u7801\uFF1A(\u5B66\u53F7\uFF0C\u8BFE\u7A0B\u540D\u79F0)</li><li>\u4E3B\u5C5E\u6027\uFF1A\u7801\u5C5E\u6027\u7EC4\u4E2D\u6240\u6709\u5C5E\u6027</li><li>\u975E\u4E3B\u5C5E\u6027\uFF1A\u9664\u7801\u5C5E\u6027\u7EC4\u5916\u7684\u5C5E\u6027</li></ul></li><li><p>\u505A\u6CD5\uFF1A\u62C6\u5206\u8868</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrmck4zvj31ja0u07wh.jpg" alt=""></p></li><li><p>\u89E3\u51B3\u4E86<strong>\u6570\u636E\u5197\u4F59</strong>\u7684\u95EE\u9898\uFF0C\u4F46\u5B58\u5728\u540C\u6837\u7684\u6570\u636E\u63D2\u5165\u3001\u5220\u9664\u7684\u95EE\u9898</p></li></ul></li><li><p>\u7B2C\u4E09\u8303\u5F0F\uFF1A\u5728\u7B2C\u4E8C\u8303\u5F0F\u57FA\u7840\u4E0A\uFF0C\u4EFB\u4F55\u975E\u4E3B\u5C5E\u6027\u4E0D\u4F9D\u8D56\u4E8E\u5176\u4ED6\u975E\u4E3B\u5C5E\u6027\u3002\u5728\u7B2C\u4E8C\u8303\u5F0F\u57FA\u7840\u4E0A\u6D88\u9664\u4F20\u9012\u4F9D\u8D56</p><ul><li><p>\u505A\u6CD5\uFF1A\u518D\u62C6\u5206\u8868</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrmdbjrij31320pun9x.jpg" alt=""></p></li><li><p>\u89E3\u51B3\u4E86\u6570\u636E<strong>\u63D2\u5165</strong>\u4E0D\u5408\u6CD5\u548C<strong>\u5220\u9664</strong>\u98CE\u9669\u7684\u95EE\u9898</p></li></ul></li></ul><h2 id="\u52A8\u6001\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u52A8\u6001\u5B57\u6BB5" aria-hidden="true">#</a> \u52A8\u6001\u5B57\u6BB5</h2><p>\u4EE5\u4EA7\u54C1\u4E3A\u4F8B\uFF0C\u4E0D\u540C\u7C7B\u578B\u4EA7\u54C1\u4F1A\u6709\u4E0D\u540C\u7684\u5C5E\u6027\uFF08\u7535\u8111\u3001\u624B\u673A\uFF09\uFF0C\u5C5E\u6027\u540D\u79F0\u548C\u4E2A\u6570\u90FD\u4E0D\u786E\u5B9A</p><p>\u91C7\u7528\u505A\u6CD5\uFF1A<strong>\u5C5E\u6027\u516C\u7528+\u5C5E\u6027\u5B57\u6BB5\u884C\u5B58\u50A8</strong>\uFF0C\u516C\u7528\u7684\u5B57\u6BB5\u653E\u5728\u4EA7\u54C1\u8868\u4E2D\uFF0C\u7279\u6709\u7684\u5B57\u6BB5\u653E\u5728\u4EA7\u54C1\u5C5E\u6027\u8868\u4E2D\u5B58\u50A8</p><p>\u4EA7\u54C1\u5206\u7C7B\u8868\u3001\u4EA7\u54C1\u8868\u3001\u5C5E\u6027\u8868\u3001\u4EA7\u54C1\u5C5E\u6027\u8868</p><h2 id="\u884C\u8F6C\u5217\u3001\u5217\u8F6C\u884C" tabindex="-1"><a class="header-anchor" href="#\u884C\u8F6C\u5217\u3001\u5217\u8F6C\u884C" aria-hidden="true">#</a> \u884C\u8F6C\u5217\u3001\u5217\u8F6C\u884C</h2><h1 id="\u5206\u5E93\u5206\u8868" tabindex="-1"><a class="header-anchor" href="#\u5206\u5E93\u5206\u8868" aria-hidden="true">#</a> \u5206\u5E93\u5206\u8868</h1><h2 id="\u5782\u76F4\u5207\u5206" tabindex="-1"><a class="header-anchor" href="#\u5782\u76F4\u5207\u5206" aria-hidden="true">#</a> \u5782\u76F4\u5207\u5206</h2><h3 id="\u5782\u76F4\u5206\u5E93" tabindex="-1"><a class="header-anchor" href="#\u5782\u76F4\u5206\u5E93" aria-hidden="true">#</a> \u5782\u76F4\u5206\u5E93</h3><p>\u6839\u636E\u4E1A\u52A1\u8026\u5408\u6027\uFF0C\u5C06<strong>\u5173\u8054\u5EA6\u4F4E</strong>\u7684\u4E0D\u540C\u8868\u5B58\u50A8\u5728<strong>\u4E0D\u540C\u7684\u6570\u636E\u5E93</strong>\u3002\u505A\u6CD5\u4E0E\u5927\u7CFB\u7EDF\u62C6\u5206\u4E3A\u591A\u4E2A\u5C0F\u7CFB\u7EDF\u7C7B\u4F3C\uFF0C\u6309\u4E1A\u52A1\u5206\u7C7B\u8FDB\u884C\u72EC\u7ACB\u5212\u5206\u3002\u6BCF\u4E2A\u5FAE\u670D\u52A1\u4F7F\u7528\u5355\u72EC\u7684\u4E00\u4E2A\u6570\u636E\u5E93</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrme94x1j30zs0msthi.jpg" alt=""></p><h3 id="\u5782\u76F4\u5206\u8868" tabindex="-1"><a class="header-anchor" href="#\u5782\u76F4\u5206\u8868" aria-hidden="true">#</a> \u5782\u76F4\u5206\u8868</h3><p>\u5782\u76F4\u5206\u8868\u662F\u57FA\u4E8E\u6570\u636E\u5E93\u4E2D\u7684**&quot;\u5217&quot;<strong>\u8FDB\u884C\uFF0C\u67D0\u4E2A\u8868\u5B57\u6BB5\u8F83\u591A\uFF0C\u53EF\u4EE5\u65B0\u5EFA\u4E00\u5F20</strong>\u6269\u5C55\u8868**\uFF0C\u5C06<strong>\u4E0D\u7ECF\u5E38\u7528</strong>\u6216<strong>\u5B57\u6BB5\u957F\u5EA6\u8F83\u5927</strong>\u7684\u5B57\u6BB5\u62C6\u5206\u51FA\u53BB\u5230\u6269\u5C55\u8868\u4E2D</p><p>\u5B57\u6BB5\u8FC7\u591A\u7684\u60C5\u51B5\u4E0B\uFF0C\u901A\u8FC7&quot;\u5927\u8868\u62C6\u5C0F\u8868&quot;\uFF0C\u66F4\u4FBF\u4E8E\u5F00\u53D1\u4E0E\u7EF4\u62A4\uFF0C\u4E5F\u80FD<strong>\u907F\u514D\u8DE8\u9875</strong>\u95EE\u9898\u3002\u56E0\u4E3AMySQL \u5E95\u5C42\u662F\u901A\u8FC7\u6570\u636E\u9875\u5B58\u50A8\u7684\uFF0C\u4E00\u6761\u8BB0\u5F55\u5360\u7528\u7A7A\u95F4\u8FC7\u5927\u4F1A\u5BFC\u81F4\u8DE8\u9875\uFF0C\u9020\u6210\u989D\u5916\u7684\u6027\u80FD\u5F00\u9500\u3002</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrmf724uj310k0gwn14.jpg" alt=""></p><h3 id="\u4F18\u7F3A\u70B9" tabindex="-1"><a class="header-anchor" href="#\u4F18\u7F3A\u70B9" aria-hidden="true">#</a> \u4F18\u7F3A\u70B9</h3><ul><li>\u4F18\u70B9 <ul><li>\u89E3\u51B3\u4E1A\u52A1\u7CFB\u7EDF\u5C42\u9762\u7684\u8026\u5408\uFF0C\u4E1A\u52A1\u6E05\u6670</li><li>\u4E0E\u5FAE\u670D\u52A1\u7684\u6CBB\u7406\u7C7B\u4F3C\uFF0C\u4E5F\u80FD\u5BF9\u4E0D\u540C\u4E1A\u52A1\u7684\u6570\u636E\u8FDB\u884C\u5206\u7EA7\u7BA1\u7406\u3001\u7EF4\u62A4\u3001\u76D1\u63A7\u3001\u6269\u5C55\u7B49</li><li>\u9AD8\u5E76\u53D1\u573A\u666F\u4E0B\uFF0C\u5782\u76F4\u5207\u5206\u4E00\u5B9A\u7A0B\u5EA6\u7684\u63D0\u5347 IO\u3001\u6570\u636E\u5E93\u8FDE\u63A5\u6570\u3001\u5355\u673A\u786C\u4EF6\u8D44\u6E90\u7684\u74F6\u9888</li></ul></li><li>\u7F3A\u70B9 <ul><li>\u90E8\u5206\u8868\u65E0\u6CD5 join\uFF0C\u53EA\u80FD\u901A\u8FC7\u63A5\u53E3\u805A\u5408\u65B9\u5F0F\u89E3\u51B3\uFF0C\u63D0\u5347\u4E86\u5F00\u53D1\u7684\u590D\u6742\u5EA6</li><li>\u5206\u5E03\u5F0F\u4E8B\u52A1\u5904\u7406\u590D\u6742*</li><li>\u4F9D\u7136\u5B58\u5728\u5355\u8868\u6570\u636E\u91CF\u8FC7\u5927\u7684\u95EE\u9898(\u9700\u8981\u6C34\u5E73\u5207\u5206)</li></ul></li></ul><h2 id="\u6C34\u5E73\u5207\u5206" tabindex="-1"><a class="header-anchor" href="#\u6C34\u5E73\u5207\u5206" aria-hidden="true">#</a> \u6C34\u5E73\u5207\u5206</h2><p>\u5F53\u4E00\u4E2A\u5E94\u7528\u96BE\u4EE5\u518D\u7EC6\u7C92\u5EA6\u7684\u5782\u76F4\u5207\u5206\uFF0C\u6216\u5207\u5206\u540E\u6570\u636E\u91CF\u884C\u6570\u5DE8\u5927\uFF0C\u5B58\u5728\u5355\u5E93\u8BFB\u5199\u3001\u5B58\u50A8\u6027\u80FD\u74F6\u9888\uFF0C\u8FD9\u65F6\u5019\u5C31\u9700\u8981\u8FDB\u884C\u6C34\u5E73\u5207\u5206\u4E86\u3002</p><p>\u8868\u5185\u6570\u636E\u5185\u5728\u7684<strong>\u903B\u8F91\u5173\u7CFB</strong>\uFF0C\u5C06\u540C\u4E00\u4E2A\u8868<strong>\u6309\u4E0D\u540C\u7684\u6761\u4EF6\u5206\u6563</strong>\u5230\u591A\u4E2A\u6570\u636E\u5E93\u6216\u591A\u4E2A\u8868\u4E2D\uFF0C\u6BCF\u4E2A\u8868\u4E2D\u53EA\u5305\u542B\u4E00\u90E8\u5206\u6570\u636E\uFF0C\u4ECE\u800C\u4F7F\u5F97<strong>\u5355\u4E2A\u8868\u7684\u6570\u636E\u91CF\u53D8\u5C0F\uFF0C\u8FBE\u5230\u5206\u5E03\u5F0F\u7684\u6548\u679C</strong>\u3002</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrmfqf5pj30u00xuwxs.jpg" alt=""></p><p>\u5E93\u5185\u5206\u8868\u53EA\u89E3\u51B3\u4E86\u5355\u4E00\u8868\u6570\u636E\u91CF\u8FC7\u5927\u7684\u95EE\u9898\uFF0C\u4F46\u6CA1\u6709\u5C06\u8868\u5206\u5E03\u5230\u4E0D\u540C\u673A\u5668\u7684\u5E93\u4E0A</p><h3 id="\u6570\u636E\u5206\u7247\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5206\u7247\u89C4\u5219" aria-hidden="true">#</a> \u6570\u636E\u5206\u7247\u89C4\u5219</h3><ol><li>\u6839\u636E\u6570\u503C<strong>\u8303\u56F4</strong>\uFF1A\u6309\u7167\u65F6\u95F4\u533A\u95F4\u6216 ID \u533A\u95F4\u6765\u5207\u5206 <ul><li>\u6309\u65E5\u671F\u5C06\u4E0D\u540C\u6708\u751A\u81F3\u662F\u65E5\u7684\u6570\u636E\u5206\u6563\u5230\u4E0D\u540C\u7684\u5E93\u4E2D</li><li>\u5C06 userId \u4E3A 1~9999 \u7684\u8BB0\u5F55\u5206\u5230\u7B2C\u4E00\u4E2A\u5E93\uFF0C10000~20000 \u7684\u5206\u5230\u7B2C\u4E8C\u4E2A\u5E93\uFF0C\u4EE5\u6B64\u7C7B\u63A8</li><li>\u5355\u8868\u5927\u5C0F\u53EF\u63A7\uFF0C\u6BCF\u4E2A\u8868\u5B58\u50A8\u7684\u6570\u636E\u91CF\u6709\u5927\u81F4\u5212\u5206</li><li>\u5929\u7136\u4FBF\u4E8E\u6C34\u5E73\u6269\u5C55\uFF0C\u540E\u671F\u5982\u679C\u60F3\u5BF9\u6574\u4E2A\u5206\u7247\u96C6\u7FA4\u6269\u5BB9\u65F6\uFF0C\u53EA\u9700\u8981\u6DFB\u52A0\u8282\u70B9\u5373\u53EF\uFF0C\u65E0\u9700\u5BF9\u5176\u4ED6\u5206\u7247\u7684\u6570\u636E\u8FDB\u884C\u8FC1\u79FB*</li><li>\u4F7F\u7528\u5206\u7247\u5B57\u6BB5\u8FDB\u884C\u8303\u56F4\u67E5\u627E\u65F6\uFF0C\u8FDE\u7EED\u5206\u7247\u53EF<strong>\u5FEB\u901F\u5B9A\u4F4D\u5206\u7247</strong>\u8FDB\u884C\u5FEB\u901F\u67E5\u8BE2\uFF0C\u6709\u6548\u907F\u514D\u8DE8\u5206\u7247\u67E5\u8BE2\u7684\u95EE\u9898</li></ul></li><li>\u6839\u636E\u6570\u503C<strong>\u53D6\u6A21</strong>\uFF1A\u4E00\u822C\u91C7\u7528 hash \u53D6\u6A21 mod \u7684\u5207\u5206\u65B9\u5F0F <ul><li>\u5C06 Customer \u8868\u6839\u636E cusno \u5B57\u6BB5\u5207\u5206\u5230 4 \u4E2A\u5E93\u4E2D\uFF0C\u4F59\u6570\u4E3A 0 \u7684\u653E\u5230\u7B2C\u4E00\u4E2A\u5E93\uFF0C\u4F59\u6570\u4E3A 1 \u7684\u653E\u5230\u7B2C\u4E8C\u4E2A\u5E93\uFF0C\u4EE5\u6B64\u7C7B\u63A8\u3002</li><li>\u6570\u636E\u5206\u7247\u76F8\u5BF9\u6BD4\u8F83\u5747\u5300\uFF0C\u4E0D\u5BB9\u6613\u51FA\u73B0\u70ED\u70B9\u548C\u5E76\u53D1\u8BBF\u95EE\u7684\u74F6\u9888</li><li>\u540E\u671F\u5206\u7247\u96C6\u7FA4\u6269\u5BB9\u65F6\uFF0C\u9700\u8981\u8FC1\u79FB\u65E7\u7684\u6570\u636E(\u4F7F\u7528\u4E00\u81F4\u6027 hash \u7B97\u6CD5\u80FD\u8F83\u597D\u7684\u907F\u514D\u8FD9\u4E2A\u95EE\u9898)*</li><li>\u5BB9\u6613\u9762\u4E34\u8DE8\u5206\u7247\u67E5\u8BE2\u7684\u590D\u6742\u95EE\u9898\u3002\u6BD4\u5982\u4E0A\u4F8B\u4E2D\uFF0C\u5982\u679C\u9891\u7E41\u7528\u5230\u7684\u67E5<strong>\u8BE2\u6761\u4EF6\u4E2D\u4E0D\u5E26</strong> cusno \u65F6\uFF0C\u5C06\u4F1A\u5BFC\u81F4<strong>\u65E0\u6CD5\u5B9A\u4F4D\u6570\u636E\u5E93</strong>\uFF0C\u4ECE\u800C\u9700\u8981\u540C\u65F6\u5411 4 \u4E2A\u5E93\u53D1\u8D77\u67E5\u8BE2\uFF0C\u518D\u5728\u5185\u5B58\u4E2D\u5408\u5E76\u6570\u636E\uFF0C\u53D6\u6700\u5C0F\u96C6\u8FD4\u56DE\u7ED9\u5E94\u7528\uFF0C\u5206\u5E93\u53CD\u800C\u6210\u4E3A\u62D6\u7D2F\u3002</li></ul></li></ol><h3 id="\u4F18\u7F3A\u70B9-1" tabindex="-1"><a class="header-anchor" href="#\u4F18\u7F3A\u70B9-1" aria-hidden="true">#</a> \u4F18\u7F3A\u70B9</h3><ul><li>\u4F18\u70B9\uFF1A <ul><li>\u4E0D\u5B58\u5728\u5355\u5E93\u6570\u636E\u91CF\u8FC7\u5927\u3001\u9AD8\u5E76\u53D1\u7684\u6027\u80FD\u74F6\u9888\uFF0C\u63D0\u5347\u7CFB\u7EDF\u7A33\u5B9A\u6027\u548C\u8D1F\u8F7D\u80FD\u529B</li><li>\u5E94\u7528\u7AEF\u6539\u9020\u8F83\u5C0F\uFF0C\u4E0D\u9700\u8981\u62C6\u5206\u4E1A\u52A1\u6A21\u5757</li></ul></li><li>\u7F3A\u70B9 <ul><li>\u8DE8\u5206\u7247\u7684\u4E8B\u52A1\u4E00\u81F4\u6027\u96BE\u4EE5\u4FDD\u8BC1</li><li>\u8DE8\u5E93\u7684 join \u5173\u8054\u67E5\u8BE2\u6027\u80FD\u8F83\u5DEE</li><li>\u6570\u636E\u591A\u6B21\u6269\u5C55\u96BE\u5EA6\u548C\u7EF4\u62A4\u91CF\u6781\u5927</li></ul></li></ul><h2 id="\u5E26\u6765\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5E26\u6765\u7684\u95EE\u9898" aria-hidden="true">#</a> \u5E26\u6765\u7684\u95EE\u9898</h2><ul><li><p>\u8DE8\u8282\u70B9\u5173\u8054\u67E5\u8BE2join\u95EE\u9898</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>1.\u5168\u5C40\u8868\u3002\u7CFB\u7EDF\u4E2D\u6240\u6709\u6A21\u5757\u90FD\u53EF\u80FD\u4F9D\u8D56\u7684\u4E00\u4E9B\u8868\uFF0C\u5C06\u8FD9\u7C7B\u8868\u5728\u6BCF\u4E2A\u6570\u636E\u5E93\u4E2D\u90FD\u4FDD\u5B58\u4E00\u4EFD\u3002\u8FD9\u4E9B\u6570\u636E\u901A\u5E38\u5F88\u5C11\u4F1A\u8FDB\u884C\u4FEE\u6539\uFF0C\u6240\u4EE5\u4E5F\u4E0D\u62C5\u5FC3\u4E00\u81F4\u6027\u7684\u95EE\u9898\u3002
2.\u5B57\u6BB5\u5197\u4F59\u3002\u7528\u7A7A\u95F4\u6362\u65F6\u95F4\uFF0C\u5982\u4FDD\u5B58id\u7684\u65F6\u5019\u987A\u4FBF\u4FDD\u5B58name\uFF0C\u8FD9\u6837\u4E0D\u9700\u8981\u6BCF\u6B21\u67E5\u8BE2\u90FD\u8981\u989D\u5916\u67E5\u8BE2\u4E00\u6B21id\u6240\u5BF9\u5E94\u7684name\uFF1B\u5C40\u9650\uFF1A\u6539\u540D
3.\u8003\u8651ER\u5206\u7247\u3002\u5982\u679C\u5206\u7247\u4E4B\u524D\u53EF\u4EE5\u5148\u786E\u5B9A\u8868\u4E0E\u8868\u4E4B\u95F4\u7684\u5173\u7CFB\uFF0C\u5E76\u5C06\u90A3\u4E9B\u5177\u6709\u5173\u8054\u5173\u7CFB\u7684\u8868\u8BB0\u5F55\u5B58\u653E\u5230\u540C\u4E00\u4E2A\u5206\u7247\u4E0A
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u8DE8\u8282\u70B9\u5206\u9875\u3001\u6392\u5E8F\u3001\u51FD\u6570\u95EE\u9898</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u5982\u679C\u9700\u8981\u8FDB\u884C\u6392\u5E8F\u6216\u7EDF\u8BA1\u6570\u91CF\u7B49\u95EE\u9898\uFF0C\u5F53\u6392\u5E8F\u5B57\u6BB5\u5C31\u662F\u5206\u7247\u5B57\u6BB5\u65F6\uFF0C\u901A\u8FC7\u5206\u7247\u89C4\u5219\u5C31\u6BD4\u8F83\u5BB9\u6613\u5B9A\u4F4D\u5230\u6307\u5B9A\u7684\u5206\u7247\uFF1B\u5F53\u6392\u5E8F\u5B57\u6BB5\u975E\u5206\u7247\u5B57\u6BB5\u65F6\uFF0C\u5C31\u53D8\u5F97\u6BD4\u8F83\u590D\u6742\u4E86\uFF0C\u9700\u8981\u5728\u4E0D\u540C\u7684\u5206\u7247\u8282\u70B9\u4E2D\u5C06\u6570\u636E\u8FDB\u884C\u6392\u5E8F\u5E76\u8FD4\u56DE\uFF0C\u7136\u540E\u5C06\u4E0D\u540C\u5206\u7247\u8FD4\u56DE\u7684\u7ED3\u679C\u96C6\u8FDB\u884C\u6C47\u603B\u548C\u518D\u6B21\u6392\u5E8F\uFF0C\u6700\u7EC8\u8FD4\u56DE\u7ED9\u7528\u6237
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u5168\u5C40\u4E3B\u952E\u552F\u4E00\u6027\u95EE\u9898</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u5206\u5E93\u540E\u4E0D\u5141\u8BB8\u4F7F\u7528\u4E3B\u952E\u81EA\u589E\u3002\u53EF\u4EE5\u91C7\u7528UUID
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u6570\u636E\u8FC1\u79FB\u3001\u6269\u5BB9\u95EE\u9898</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u5728\u4E0D\u540C\u7684\u5206\u7247\u8282\u70B9\u4E2D\u5C06\u6570\u636E\u8FDB\u884C\u6392\u5E8F\u5E76\u8FD4\u56DE\uFF0C\u7136\u540E\u5C06\u4E0D\u540C\u5206\u7247\u8FD4\u56DE\u7684\u7ED3\u679C\u96C6\u8FDB\u884C\u6C47\u603B\u548C\u518D\u6B21\u6392\u5E8F\uFF0C\u6700\u7EC8\u8FD4\u56DE\u7ED9\u7528\u6237
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h2 id="\u5207\u5206\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u5207\u5206\u573A\u666F" aria-hidden="true">#</a> \u5207\u5206\u573A\u666F</h2><ul><li><p>\u80FD\u4E0D\u5207\u5206\u5C31\u4E0D\u5207\u5206</p><ul><li>\u4F8B\u5982\uFF1A\u5347\u7EA7\u786C\u4EF6\u3001\u5347\u7EA7\u7F51\u7EDC\u3001\u8BFB\u5199\u5206\u79BB\u3001\u7D22\u5F15\u4F18\u5316\u7B49\u7B49\u3002\u5F53\u6570\u636E\u91CF\u8FBE\u5230\u5355\u8868\u7684\u74F6\u9888\u65F6\u5019\uFF0C\u518D\u8003\u8651\u5206\u5E93\u5206\u8868\u3002</li></ul></li><li><p>\u6570\u636E\u91CF\u8FC7\u5927\uFF0C\u6B63\u5E38\u8FD0\u7EF4\u5F71\u54CD\u4E1A\u52A1\u8BBF\u95EE</p><ul><li>\u6570\u636E\u5E93\u5907\u4EFD\uFF0C\u5355\u8868\u592A\u5927\uFF0C\u5907\u4EFD\u9700\u8981\u5927\u91CF\u78C1\u76D8IO\u548C\u7F51\u7EDCIO</li><li>\u5BF9\u5927\u8868\u8FDB\u884CDDL\uFF0CMySQL\u9501\u4F4F\u5168\u8868\uFF0C\u65F6\u95F4\u957F\uFF0C\u671F\u95F4\u4E1A\u52A1\u65E0\u6CD5\u8FDB\u884C</li></ul></li><li><p>\u968F\u7740\u4E1A\u52A1\u53D1\u5C55\uFF0C\u9700\u8981\u5BF9\u67D0\u4E9B\u5B57\u6BB5\u5782\u76F4\u62C6\u5206</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u4E00\u5F20\u8868100\u4E2A\u5B57\u6BB5\uFF0C\u5176\u4E2D99\u4E2A\u5B57\u6BB5\u4E0D\u9700\u8981\u7ECF\u5E38\u6539\u52A8\uFF0C\u5269\u4E0B\u76841\u4E2A\u662F\u7ECF\u5E38\u4FEE\u6539\u7684\u3002\u5982\uFF1A\u7528\u6237\u8868\u7684\u6700\u540E\u767B\u9646\u65F6\u95F4\uFF0C\u8FD9\u65F6\u5019\u53EF\u4EE5\u8003\u8651\u628A\u4E3B\u952E\u548C\u9700\u8981\u7ECF\u5E38\u4FEE\u6539\u7684\u5B57\u6BB5\u5206\u79BB\u51FA\u53BB\u6210\u4E3A\u4E00\u5F20\u72EC\u7ACB\u8868
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>\u6570\u636E\u91CF\u5FEB\u901F\u589E\u957F</p><ul><li>\u5355\u8868\u6027\u80FD\u63A5\u8FD1\u74F6\u9888\uFF0C\u9700\u8981\u8003\u8651\u6C34\u5E73\u5207\u5206</li></ul></li><li><p>\u5B89\u5168\u6027\u548C\u53EF\u7528\u6027</p><ul><li>\u4E0D\u80FD\u7275\u6D89\u5230\u5176\u4ED6\u4E1A\u52A1</li></ul></li></ul><h2 id="\u6848\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u6848\u4F8B" aria-hidden="true">#</a> \u6848\u4F8B</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>\u7528\u6237\u4E2D\u5FC3
\u8868\uFF1AUser(uid, login_name, passwd, sex, age, nickname)

\u7528\u6237\u4FA7\uFF1A
	
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u6027\u80FD\u5256\u6790" tabindex="-1"><a class="header-anchor" href="#\u6027\u80FD\u5256\u6790" aria-hidden="true">#</a> \u6027\u80FD\u5256\u6790</h1><h2 id="\u5256\u6790mysql\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u5256\u6790mysql\u67E5\u8BE2" aria-hidden="true">#</a> \u5256\u6790MySQL\u67E5\u8BE2</h2><p>\u5B9A\u4E49\u6027\u80FD\u6700\u6709\u6548\u7684\u65B9\u6CD5\u5C31\u662F\u54CD\u5E94\u65F6\u95F4</p><p>\u627E\u6E05\u695A\u95EE\u9898\u5728\u54EA\u91CC</p><h3 id="\u5256\u6790\u670D\u52A1\u5668\u8D1F\u8F7D" tabindex="-1"><a class="header-anchor" href="#\u5256\u6790\u670D\u52A1\u5668\u8D1F\u8F7D" aria-hidden="true">#</a> \u5256\u6790\u670D\u52A1\u5668\u8D1F\u8F7D</h3><p>\u5B9A\u4F4D\u548C\u67E5\u8BE2\u201C\u574F\u201D\u67E5\u8BE2\u80FD\u591F\u663E\u8457\u63D0\u5347\u5E94\u7528\u7684\u6027\u80FD\uFF1B\u53EF\u4EE5\u53CA\u65F6\u53D1\u73B0\u548C\u5B9A\u4F4D\u7CDF\u7CD5\u7684\u7528\u6237\u4F53\u9A8C\uFF1B\u964D\u4F4E\u670D\u52A1\u5668\u7684\u538B\u529B\uFF0C\u63A8\u8FDF\u6216\u907F\u514D\u4E86\u670D\u52A1\u5668\u6602\u8D35\u7684\u5347\u7EA7\u9700\u6C42\uFF1B</p><h4 id="\u6355\u83B7mysql\u7684\u67E5\u8BE2\u5230\u65E5\u5FD7\u6587\u4EF6\u4E2D" tabindex="-1"><a class="header-anchor" href="#\u6355\u83B7mysql\u7684\u67E5\u8BE2\u5230\u65E5\u5FD7\u6587\u4EF6\u4E2D" aria-hidden="true">#</a> \u6355\u83B7MySQL\u7684\u67E5\u8BE2\u5230\u65E5\u5FD7\u6587\u4EF6\u4E2D</h4><ul><li>\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E<code>long_query_time</code>\u4E3A0\u6765\u6355\u83B7\u6240\u6709\u7684\u67E5\u8BE2</li><li>\u6162\u67E5\u8BE2\u5E26\u6765\u7684IO\u5F00\u9500\u53EF\u4EE5\u5FFD\u7565\u4E0D\u8BA1</li></ul><h3 id="\u5256\u6790\u5355\u6761\u8BB0\u5F55" tabindex="-1"><a class="header-anchor" href="#\u5256\u6790\u5355\u6761\u8BB0\u5F55" aria-hidden="true">#</a> \u5256\u6790\u5355\u6761\u8BB0\u5F55</h3><h4 id="\u4F7F\u7528show-profile" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528show-profile" aria-hidden="true">#</a> \u4F7F\u7528show profile</h4><ul><li>\u4F7F\u7528<code>set profiling = 1</code>\u540E\u5728\u670D\u52A1\u5668\u4E0A\u6267\u884C\u7684\u6240\u6709\u8BED\u53E5\uFF0C\u90FD\u4F1A\u6D4B\u91CF\u5176\u8017\u8D39\u7684\u65F6\u95F4</li><li>\u4F7F\u7528<code>show profiles</code>\uFF0C\u5B83\u4F1A\u5217\u51FA\u4E4B\u524D\u6240\u6709\u7684\u8BED\u53E5\u7684ID\u3001\u603B\u65F6\u957F\u3001\u5BF9\u5E94\u7684\u8BED\u53E5</li><li>\u4F7F\u7528<code>show profile for query Id</code> \u53EF\u4EE5\u67E5\u8BE2\u5230\u7279\u5730\u7684\u8BED\u53E5\u67E5\u8BE2\u6267\u884C\u7684<strong>\u6BCF\u4E2A\u6B65\u9AA4\u53CA\u5176\u82B1\u8D39\u7684\u65F6\u95F4</strong></li><li>\u4E00\u822C\u4E0D\u5EFA\u8BAE\u5728<strong>\u4F18\u5316\u6392\u5E8F\u7F13\u51B2\u533A</strong>\u7684\u65B9\u9762\u4F18\u5316</li><li><strong>\u5256\u6790\u62A5\u544A\u80FD\u5E2E\u52A9\u6211\u4EEC\u5B9A\u4F4D\u5230\u6BCF\u4E2A\u6D3B\u52A8\u82B1\u8D39\u7684\u65F6\u95F4\uFF0C\u4F46\u662F\u5E76\u4E0D\u4F1A\u544A\u8BC9\u539F\u56E0</strong></li></ul><h4 id="\u4F7F\u7528show-status" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528show-status" aria-hidden="true">#</a> \u4F7F\u7528show status</h4><ul><li>\u4F7F\u7528<code>show global status</code>\u53EF\u4EE5\u67E5\u770B<strong>\u670D\u52A1\u5668\u7EA7\u522B\u7684</strong>\u4ECE\u670D\u52A1\u5668\u542F\u52A8\u65F6\u5F00\u59CB\u8BA1\u7B97\u7684\u67E5\u8BE2\u6B21\u6570\u7EDF\u8BA1</li><li>\u6CE8\u610F\u533A\u5206\u5217\u51FA\u7684\u53D8\u91CF\u662F\u5168\u5C40\u7EA7\u522B\u8FD8\u662F\u4F1A\u8BDD\u7EA7\u522B</li><li><code>Handler_read_rnd_next</code>\u6CA1\u6709\u7528\u5230\u7D22\u5F15\u7684\u8BFB\u64CD\u4F5C</li><li>\u4F7F\u7528<code>explain</code>\u4E5F\u53EF\u4EE5\u5F97\u5230\u5927\u81F4\u76F8\u540C\u7684\u7ED3\u679C\uFF0C\u4F46\u662Fexplain\u662F\u901A\u8FC7\u4F30\u8BA1\u7684\uFF0Cshow status\u662F\u901A\u8FC7\u6D4B\u91CF\u7684\uFF0C\u7ED3\u679C\u66F4\u52A0\u7CBE\u51C6\uFF0C\u5B83\u65E0\u6CD5\u544A\u77E5\u4E34\u65F6\u8868\u662F\u78C1\u76D8\u8868\u8FD8\u662F\u5185\u5B58\u4E34\u65F6\u8868\u7B49\u3002</li></ul><h4 id="\u4F7F\u7528\u6162\u67E5\u8BE2\u65E5\u5FD7" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u6162\u67E5\u8BE2\u65E5\u5FD7" aria-hidden="true">#</a> \u4F7F\u7528\u6162\u67E5\u8BE2\u65E5\u5FD7</h4><h1 id="schema\u4E0E\u6570\u636E\u7C7B\u578B\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#schema\u4E0E\u6570\u636E\u7C7B\u578B\u4F18\u5316" aria-hidden="true">#</a> Schema\u4E0E\u6570\u636E\u7C7B\u578B\u4F18\u5316</h1><h2 id="\u9009\u62E9\u4F18\u5316\u7684\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u9009\u62E9\u4F18\u5316\u7684\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> \u9009\u62E9\u4F18\u5316\u7684\u6570\u636E\u7C7B\u578B</h2><ul><li><strong>\u66F4\u5C0F</strong>\u7684\u901A\u5E38\u66F4\u597D\uFF1A\u9009\u62E9\u53EF\u4EE5\u6B63\u786E\u5B58\u50A8\u7684\u6700\u5C0F\u6570\u636E\u7C7B\u578B\uFF0C\u66F4\u5C0F\u7684\u901A\u5E38\u66F4\u5FEB\uFF0C\u5360\u7528\u66F4\u5C11CPU\u548C\u78C1\u76D8\u548C\u5185\u5B58</li><li><strong>\u7B80\u5355</strong>\u5C31\u597D\uFF1A\u7B80\u5355\u7684\u6570\u636E\u7C7B\u578B\u7684\u64CD\u4F5C\u901A\u5E38<strong>\u9700\u8981\u66F4\u5C11\u7684CPU\u5468\u671F</strong>\u3002\u56E0\u4E3A\u5B57\u7B26\u96C6\u548C\u6392\u5E8F\u89C4\u5219\u4F7F\u5F97\u5B57\u7B26\u6BD4\u6574\u578B\u66F4\u52A0\u590D\u6742</li><li>\u5C3D\u91CF<strong>\u907F\u514DNULL</strong>\uFF1A\u5C3D\u91CF\u6307\u5B9A\u4E3ANOT NULL\uFF0C\u9664\u975E\u771F\u7684\u9700\u8981NULL\u3002\u56E0\u4E3ANULL\u4F7F\u5F97\u7D22\u5F15\u3001\u7D22\u5F15\u7EDF\u8BA1\u548C\u503C\u6BD4\u8F83\u90FD\u6BD4\u8F83\u590D\u6742\u3002\u53EF\u4E3ANULL\u7684\u5217\u4F1A\u4F7F\u7528\u66F4\u591A\u7684\u5B58\u50A8\u7A7A\u95F4\uFF0C\u9700\u8981\u7279\u6B8A\u5904\u7406\uFF1B\u53EF\u4E3ANULL\u7684\u5217\u88AB\u7D22\u5F15\u65F6\uFF0C\u6BCF\u4E2A\u7D22\u5F15\u8BB0\u5F55\u9700\u8981\u4E00\u4E2A\u989D\u5916\u7684\u5B57\u8282\u3002\u6240\u4EE5\u5EFA\u7D22\u5F15\u5E94\u907F\u514D\u53EF\u4E3ANULL\u7684\u5217</li></ul><h1 id="\u6027\u80FD\u4F18\u5316" tabindex="-1"><a class="header-anchor" href="#\u6027\u80FD\u4F18\u5316" aria-hidden="true">#</a> \u6027\u80FD\u4F18\u5316</h1><h2 id="\u5177\u4F53\u505A\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5177\u4F53\u505A\u6CD5" aria-hidden="true">#</a> \u5177\u4F53\u505A\u6CD5</h2><ol><li>\u67E5\u8BE2\u65F6\u5982\u679C\u5DF2\u77E5\u4F1A\u5F97\u5230\u4E00\u6761\u6570\u636E\uFF0C\u8FD9\u79CD\u60C5\u51B5\u4E0B\u52A0\u4E0A<code> limit 1</code> \u4F1A\u589E\u52A0\u6027\u80FD\u3002<strong>\u56E0\u4E3A mysql \u6570\u636E\u5E93\u5F15\u64CE\u4F1A\u5728\u627E\u5230\u4E00\u6761\u7ED3\u679C\u505C\u6B62\u641C\u7D22</strong>\uFF0C\u800C\u4E0D\u662F\u7EE7\u7EED\u67E5\u8BE2\u4E0B\u4E00\u6761\u662F\u5426\u7B26\u5408\u6807\u51C6\u76F4\u5230\u6240\u6709\u8BB0\u5F55\u67E5\u8BE2\u5B8C\u6BD5</li><li>\u7528 <code>not exists</code> \u4EE3\u66FF <code>not in</code>\u3002<code>not exists</code> \u7528\u5230\u4E86\u8FDE\u63A5\u80FD\u591F\u53D1\u6325\u5DF2\u7ECF\u5EFA\u7ACB\u597D\u7684\u7D22\u5F15\u7684\u4F5C\u7528\uFF0C<code>not in</code> \u4E0D\u80FD\u4F7F\u7528\u7D22\u5F15\u3002<strong><code>not in </code>\u662F\u6700\u6162\u7684\u65B9\u5F0F\uFF0C\u8981\u540C\u6BCF\u6761\u8BB0\u5F55\u6BD4\u8F83</strong>\uFF0C\u5728\u6570\u636E\u91CF\u6BD4\u8F83\u5927\u7684\u64CD\u4F5C\u4E2D\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F\u3002</li><li>\u5BF9\u4E8E\u591A\u5F20\u5927\u6570\u636E\u91CF(\u8FD9\u91CC\u51E0\u767E\u6761\u5C31\u7B97\u5927\u4E86)\u7684\u8868 JOIN\uFF0C<strong>\u8981\u5148\u5206\u9875\u518D JOIN</strong>\uFF0C\u5426\u5219\u903B\u8F91\u8BFB\u4F1A\u5F88\u9AD8\uFF0C\u6027\u80FD\u5F88\u5DEE</li><li>\u67E5\u8BE2\u65F6exists\u9002\u7528\u4E8Eb\u8868(\u5728exists\u6216\u8005in\u4E2D\u51FA\u73B0\u7684)\u6BD4A\u8868\u5927\u7684\u60C5\u51B5\uFF0C\u53CD\u4E4B\u9002\u7528in</li><li>\u624B\u673A\u53F7\u7801\u5B58\u50A8\u7528<code>BIGINT</code>\u3002\u56E0\u4E3ACHAR\u6216\u8005VARCHAR\uFF0C\u5360\u7528\u7A7A\u95F4\u5927\uFF0C\u5F71\u54CD\u67E5\u8BE2\u6027\u80FD\u300211\u4F4D\u624B\u673A\u53F7CHAR\u5B58\u50A8\uFF0C<strong>utf8\u7F16\u7801\uFF0C\u5219\u5360\u752833\u4E2A\u5B57\u8282</strong>\uFF1B\u4F7F\u7528\u5982\u679C\u4F7F\u7528INT\u7684\u8BDD\uFF0C<strong>INT\u6700\u5927\u53EA\u80FD\u4FDD\u5B5810\u4E3A\u6570\u636E</strong>\uFF0C\u800C\u624B\u673A\u53F7\u4E3A11\u4F4D\uFF0C\u4F1A\u51FA\u73B0\u6EA2\u51FA\uFF0C\u6240\u4EE5\u4F7F\u7528<strong>BIGINT\u5360\u75288\u4E2A\u5B57\u8282\uFF0C\u652F\u630111\u4F4D\u6570\u636E\u5B58\u50A8</strong>\u3002</li><li>IP\u5730\u5740\u5B58\u50A8\u7528\u65E0\u7B26\u53F7<code>INT</code>\u3002<code>INET_ATON()</code>\u8D1F\u8D23\u628AIP\u8F6C\u6210\u6570\u5B57\uFF1B<code>INET_NTOA()</code>\u8D1F\u8D23\u628A\u6570\u5B57\u8F6C\u4E3AIP\uFF0C\u7528\u65E0\u7B26\u53F7INT\u662F\u4E3A\u4E86\u9632\u6B62\u6570\u636E\u6EA2\u51FA</li></ol><h2 id="\u7D22\u5F15\u907F\u96F7" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u907F\u96F7" aria-hidden="true">#</a> \u7D22\u5F15\u907F\u96F7</h2><ol><li><p>\u4E0D\u6EE1\u8DB3\u6700\u5DE6\u7D22\u5F15\u5339\u914D\u539F\u5219</p></li><li><p>\u5982\u679C\u4F7F\u7528 <code>select *</code> \u4F46\u662F\u6CA1\u6709\u6709\u6548\u547D\u4E2D\u7EC4\u5408\u7D22\u5F15\uFF0C\u5C3D\u91CF\u4F7F\u5F97\u67E5\u8BE2\u7684\u5217\u547D\u4E2D\u7EC4\u5408\u7D22\u5F15\u8BA9\u67E5\u8BE2\u8D70 <code>\u5168\u7D22\u5F15\u626B\u63CF</code> \uFF0C\u6BD4 <code>\u5168\u8868\u626B\u63CF</code> \u8981\u5FEB\uFF0C\u539F\u7406\u662F <code>\u7D22\u5F15\u8986\u76D6</code></p></li><li><p>\u67E5\u8BE2\u8BED\u53E5\u4E2D\u7D22\u5F15\u5217\u4F7F\u7528\u4E86\u51FD\u6570\u3001\u8FDB\u884C\u4E86\u8FD0\u7B97\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</p></li><li><p>\u6570\u636E\u7C7B\u578B\u51FA\u73B0\u9690\u5F0F\u8F6C\u5316(\u5982varchar\u4E0D\u52A0\u5355\u5F15\u53F7\u7684\u8BDD\u53EF\u80FD\u4F1A\u81EA\u52A8\u8F6C\u6362\u4E3Aint\u578B)\uFF0C\u7C7B\u578B\u4E0D\u4E00\u81F4\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</p></li><li><p>like\u7684\u6761\u4EF6\u5DE6\u8FB9\u5305\u542B <code>%</code> \u5BFC\u81F4\u7D22\u5F15\u5931\u6548</p></li><li><p>where \u8BED\u53E5\u4E2D\u4E24\u4E2A\u7D22\u5F15\u5217\u8FDB\u884C\u6BD4\u8F83\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</p></li><li><p>OR \u8BED\u53E5\u524D\u540E\u6761\u4EF6\u6CA1\u6709\u540C\u65F6\u4F7F\u7528\u7D22\u5F15\u5BFC\u81F4\u7D22\u5F15\u5931\u6548</p></li><li><p><code>not in</code> \u3001<code>not exist</code> \u6761\u4EF6\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\uFF0C<code>not in</code> <strong>\u4E0D\u4F1A\u8BA9\u4E3B\u952E\u7D22\u5F15\u5931\u6548</strong></p></li><li><p><code>order by</code> \u7684\u60C5\u51B5\uFF0Cwhere \u548C limit \u5FC5\u987B\u81F3\u5C11\u8981\u6709\u4E00\u4E2A</p><ol><li><p>\u4E0D\u4F7F\u7528 where \uFF0C\u4F46\u662F\u4F7F\u7528 limit \uFF0Corder by \u540E\u9762\u7684\u6761\u4EF6\u9075\u5FAA\u8054\u5408\u7D22\u5F15\u7684\u6700\u5DE6\u5339\u914D\u539F\u5219\u80FD\u547D\u4E2D\u7D22\u5F15</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select * from user
order by code,age,name
limit 100;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4F7F\u7528 where \uFF0C\u4E0D\u4F7F\u7528 limit\uFF0Corder by \u53EF\u4EE5\u548C where \u4E00\u8D77\u9075\u5FAA\u6700\u5DE6\u5339\u914D\u539F\u5219\uFF1B\u5982\u679C\u5339\u914D\u65AD\u5C42\u7684\u8BDD\uFF08\u6BD4\u5982\u547D\u4E2D\u7B2C\u4E00\u7B2C\u4E09\u4E2A\u7D22\u5F15\uFF09\uFF0C\u8FD8\u662F\u80FD\u547D\u4E2D\u7D22\u5F15\uFF0C\u4F46\u662F\u9700\u8981\u518D\u505A\u4E00\u6B21 <code>filesort</code> \u6392\u5E8F</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select * from user
where code=&#39;101&#39;
order by name;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>order by \u591A\u4E2A\u6761\u4EF6\u9700\u8981\u4FDD\u6301\u76F8\u540C\u7684\u6392\u5E8F\u624D\u53EF\u4EE5\u547D\u4E2D\u7D22\u5F15</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select * from user
order by code desc,age desc
limit 100;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4E0D\u53EF\u4EE5\u5BF9\u4E0D\u540C\u7684\u7D22\u5F15\u8FDB\u884C\u6392\u5E8F\uFF0C\u4F1A\u5BFC\u81F4\u7D22\u5F15\u5931\u6548\uFF0C\u8FDB\u884C\u5168\u8868\u626B\u63CF</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>explain select * from user
order by code, height
limit 100;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ol><h1 id="mysql\u6267\u884C\u6D41\u7A0B\u4E0E\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#mysql\u6267\u884C\u6D41\u7A0B\u4E0E\u67B6\u6784" aria-hidden="true">#</a> MySQL\u6267\u884C\u6D41\u7A0B\u4E0E\u67B6\u6784</h1><h2 id="\u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u6267\u884C\u7684\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u6267\u884C\u7684\u6D41\u7A0B" aria-hidden="true">#</a> \u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u6267\u884C\u7684\u6D41\u7A0B</h2><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200913145650.png" alt=""></p><h3 id="\u5BA2\u6237\u7AEF-client" tabindex="-1"><a class="header-anchor" href="#\u5BA2\u6237\u7AEF-client" aria-hidden="true">#</a> \u5BA2\u6237\u7AEF(Client)</h3><p>\u8FDE\u63A5\u6570\u636E\u5E93\u65B9\u5F0F\uFF1A</p><h4 id="\u540C\u6B65\u6216\u5F02\u6B65" tabindex="-1"><a class="header-anchor" href="#\u540C\u6B65\u6216\u5F02\u6B65" aria-hidden="true">#</a> \u540C\u6B65\u6216\u5F02\u6B65</h4><ul><li>\u540C\u6B65\uFF1A<strong>\u5927\u90E8\u5206\u65F6\u95F4\u4F7F\u7528</strong>\u3002</li><li>\u5F02\u6B65\uFF1A <ul><li>\u5BA2\u6237\u7AEF\u5F02\u6B65\u8FDE\u63A5\u670D\u52A1\u7AEF\uFF0C \u5E76\u4E0D\u80FD\u51CF\u5C11sql\u6267\u884C\u65F6\u95F4\uFF0C\u53EA\u662F\u8282\u7701\u4E86\u7B49\u5F85\u65F6\u95F4\u3002</li><li>\u5982\u679C\u5F02\u6B65\u8FDE\u63A5\u6570\u636E\u5E93\u5B58\u5728\u5E76\u53D1\uFF0C\u4E0D\u80FD\u5171\u7528\u4E00\u4E2A\u8FDE\u63A5\uFF0C\u5426\u5219\u4F1A\u9020\u6210\u6570\u636E\u6DF7\u4E71\u3002\u4E5F\u5C31\u662F\u6BCF\u4E2Asql\u6267\u884C\u7684\u65F6\u5019\u90FD\u8981\u5EFA\u7ACB\u4E00\u4E2A\u5355\u72EC\u7684\u8FDE\u63A5\uFF0C\u4F46\u662F\u8FD9\u79CD\u505A\u6CD5\u4F1A\u7ED9\u670D\u52A1\u7AEF\u5E26\u6765\u5DE8\u5927\u7684\u538B\u529B\uFF0C\u56E0\u4E3A\u5728\u670D\u52A1\u7AEF\u6765\u8BF4\uFF0C\u6BCF\u4E00\u4E2A\u8FDE\u63A5\u5C31\u662F\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u7EBF\u7A0B\u95F4\u7684\u5207\u6362\u4F1A\u5360\u7528CPU\u7684\u8D44\u6E90\u3002</li><li>\u53E6\u5916\u5F02\u6B65\u901A\u4FE1\u5BF9\u5F00\u53D1\u4EBA\u5458\u6765\u8BF4\uFF0C\u589E\u52A0\u5F00\u53D1\u7684\u590D\u6742\u5EA6\uFF0C\u6240\u4EE5\u4E00\u822C\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u5F02\u6B65\u8FDE\u63A5</li></ul></li></ul><h4 id="\u8FDE\u63A5\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u8FDE\u63A5\u65B9\u5F0F" aria-hidden="true">#</a> \u8FDE\u63A5\u65B9\u5F0F</h4><ul><li>\u957F\u8FDE\u63A5\uFF1A\u6301\u7EED\u4FDD\u6301\u8FDE\u63A5\u6253\u5F00\uFF0C\u51CF\u5C11\u670D\u52A1\u7AEF\u9891\u7E41\u5730\u521B\u5EFA\u548C\u91CA\u653E\u8FDE\u63A5\u6240\u9020\u6210\u7684\u6D88\u8017\uFF0C\u540E\u7EED\u7A0B\u5E8F\u8FD8\u53EF\u4EE5\u7EE7\u7EED\u4F7F\u7528\u8FD9\u4E2A\u8FDE\u63A5\u3002\u4F46\u662F\u957F\u65F6\u95F4\u8FDE\u63A5\u4E0D\u64CD\u4F5C\u4E5F\u4F1A\u65AD\u5F00\u8FDE\u63A5\u3002 <ul><li><strong>jdbc\u9ED8\u8BA48\u5C0F\u65F6\u6CA1\u6709\u6D3B\u52A8\u5C31\u65AD\u5F00</strong></li><li>\u975E\u4EA4\u4E92\u5F0F\u5BA2\u6237\u7AEF\u8FDE\u63A5(shell)\uFF1A<code>show global variables like &quot;wait_timeout&quot;;</code></li><li>\u4EA4\u4E92\u5F0F\u5BA2\u6237\u7AEF\u8FDE\u63A5(navicat)\uFF1A<code>show global variables like &quot;interactive_timeout&quot;;</code></li><li>\u67E5\u770B\u8FDE\u63A5\u6570\uFF1A<code>netstat -an|grep 3306|wc -l</code> \u6216 <code>show full processlist</code></li><li>\u9ED8\u8BA4\u6700\u5927\u8FDE\u63A5\u6570151\u4E2A\uFF1A<code>show global variables like &quot;max_connections&quot;;</code></li><li>\u4FEE\u6539\u65B9\u5F0F\uFF1A\u52A8\u6001\u4FEE\u6539 <code>set variables &quot;max_connnections = 1000&quot;</code>\uFF0C\u4E00\u65E6\u5173\u95ED\u5C31\u4F1A\u5237\u65B0\u5230\u4EE5\u524D\u7684\u503C\uFF1B\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6 <code>/etc/my.cnf</code> \u6C38\u4E45\u4FEE\u6539</li></ul></li><li>\u77ED\u8FDE\u63A5\uFF1A\u64CD\u4F5C\u5B8C\u6BD5\u540E\uFF0C\u8FDE\u63A5\u9A6C\u4E0A\u5173\u95ED\uFF0C\u91CA\u653E\u8D44\u6E90\u3002</li></ul><h4 id="\u901A\u4FE1\u534F\u8BAE" tabindex="-1"><a class="header-anchor" href="#\u901A\u4FE1\u534F\u8BAE" aria-hidden="true">#</a> \u901A\u4FE1\u534F\u8BAE</h4><ul><li>TCP/IP\uFF1A <ul><li>\u9A71\u52A8\u7684jar\u5305\u8FDE\u63A5\u6570\u636E\u5E93</li></ul></li><li>Unix Socket\uFF1A <ul><li>\u672C\u5730\u547D\u4EE4\u884C\u7684\u8FDE\u63A5\uFF0C\u4E0D\u8D70\u7F51\u7EDC\u534F\u8BAE\u3002\u4F7F\u7528\u7269\u7406\u6587\u4EF6</li></ul></li></ul><h4 id="\u901A\u4FE1\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u901A\u4FE1\u65B9\u5F0F" aria-hidden="true">#</a> \u901A\u4FE1\u65B9\u5F0F</h4><ul><li>\u5355\u5DE5 \uFF1A\u6570\u636E\u5355\u5411\u4F20\u8F93\uFF1A\u5E7F\u64AD\u3002</li><li>\u534A\u53CC\u5DE5\uFF1A\u6570\u636E\u53CC\u5411\u4F20\u8F93\uFF0C\u4F46\u662F\u4E0D\u80FD\u540C\u65F6\u4F20\u8F93\uFF1A\u4F20\u547C\u673A\u3002</li><li>\u5168\u53CC\u5DE5\uFF1A\u6570\u636E\u53CC\u5411\u4F20\u8F93\uFF0C\u53EF\u4EE5\u540C\u65F6\u4F20\u8F93\uFF1A\u624B\u673A\u3002</li><li><strong>mysql\u91C7\u7528\u7684\u662F\u534A\u53CC\u5DE5\u901A\u4FE1\u65B9\u5F0F</strong></li></ul><h3 id="\u67E5\u8BE2\u7F13\u5B58-query-cache" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u7F13\u5B58-query-cache" aria-hidden="true">#</a> \u67E5\u8BE2\u7F13\u5B58(Query Cache)</h3><p>\u5E94\u7528\u573A\u666F\uFF1A</p><ol><li>\u67E5\u8BE2\u7684sql\u8BED\u53E5\u5FC5\u987B\u662F<strong>\u4E00\u6837</strong>\u7684</li><li>\u5982\u679Cupdate\u4E86\u8868\u4E2D\u6570\u636E\uFF0C\u6574\u4E2A\u8868\u6240\u6709\u6570\u636E\u7684\u7F13\u5B58\u90FD\u88AB\u6E05\u7A7A</li></ol><p>\u5E94\u7528\u573A\u666F\u72ED\u9698\uFF0C5.7\u7248\u672C\u9ED8\u8BA4\u5173\u95ED\uFF0C8.0\u7248\u672C\u540E\u5F03\u7528\u3002\u4F7F\u7528\u72EC\u7ACB\u7684\u7F13\u5B58\uFF0C\u5982ORM\u7B49</p><h3 id="\u89E3\u6790\u5668-parse" tabindex="-1"><a class="header-anchor" href="#\u89E3\u6790\u5668-parse" aria-hidden="true">#</a> \u89E3\u6790\u5668 (Parse)</h3><ul><li>\u8BCD\u6CD5\u89E3\u6790\uFF1A\u628A\u8BED\u53E5\u4E2D\u5173\u952E\u8BCD\u3001\u8868\u540D\u3001\u5B57\u6BB5\u540D\u7B49\u5185\u5BB9\u62C6\u5206\u6210\u4E00\u4E2A\u4E00\u4E2A\u5355\u8BCD</li><li>\u8BED\u6CD5\u89E3\u6790\uFF1A\u68C0\u67E5sql\u7684\u8BED\u6CD5\u3002\u62EC\u53F7\u3001\u5F15\u53F7\u6709\u6CA1\u6709\u95ED\u5408\u3001\u5206\u53F7\u7B49\u3002</li><li>\u6700\u7EC8\u5F97\u5230\u7684\u662F\u4E00\u9897<strong>\u89E3\u6790\u6811</strong><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200913133105.png" alt=""></li><li>\u79F0\u4E3A<strong>\u786C\u89E3\u6790</strong></li></ul><h3 id="\u9884\u5904\u7406\u5668-preprocessor" tabindex="-1"><a class="header-anchor" href="#\u9884\u5904\u7406\u5668-preprocessor" aria-hidden="true">#</a> \u9884\u5904\u7406\u5668(Preprocessor)</h3><ul><li>\u8BED\u4E49\u89E3\u6790\uFF1A\u68C0\u67E5\u6570\u636E\u5E93\u3001\u8868\u540D\u3001\u5B57\u6BB5\u540D\u662F\u5426\u5B58\u5728\uFF0C\u662F\u5426\u7528\u5230alias\uFF0C<strong>\u4FDD\u8BC1\u6CA1\u6709\u6B67\u4E49</strong>\u3002\u5F97\u5230\u65B0\u7684\u89E3\u6790\u6811</li></ul><h3 id="\u67E5\u8BE2\u4F18\u5316\u5668-query-optimizer" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u4F18\u5316\u5668-query-optimizer" aria-hidden="true">#</a> \u67E5\u8BE2\u4F18\u5316\u5668(Query Optimizer)</h3><ul><li>\u4E00\u6761sql\u8BED\u53E5\u4E0D\u53EA\u6709\u4E00\u79CD\u6267\u884C\u65B9\u5F0F\uFF0C\u6700\u7EC8\u6709\u76F8\u540C\u7ED3\u679C\uFF0C\u5B58\u5728<strong>\u5F00\u9500\u4E0A\u7684\u5DEE\u5F02</strong></li><li><code>\u57FA\u4E8Ecost(\u5F00\u9500)</code> \u7684\u4F18\u5316\u5668 \uFF0C<strong>\u4F1A\u9009\u62E9\u4E00\u79CD\u5F00\u9500\u6700\u5C0F\u7684\u67E5\u8BE2\u65B9\u5F0F</strong></li><li>\u4F18\u5316\u540E\u7684\u7ED3\u679C\u662F<strong>\u67E5\u8BE2\u6267\u884C\u8BA1\u5212</strong>\u3002\u5E76\u4E0D\u4E00\u5B9A\u662F\u6700\u4F18\u7684\u6267\u884C\u8BA1\u5212</li><li>\u67E5\u770B\u6267\u884C\u8BA1\u5212 <code>explain</code> \u67E5\u8BE2\u8BED\u53E5 <ul><li><code>possible_key</code>\u4EE3\u8868\u53EF\u80FD\u7528\u5230\u7684\u7D22\u5F15</li><li><code>key</code>\u4EE3\u8868\u5B58\u50A8\u5F15\u64CE\u8BA4\u4E3A\u5F97\u5230\u7ED3\u679C\u9700\u8981\u626B\u63CF\u7684\u884C\u6570(\u9884\u4F30)</li><li><code>rows</code>\u4EE3\u8868\u67E5\u8BE2\u5230\u7ED3\u679C\u9700\u8981\u68C0\u7D22\u591A\u5C11\u884C</li><li><code>Extra</code><ul><li><code>Using index</code>\u4EE3\u8868\u8986\u76D6\u7D22\u5F15\uFF0C\u4E0D\u9700\u8981\u56DE\u8868</li><li><code>Using where</code>\u4EE3\u8868\u5728Server\u5C42\u8FDB\u884C\u4E86\u6570\u636E\u8FC7\u6EE4\u3002\u7D22\u5F15\u7684\u6BD4\u8F83\u53D1\u751F\u5728\u5B58\u50A8\u5F15\u64CE\u5C42\uFF0C\u5982\u679C\u7ED3\u679C\u5E76\u4E0D\u6EE1\u8DB3\u67E5\u627E\u9700\u6C42\uFF0C\u90A3\u4E48\u9700\u8981\u7AD9\u5728Server\u5C42\u8FDB\u884C\u518D\u4E00\u6B65\u7684\u8FC7\u6EE4</li><li><code>Using index condition</code>\u4EE3\u8868\u4F7F\u7528\u4E86\u7D22\u5F15\u4E0B\u63A8</li></ul></li></ul></li></ul><h3 id="\u5B58\u50A8\u5F15\u64CE-store-engine" tabindex="-1"><a class="header-anchor" href="#\u5B58\u50A8\u5F15\u64CE-store-engine" aria-hidden="true">#</a> \u5B58\u50A8\u5F15\u64CE(Store Engine)</h3><p><strong>\u5B58\u50A8\u5F15\u64CE\u53EF\u4EE5\u7406\u89E3\u6210\u8868\u7684\u7C7B\u578B</strong>\uFF0C\u5982\uFF1AInnoDB\u3001MyISAM\u7B49</p><p>mysql5.5\u7248\u672C\u540E\u9ED8\u8BA4\u7684\u5B58\u50A8\u5F15\u64CE\u662FInnoDB</p><ul><li>InnoDB <ul><li>\u652F\u6301\u4E8B\u52A1</li><li>\u652F\u6301\u5916\u952E</li><li>\u652F\u6301\u884C\u7EA7\u522B\u7684\u9501\u548C\u8868\u7EA7\u522B\u7684\u9501</li><li>\u652F\u6301\u8BFB\u3001\u5199\u7684\u5E76\u53D1\u64CD\u4F5C</li><li>\u6709\u7279\u6B8A\u7684\u7D22\u5F15\u5B58\u653E\u65B9\u5F0F\uFF0C\u51CF\u5C11\u670D\u52A1\u7AEF\u548C\u78C1\u76D8\u7684IO\u6B21\u6570\uFF0C\u63D0\u5347\u6548\u7387</li></ul></li><li>MyISAM <ul><li>\u4E0D\u652F\u6301\u4E8B\u52A1</li><li>\u62E5\u6709\u6BD4\u8F83\u9AD8\u7684\u63D2\u5165\u548C\u67E5\u8BE2\u7684\u901F\u5EA6</li><li>\u652F\u6301\u8868\u7EA7\u522B\u7684\u9501\uFF0C\u66F4\u65B0\u6570\u636E\u65F6\u4F1A\u9501\u8868</li><li>\u4F1A\u5B58\u50A8\u8868\u4E2D\u6570\u636E\u7684\u884C\u6570\uFF0C\u6240\u4EE5\u6267\u884C<code>count</code>\u7684\u901F\u5EA6\u5F88\u5FEB\uFF0C\u65F6\u95F4\u590D\u6742\u5EA6\u4E3AO(1)</li></ul></li><li>Memory <ul><li>\u628A\u6240\u6709\u6570\u636E\u53EA\u5B58\u50A8\u5230\u5185\u5B58\u91CC\u9762\uFF0C\u64CD\u4F5C\u6570\u636E\u6548\u7387\u975E\u5E38\u9AD8</li><li>\u6570\u636E\u5E93\u4E00\u65E6\u91CD\u542F/\u5D29\u6E83\uFF0C\u6570\u636E\u4F1A\u4E22\u5931</li><li>\u901A\u5E38\u4F5C\u4E3A\u4E34\u65F6\u7684\u5B58\u50A8(\u4E34\u65F6\u8868)</li></ul></li><li>CSV <ul><li>\u9017\u53F7\u5206\u9694\uFF0C\u4E0D\u5141\u8BB8\u7A7A\u884C\uFF0C\u6613\u4E8E\u7F16\u8F91</li><li>\u4E00\u822C\u7528\u4E8E\u5BFC\u5165\u5BFC\u51FA\u6570\u636E</li></ul></li><li>Archive <ul><li>\u7D27\u51D1\u3001\u6CA1\u6709\u7D22\u5F15</li><li>\u4E00\u822C\u7528\u4E8E\u68C0\u7D22\u5927\u91CF\u7684\u5386\u53F2\u6570\u636E/\u4E0D\u4F1A\u53D1\u751F\u53D8\u52A8\u7684\u6570\u636E</li></ul></li></ul><p>\u67E5\u770B\u6570\u636E\u5E93\u4E2D\u8868\u7684\u5B58\u50A8\u5F15\u64CE <code>show table status from \u6570\u636E\u5E93\u540D;</code></p><h3 id="\u6267\u884C\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#\u6267\u884C\u5F15\u64CE" aria-hidden="true">#</a> \u6267\u884C\u5F15\u64CE</h3><ul><li>\u5229\u7528\u5B58\u50A8\u5F15\u64CE\u63D0\u4F9B\u7684API\u6765\u628A\u67E5\u8BE2\u4F18\u5316\u5668\u5F97\u5230\u7684\u6267\u884C\u8BA1\u5212\u6765\u64CD\u4F5C\u5B58\u50A8\u5F15\u64CE</li><li>\u4ECE\u5B58\u50A8\u5F15\u64CE\u4E2D\u62FF\u5230\u7ED3\u679C\u540E\u4F1A\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5982\u679C\u6709\u5F00\u542F\u67E5\u8BE2\u7F13\u5B58\uFF0C\u90A3\u4E48\u4E5F\u66F4\u65B0\u5230\u7F13\u5B58\u4E2D</li></ul><h3 id="\u63CF\u8FF0\u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u63CF\u8FF0\u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u6D41\u7A0B" aria-hidden="true">#</a> \u63CF\u8FF0\u4E00\u6761\u67E5\u8BE2\u8BED\u53E5\u7684\u6267\u884C\u6D41\u7A0B</h3><ol><li>\u5BA2\u6237\u7AEF\u8FDE\u63A5MySQL\u670D\u52A1\u7AEF\uFF0C\u63D0\u4EA4\u67E5\u8BE2\u8BED\u53E5</li><li>\u670D\u52A1\u7AEF\u9996\u5148\u68C0\u67E5\u67E5\u8BE2\u7F13\u5B58\u662F\u5426\u5B58\u5728\u5BF9\u5E94\u7ED3\u679C\uFF0C\u5982\u679C\u6709\u5219\u76F4\u63A5\u8FD4\u56DE\uFF1B\u5982\u679C\u6CA1\u6709\u5219\u628A\u67E5\u8BE2\u8BED\u53E5\u4EA4\u7ED9\u89E3\u6790\u5668</li><li>\u89E3\u6790\u5668\u4F1A\u6309\u5173\u952E\u5B57\u3001\u8868\u540D\u7B49\u62C6\u5206\u67E5\u8BE2\u8BED\u53E5\uFF0C\u5E76\u68C0\u67E5\u8BED\u6CD5\uFF0C\u751F\u6210\u4E00\u9897\u89E3\u6790\u6811\u540E\u4EA4\u7ED9\u9884\u5904\u7406\u5668</li><li>\u9884\u5904\u7406\u5668\u8D1F\u8D23\u68C0\u67E5\u8BED\u53E5\u662F\u5426\u5B58\u5728\u6B67\u4E49\uFF1A\u662F\u5426\u6709\u4E0D\u5B58\u5728\u7684\u8868\u3001\u5B57\u6BB5\u7B49\uFF0C\u4E4B\u540E\u4EA4\u7ED9\u67E5\u8BE2\u4F18\u5316\u5668</li><li>\u67E5\u8BE2\u4F18\u5316\u5668\u4F1A\u6839\u636E\u8FD9\u4E2A\u67E5\u8BE2\u8BED\u53E5\u7684\u5404\u79CD\u6267\u884C\u65B9\u5F0F\u7684\u5F00\u9500\uFF0C\u9009\u62E9\u4E00\u79CD\u6700\u4F4E\u5F00\u9500\u7684\u65B9\u5F0F\uFF0C\u5F97\u5230\u4E00\u4E2A\u6267\u884C\u8BA1\u5212</li><li>\u6267\u884C\u5F15\u64CE\u7528\u8FD9\u4E2A\u6267\u884C\u8BA1\u5212\u53BB\u8C03\u7528\u5B58\u50A8\u5F15\u64CE\u63D0\u4F9B\u7684\u63A5\u53E3\u5F97\u5230\u6570\u636E</li><li>\u8FD4\u56DE\u6570\u636E\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u5982\u679C\u6570\u636E\u5E93\u5F00\u542F\u4E86\u67E5\u8BE2\u7F13\u5B58\uFF0C\u5219\u4E5F\u66F4\u65B0\u5230\u67E5\u8BE2\u7F13\u5B58\u4E2D</li></ol><h2 id="mysql\u4F53\u7CFB\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#mysql\u4F53\u7CFB\u67B6\u6784" aria-hidden="true">#</a> MySQL\u4F53\u7CFB\u67B6\u6784</h2><p>\u7406\u89E3\u7248</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200913141853.png" alt=""></p><p>\u670D\u52A1\u5C42\u4E2D\u6709\u4E00\u4E2A\u65E5\u5FD7\uFF1Abinlog\uFF0C<strong>\u9ED8\u8BA4\u4E0D\u5F00\u542F</strong></p><ul><li>\u8BB0\u5F55DDL\u3001DML\u8BED\u53E5\uFF0C\u5C5E\u4E8E\u903B\u8F91\u65E5\u5FD7</li><li>\u6CA1\u6709\u5927\u5C0F\u9650\u5236\uFF0C\u5185\u5BB9\u53EF\u4EE5\u8FFD\u52A0</li><li>\u53EF\u4EE5\u88AB\u6240\u6709\u5B58\u50A8\u5F15\u64CE\u4F7F\u7528</li><li>\u53EF\u4EE5\u7528\u4E8E\u6570\u636E\u6062\u590D\u548C\u4E3B\u4ECE\u590D\u5236</li></ul><h3 id="innodb\u5B58\u50A8\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#innodb\u5B58\u50A8\u7ED3\u6784" aria-hidden="true">#</a> InnoDB\u5B58\u50A8\u7ED3\u6784</h3><ul><li>InnoDB \u4E2D\u5757\u7684\u6982\u5FF5\u5176\u5B9E\u5C31\u662F\u9875</li><li>InnoDB \u4E2D\u7C07\u7684\u6982\u5FF5\u5176\u5B9E\u5C31\u662F\u533A</li><li>1\u9875\u7684\u5927\u5C0F\u662F16KB</li><li>\u9875\u662F InnoDB \u505A\u78C1\u76D8\u7BA1\u7406\u6700\u5C0F\u7684\u5355\u4F4D</li></ul><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200913144046.png" alt=""></p><h2 id="\u4E00\u6761\u66F4\u65B0\u8BED\u53E5\u7684\u6267\u884C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u4E00\u6761\u66F4\u65B0\u8BED\u53E5\u7684\u6267\u884C\u8FC7\u7A0B" aria-hidden="true">#</a> \u4E00\u6761\u66F4\u65B0\u8BED\u53E5\u7684\u6267\u884C\u8FC7\u7A0B</h2><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200913152005.png" alt=""></p><ul><li>\u5BA2\u6237\u7AEF\u7684\u64CD\u4F5C\u4E0D\u4F1A\u76F4\u63A5\u64CD\u4F5C\u78C1\u76D8\uFF0C\u800C\u662F\u5148\u53BB\u5230InnoDB\u4E2D\u7684\u7F13\u51B2\u6C60Buffer Pool\uFF0C\u56E0\u4E3AIO\u4EE3\u4EF7\u592A\u5927</li><li>Buffer Pool\u53EF\u4EE5\u52A0\u901F\u6570\u636E\u7684\u64CD\u4F5C\u548C\u8BBF\u95EE(<strong>\u4E3A\u4E86\u907F\u514D\u6BCF\u6B21\u5728\u8BFB\u5199\u6570\u636E\u65F6\u8BBF\u95EE\u78C1\u76D8\u589E\u52A0 IO \u5F00\u9500\uFF0CInnodb \u5B58\u50A8\u5F15\u64CE\u901A\u8FC7\u628A\u76F8\u5E94\u7684\u6570\u636E\u9875\u548C\u7D22\u5F15\u9875\u52A0\u8F7D\u5230Buffer Pool\u4E2D\u6765\u63D0\u9AD8\u8BFB\u5199\u901F\u5EA6\u3002\u7136\u540E\u6309\u7167\u6700\u8FD1\u6700\u5C11\u4F7F\u7528\u539F\u5219\u6765\u4FDD\u7559\u7F13\u51B2\u6C60\u4E2D\u7684\u7F13\u5B58\u6570\u636E\u3002</strong>)</li><li>\u5F53\u5185\u5B58\u7684\u6570\u636E\u9875\u548C\u78C1\u76D8\u7684\u6570\u636E\u9875\u4E0D\u4E00\u81F4\u65F6\uFF0C\u5185\u5B58\u4E2D\u7684\u6570\u636E\u9875\u4E5F\u79F0\u4E3A<strong>\u810F\u9875</strong></li><li>\u6240\u4EE5\u5728InnoDB\u4E2D\u4E00\u4E9B\u540E\u53F0\u7684\u7EBF\u7A0B\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u5C31\u4E00\u6B21\u6027\u5730\u628ABuffer Pool\u7684\u6570\u636E\u540C\u6B65\u5230\u78C1\u76D8\u4E2D\u7684\u6570\u636E\u4E2D\uFF0C\u8FD9\u4E2A\u52A8\u4F5C\u4E5F\u79F0\u4E3A<strong>\u5237\u810F</strong></li><li>\u90A3\u4E48\u5F53\u8981\u8BFB\u5165\u7684\u6570\u636E\u9875\u4E0D\u5728Buffer Pool\u4E2D\u65F6\uFF0C\u5C31\u9700\u8981\u5728Buffer Pool\u4E2D\u7533\u8BF7\u4E00\u4E2A\u65B0\u7684\u6570\u636E\u9875\uFF0C\u4F46Buffer Pool\u4E2D\u6570\u636E\u9875\u662F\u4E00\u5B9A\u7684\uFF0C\u5F53\u6570\u636E\u9875\u8FBE\u5230\u4E0A\u9650\u65F6\u6B64\u65F6\u5C31\u9700\u8981\u628A\u6700\u4E45\u4E0D\u4F7F\u7528\u7684\u6570\u636E\u9875\u4ECE\u5185\u5B58\u4E2D\u6DD8\u6C70\u6389\u3002<strong>\u4F46\u5982\u679C\u6DD8\u6C70\u7684\u662F\u810F\u9875\uFF0C\u90A3\u4E48\u5C31\u9700\u8981\u628A\u810F\u9875\u5237\u5230\u78C1\u76D8\u91CC(\u5237\u810F)\u624D\u80FD\u8FDB\u884C\u590D\u7528\u3002</strong></li><li>\u5982\u679C\u810F\u9875\u6570\u636E\u8FD8\u672A\u5B8C\u5168\u540C\u6B65\u5230\u78C1\u76D8\u4E2D\uFF0C\u670D\u52A1\u7AEF\u5D29\u6E83\u5173\u95ED\u4E86\uFF0C\u6570\u636E\u4F1A\u4E22\u5931\u3002\u89E3\u51B3\u65B9\u6CD5\uFF1A<strong>\u6301\u4E45\u5316\u673A\u5236</strong></li><li>\u6301\u4E45\u5316\u673A\u5236\uFF1Aredo log\uFF0C\u628A\u5185\u5B58\u7684\u6570\u636E\u5199\u5165\u5230\u65E5\u5FD7\u4E2D\uFF0C\u4E00\u65E6\u670D\u52A1\u7AEF\u5D29\u6E83\u5173\u95ED\uFF0C\u5C31\u4ECE\u65E5\u5FD7\u6587\u4EF6\u4E2D\u6062\u590D\u5230\u78C1\u76D8(WAL\u6280\u672F\uFF0C\u5148\u5199\u65E5\u5FD7\uFF0C\u518D\u5199\u78C1\u76D8) <ul><li>\u8BB0\u5F55\u6570\u636E\u9875\u7684\u6539\u52A8\uFF0C\u5C5E\u4E8E\u7269\u7406\u65E5\u5FD7</li><li>\u5927\u5C0F\u56FA\u5B9A\uFF0C\u524D\u9762\u7684\u5185\u5BB9\u4F1A\u88AB\u8986\u76D6</li><li>\u5728InnoDB\u5B58\u50A8\u5F15\u64CE\u5C42\u5B9E\u73B0</li><li>\u7528\u4E8E\u5D29\u6E83\u6062\u590D</li><li><strong>\u5199redo log \u7684\u8FC7\u7A0B\u662F\u987A\u5E8F\u5199\u78C1\u76D8\u7684\uFF0C\u78C1\u76D8\u987A\u5E8F\u5199\u51CF\u5C11\u4E86\u5BFB\u9053\u7B49\u65F6\u95F4\uFF0C\u901F\u5EA6\u6BD4\u968F\u673A\u5199\u8981\u5FEB\u5F88\u591A</strong></li></ul></li></ul><hr><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200913154617.png" alt=""></p><p><strong>MySQL InnoDB\u4E24\u9636\u6BB5(XA)\u7684\u63D0\u4EA4</strong></p><ol><li>\u5BA2\u6237\u7AEF\u63D0\u4EA4\u4E00\u6761\u66F4\u65B0\u8BED\u53E5</li><li>\u670D\u52A1\u5C42\u63A5\u6536\u5230\u8FD9\u4E00\u6761\u66F4\u65B0\u8BED\u53E5\uFF0C\u4EA7\u751F\u6267\u884C\u8BA1\u5212\uFF0C\u4EA4\u7531\u5B58\u50A8\u5F15\u64CE\u5C42\u6267\u884C</li><li>\u5B58\u50A8\u5F15\u64CE\u5C42\u628A\u4FEE\u6539\u7684\u7ED3\u679C\u66F4\u65B0\u5230\u5185\u5B58</li><li>\u540C\u65F6\u628A\u7ED3\u679C\u8BB0\u5F55\u5230redolog\u4E2D\uFF0C\u628A\u8FD9\u4E00\u884C\u7684\u72B6\u6001\u8BBE\u7F6E\u6210prepare</li><li>\u901A\u77E5\u670D\u52A1\u5C42\u5DF2\u5B8C\u6210\u4FEE\u6539\uFF0C\u53EF\u4EE5\u63D0\u4EA4\u4E8B\u52A1</li><li>\u670D\u52A1\u5C42\u628A\u4FEE\u6539\u8BB0\u5F55\u5230binlog\u4E2D</li><li>\u670D\u52A1\u5C42\u63D0\u4EA4\u4E8B\u52A1</li><li>\u5B58\u50A8\u5F15\u64CE\u5C42\u628A\u8FD9\u4E2A\u4E8B\u52A1\u7684\u72B6\u6001\u8BBE\u7F6E\u6210commit\u72B6\u6001</li></ol><h3 id="\u66F4\u65B0\u8BED\u53E5\u6267\u884C\u7684\u8FC7\u7A0B\u4E3A\u4EC0\u4E48\u9700\u8981\u4F7F\u7528xa\u4E24\u9636\u6BB5\u7684\u63D0\u4EA4" tabindex="-1"><a class="header-anchor" href="#\u66F4\u65B0\u8BED\u53E5\u6267\u884C\u7684\u8FC7\u7A0B\u4E3A\u4EC0\u4E48\u9700\u8981\u4F7F\u7528xa\u4E24\u9636\u6BB5\u7684\u63D0\u4EA4" aria-hidden="true">#</a> \u66F4\u65B0\u8BED\u53E5\u6267\u884C\u7684\u8FC7\u7A0B\u4E3A\u4EC0\u4E48\u9700\u8981\u4F7F\u7528XA\u4E24\u9636\u6BB5\u7684\u63D0\u4EA4</h3><ul><li>\u4E3A\u4E86\u4FDD\u8BC1\u672C\u6B21\u64CD\u4F5C\u4E2Dbinlog\u7684\u6570\u636E\u548Credolog\u7684\u6570\u636E\u5185\u5BB9\u7684\u4E00\u81F4\u6027</li><li>\u5047\u8BBE\u6570\u636E\u5199\u5165\u4E86redolog\u540E\uFF0C\u670D\u52A1\u7AEF\u5954\u6E83\u5173\u95ED\u4E86\uFF0C\u91CD\u65B0\u6062\u590D\u540E\u6839\u636Eredolog\u8FDB\u884C\u5D29\u6E83\u6062\u590D\u3002\u7136\u800Cbinlog\u7684\u6570\u636E\u4ECD\u672A\u8BB0\u5F55\u672C\u6B21\u64CD\u4F5C\uFF0C\u5F53\u6267\u884C\u4E3B\u4ECE\u590D\u5236\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u4EA7\u751F\u4E3B\u670D\u52A1\u5668\u548C\u4ECE\u670D\u52A1\u5668\u6570\u636E\u4E0D\u4E00\u81F4\u7684\u60C5\u51B5</li></ul><h3 id="\u810F\u9875\u4E3A\u4EC0\u4E48\u4F1A\u4F7Fsql\u53D8\u6162" tabindex="-1"><a class="header-anchor" href="#\u810F\u9875\u4E3A\u4EC0\u4E48\u4F1A\u4F7Fsql\u53D8\u6162" aria-hidden="true">#</a> \u810F\u9875\u4E3A\u4EC0\u4E48\u4F1A\u4F7FSQL\u53D8\u6162</h3><ul><li>redo log \u5927\u5C0F\u662F\u4E00\u5B9A\u7684\uFF0C\u4E14\u662F\u5FAA\u73AF\u5199\u5165\u7684</li><li>\u5728\u9AD8\u5E76\u53D1\u573A\u666F\u4E0B\uFF0Credo log \u5F88\u5FEB\u88AB\u5199\u6EE1\u4E86\uFF0C\u4F46\u662F\u6570\u636E\u6765\u4E0D\u53CA\u540C\u6B65\u5230\u78C1\u76D8\u91CC\uFF0C\u8FD9\u65F6\u5019\u5C31\u4F1A\u4EA7\u751F\u810F\u9875\uFF0C\u5E76\u4E14\u8FD8\u4F1A\u963B\u585E\u540E\u7EED\u7684\u5199\u5165\u64CD\u4F5C</li></ul><h1 id="mysql\u7D22\u5F15\u539F\u7406\u4E0E\u4F7F\u7528\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#mysql\u7D22\u5F15\u539F\u7406\u4E0E\u4F7F\u7528\u89C4\u5219" aria-hidden="true">#</a> MySQL\u7D22\u5F15\u539F\u7406\u4E0E\u4F7F\u7528\u89C4\u5219</h1><h2 id="\u7D22\u5F15\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u6982\u5FF5" aria-hidden="true">#</a> \u7D22\u5F15\u6982\u5FF5</h2><p>\u662F\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\u4E2D\u4E00\u4E2A\u6392\u5E8F\u7684<strong>\u6570\u636E\u7ED3\u6784</strong>\uFF0C\u4EE5<strong>\u534F\u52A9\u5FEB\u901F\u67E5\u8BE2\u3001\u66F4\u65B0\u6570\u636E\u5E93\u8868\u4E2D\u7684\u6570\u636E</strong></p><h3 id="\u7D22\u5F15\u5DE5\u4F5C\u539F\u7406\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u5DE5\u4F5C\u539F\u7406\u793A\u4F8B" aria-hidden="true">#</a> \u7D22\u5F15\u5DE5\u4F5C\u539F\u7406\u793A\u4F8B</h3><p>\u4EE5\u4E3B\u952E\u7D22\u5F15\u4E3A\u4F8B\uFF0C\u4E00\u4E2A\u4E3B\u952E\u5BF9\u5E94\u4E00\u884C\u8BB0\u5F55\u7684\u5730\u5740\u503C\uFF0C\u901A\u8FC7\u8FD9\u4E2A\u4E3B\u952E\u627E\u5230\u5730\u5740\uFF0C\u518D\u901A\u8FC7\u5730\u5740\u503C\u627E\u5230\u6570\u636E</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20200916225708.png" alt=""></p><h3 id="\u7D22\u5F15\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u7C7B\u578B" aria-hidden="true">#</a> \u7D22\u5F15\u7C7B\u578B</h3><ul><li>\u805A\u96C6\u7D22\u5F15(\u4E3B\u952E\u7D22\u5F15)</li><li>\u666E\u901A\u7D22\u5F15</li><li>\u552F\u4E00\u7D22\u5F15\uFF1A\u7D22\u5F15\u7684\u952E\u503C\u4E0D\u80FD\u91CD\u590D</li><li>\u5168\u6587\u7D22\u5F15\uFF1A\u7528\u4E8E\u63D0\u5347\u5927\u5B57\u6BB5\u4E2D\u4F7F\u7528<code>like</code>\u5173\u952E\u5B57\u67E5\u8BE2\u7684\u6548\u7387</li></ul><p>\u4E3B\u952E\u7D22\u5F15\u3001\u666E\u901A\u7D22\u5F15\u3001\u552F\u4E00\u7D22\u5F15\u7684\u533A\u522B\uFF1A</p><ul><li>\u4E3B\u952E\u7D22\u5F15\u4E00\u5F20\u8868\u5185\u53EA\u5141\u8BB8\u6709\u4E00\u4E2A\uFF0C\u503C\u9700\u8981\u552F\u4E00\uFF0C\u800C\u4E14\u4E0D\u5141\u8BB8\u7A7A\u503C\uFF0C\u53EF\u4EE5\u4F5C\u4E3A\u5176\u4ED6\u8868\u7684\u5916\u952E\uFF0C\u4E3B\u952E\u7D22\u5F15\u4F7F\u7528 <code>not in</code> \u5173\u952E\u5B57\u4ECD\u7136\u53EF\u4EE5\u8D70\u7D22\u5F15</li><li>\u552F\u4E00\u7D22\u5F15\u4E00\u5F20\u8868\u5185\u53EF\u4EE5\u6709\u591A\u4E2A\uFF0C\u503C\u9700\u8981\u552F\u4E00\uFF0C\u4F46\u662F\u53EF\u4EE5\u5141\u8BB8\u7A7A\u503C\uFF0C\u4E0D\u53EF\u4EE5\u4F5C\u4E3A\u5916\u952E</li><li>\u666E\u901A\u7D22\u5F15\u5BF9\u503C\u6CA1\u6709\u7EA6\u675F\uFF0C\u4E00\u822C\u53EA\u7528\u4E8E\u6392\u5E8F</li></ul><h3 id="\u7D22\u5F15\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u65B9\u6CD5" aria-hidden="true">#</a> \u7D22\u5F15\u65B9\u6CD5</h3><ul><li>BTREE</li><li>HASH <ul><li>\u5148\u7528\u7D22\u5F15\u5B57\u6BB5\u503C\u901A\u8FC7\u54C8\u5E0C\u65B9\u6CD5\uFF0C\u5F97\u5230\u54C8\u5E0C\u503C\uFF0C\u54C8\u5E0C\u503C\u5BF9\u5E94\u627E\u5230\u6570\u636E\u7684\u5730\u5740\u503C\uFF0C\u518D\u627E\u5230\u6570\u636E\uFF0C\u65F6\u95F4\u590D\u6742\u5EA6\u56FA\u5B9A\u4E3AO(1)</li><li>\u54C8\u5E0C\u503C\u65E0\u5E8F\uFF0C\u6240\u4EE5\u4E0D\u80FD\u7528\u54C8\u5E0C\u7D22\u5F15\u5B9E\u73B0\u6392\u5E8F\uFF0C\u4E5F\u4E0D\u652F\u6301\u8303\u56F4\u67E5\u8BE2</li><li>\u53EF\u80FD\u4F1A\u53D1\u751F\u54C8\u5E0C\u78B0\u649E\u7684\u60C5\u51B5</li><li>\u5728InnoDB\u5B58\u50A8\u5F15\u64CE\u4E2D\u4E0D\u652F\u6301<strong>\u624B\u52A8\u521B\u5EFAHASH\u7D22\u5F15</strong>(\u4F1A\u81EA\u52A8\u5728\u70ED\u70B9\u7684BTREE\u7D22\u5F15\u4E0A\u5EFA\u81EA\u9002\u5E94\u7684HASH\u7D22\u5F15)\uFF0C\u4FDD\u5B58\u540E\u4F1A\u81EA\u52A8\u53D8\u56DEBTREE</li></ul></li></ul><h2 id="\u7D22\u5F15\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u7ED3\u6784" aria-hidden="true">#</a> \u7D22\u5F15\u7ED3\u6784</h2><p>\u6709\u5E8F\u6570\u7EC4\uFF1A\u8BBF\u95EE\u6548\u7387\u9AD8\uFF0C\u6570\u636E\u7684\u53D8\u52A8\u6210\u672C\u9AD8</p><p>\u5355\u94FE\u8868\uFF1A\u8BBF\u95EE\u6548\u7387\u4F4E</p><p>BST\u6811(\u4E8C\u53C9\u67E5\u627E\u6811)\uFF1A\u6700\u574F\u60C5\u51B5\u9000\u5316\u6210\u5355\u94FE\u8868</p><p>AVL\u6811(\u5E73\u8861\u4E8C\u53C9\u6811)\uFF1AAVL\u6811\u4E2D\u4E00\u4E2A\u8282\u70B9\u5C31\u662F\u4E00\u9875\uFF0C\u4E00\u987516KB\uFF0C\u4E00\u4E2A\u8282\u70B9\u53EA\u5B58\u653E\u952E\u503C\u548C\u78C1\u76D8\u5F15\u7528\u7684\u6570\u636E\u91CF\u8FDC\u8FDC\u8FBE\u4E0D\u523016KB\uFF0C\u9020\u6210\u7A7A\u95F4\u6D6A\u8D39\uFF0C\u8BBF\u95EE\u6570\u636E\u8FDB\u884C\u78C1\u76D8IO\u65F6\u4F1A\u6D6A\u8D39\u5927\u91CF\u7A7A\u95F4</p><p>\u200B \u89E3\u51B3\u65B9\u6848\uFF1A\u4E00\u4E2A\u5757\u5B58\u591A\u4E2A\u8282\u70B9\uFF0C\u7ED3\u679C\u662F\uFF1A\u6307\u9488\u6570\u91CF\u66F4\u591A\uFF0C\u539F\u6765\u7684\u4E8C\u53C9\u6811\u53D8\u6210\u591A\u53C9\u6811\uFF0C\u6240\u4EE5\u6811\u7684\u6DF1\u5EA6\u51CF\u5C11\u3002</p><p>B\u6811(\u591A\u8DEF\u5E73\u8861\u67E5\u627E\u6811)\uFF1A\u8282\u70B9\u62E5\u6709\u7684\u5B50\u6811(\u5EA6)\u6C38\u8FDC\u6BD4\u5173\u952E\u5B57\u7684\u6570\u91CF\u591A1\u3002IO\u6B21\u6570\u8981\u6BD4AVL\u6811\u5C11\u3002AVL\u6811\u4F7F\u7528\u5DE6\u65CB\u3001\u53F3\u65CB\u4FDD\u6301\u5E73\u8861\uFF1BB\u6811\u4F7F\u7528\u5206\u88C2\u5408\u5E76\u7684\u64CD\u4F5C\u4FDD\u6301\u5E73\u8861</p><p><strong>B+\u6811(\u52A0\u5F3A\u7248\u591A\u8DEF\u5E73\u8861\u67E5\u627E\u6811)\uFF1AInnoDB\u4E2D\u5B9E\u9645\u4F7F\u7528\u7684\u7ED3\u6784</strong></p><h3 id="\u7D22\u5F15\u6570\u636E\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u6570\u636E\u7ED3\u6784" aria-hidden="true">#</a> \u7D22\u5F15\u6570\u636E\u7ED3\u6784</h3><ul><li>\u5173\u952E\u5B57\u6570\u91CF\u548C\u8282\u70B9\u62E5\u6709\u7684\u5B50\u6811\u7684\u6570\u76EE(\u5EA6)\u662F\u76F8\u7B49\u7684</li><li>\u53EA\u6709\u53F6\u5B50\u7ED3\u70B9\u624D\u5B58\u50A8\u6570\u636E\uFF0C\u5176\u4ED6\u8282\u70B9\u53EA\u5B58\u50A8\u7D22\u5F15\u952E\u503C\uFF0C\u6240\u4EE5\u641C\u7D22\u8FC7\u7A0B\u4E2D\u5FC5\u987B\u641C\u7D22\u5230\u53F6\u5B50\u7ED3\u70B9\u4E2D\u624D\u80FD\u771F\u6B63\u8FD4\u56DE\u6570\u636E\uFF0C\u6BCF\u4E00\u6B21\u641C\u7D22\u7684\u6548\u7387\u66F4\u52A0\u7684\u7A33\u5B9A(\u6B21\u6570\u76F8\u5BF9\u7A33\u5B9A)</li></ul><p><strong>InnoDB\u8FDB\u4E00\u6B65\u6539\u826F\u4E86B+\u6811\uFF0C\u52A0\u5165\u4E86\u987A\u5E8F\u8BBF\u95EE\u7684\u6307\u9488</strong></p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200917001024745.png" alt="image-20200917001024745"></p><ul><li>MyISAM <ul><li>MyISAM\u5B58\u50A8\u5F15\u64CE\u4E2D\u6709\u4E24\u4E2A\u6587\u4EF6\uFF1A.MYI \u5B58\u50A8\u7D22\u5F15\uFF0C .MYD\u5B58\u50A8\u6570\u636E</li><li>\u641C\u7D22\u6570\u636E\u65F6\uFF0C\u5148\u4ECEMYI\u6587\u4EF6\u4E2D\u7D22\u5F15\u7684B+\u6811\u7684\u7ED3\u6784\u4E2D\u627E\u5230\u952E\u503C\u5BF9\u5E94\u6570\u636E\u7684\u78C1\u76D8\u5730\u5740</li><li>\u518D\u4ECEMYD\u6587\u4EF6\u4E2D\u627E\u5230\u5B8C\u6574\u6570\u636E</li><li><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20210221222230495.png" alt="image-20210221222230495"><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20210221222253588.png" alt="image-20210221222253588"></li><li>MyISAM\u7D22\u5F15\u5206\u4E3A\u4E24\u7C7B\uFF1A\u4E3B\u952E\u7D22\u5F15\u3001\u8F85\u52A9(\u5176\u4ED6)\u7D22\u5F15\uFF0C\u4E24\u8005\u68C0\u7D22\u65B9\u5F0F\u4E00\u6837</li></ul></li><li>InnoDB <ul><li>InnoDB\u5B58\u50A8\u5F15\u64CE\u4E2D\u53EA\u6709\u4E00\u4E2A\u6587\u4EF6\uFF1A.ibd\uFF0C\u6240\u4EE5\u7D22\u5F15\u548C\u6570\u636E\u653E\u5728\u4E00\u8D77</li><li>\u56E0\u4E3A\u6570\u636E\u662F\u8DDF\u968F\u4E3B\u952E\u5B58\u50A8\u7684\uFF0C\u6570\u636E\u5728\u78C1\u76D8\u4E2D\u7684\u7269\u7406\u987A\u5E8F\u548C\u4E3B\u952E\u7684\u903B\u8F91\u987A\u5E8F\u4E00\u6478\u4E00\u6837\uFF0C\u6240\u4EE5\uFF1A<strong>\u4EE5\u4E3B\u952E\u4E3A\u7D22\u5F15\u6765\u7EC4\u7EC7\u6570\u636E\u5B58\u50A8</strong></li><li>InnoDB\u4E2D\u53EA\u6709\u4E3B\u952E\u7D22\u5F15\u662F\u805A\u96C6\u7D22\u5F15\uFF1Aclustered index\uFF0C\u6570\u636E\u5728\u78C1\u76D8\u4E2D\u7684\u7269\u7406\u987A\u5E8F\u548C\u4E3B\u952E\u7684\u903B\u8F91\u987A\u5E8F\u4E00\u81F4\u3002\u5176\u4ED6\u7D22\u5F15\u90FD\u662F\u975E\u805A\u96C6\u7D22\u5F15</li><li>\u5982\u679C\u5EFA\u8868\u65F6\u6CA1\u6709\u6307\u5B9A\u4E3B\u952E\uFF0C\u4E5F\u5C31\u6CA1\u6709\u4E86\u4E3B\u952E\u7D22\u5F15\uFF0C\u90A3\u4E48InnoDB\u4F1A<strong>\u9ED8\u8BA4\u5148\u5BFB\u627E\u7B2C\u4E00\u4E2A\u6CA1\u6709NULL\u503C\u7684\u552F\u4E00\u7D22\u5F15\u4F5C\u4E3A\u805A\u96C6\u7D22\u5F15</strong>\u3002\u5982\u679C\u4E5F\u6CA1\u6709\u8FD9\u4E2A\u6761\u4EF6\uFF0C\u90A3\u4E48InnoDB\u6709\u4E00\u4E2ARowId\u9690\u85CF\u5B57\u6BB5(\u9012\u589E)\u4F5C\u4E3A\u805A\u96C6\u7D22\u5F15\u6765\u7EC4\u7EC7\u6570\u636E\u7684\u5B58\u50A8</li><li>InnoDB\u7684\u4E3B\u952E\u7D22\u5F15\u548C\u8F85\u52A9\u7D22\u5F15\u68C0\u7D22\u6570\u636E\u7684\u65B9\u5F0F\u662F\u6709\u4E3B\u6B21\u4E4B\u5206\u7684\uFF0C\u8F85\u52A9\u7D22\u5F15\u5FC5\u987B\u8981\u5230\u4E3B\u952E\u7D22\u5F15\u4E2D\u68C0\u7D22\u6570\u636E\uFF0C\u56E0\u4E3A\u6570\u636E\u90FD\u662F\u5B58\u653E\u5728\u4E3B\u952E\u7D22\u5F15B+\u6811\u4E0A\u7684\u53F6\u5B50\u7ED3\u70B9\u4E0A<img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200917232914575.png" alt="image-20200917232914575"></li></ul></li></ul><h2 id="\u7D22\u5F15\u4F7F\u7528\u539F\u5219" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u4F7F\u7528\u539F\u5219" aria-hidden="true">#</a> \u7D22\u5F15\u4F7F\u7528\u539F\u5219</h2><ol><li>\u5217\u7684\u79BB\u6563\u5EA6 <ul><li>\u79BB\u6563\u5EA6\u516C\u5F0F\uFF1Acount(distinct(\u5217)):count(*)\uFF0C\u89E3\u91CA\uFF1A\u8FD9\u4E00\u5217\u6240\u6709\u4E0D\u540C\u7684\u503C\u6BD4\u6570\u636E\u884C\u6570</li><li>\u5982\u679C\u5217\u7684\u91CD\u590D\u503C\u8D8A\u591A\uFF0C\u79BB\u6563\u5EA6\u5C31\u8D8A\u4F4E\uFF1B\u5982\u679C\u91CD\u590D\u503C\u8D8A\u5C11\uFF0C\u79BB\u6563\u5EA6\u5C31\u8D8A\u9AD8</li><li>\u5728\u79BB\u6563\u5EA6\u5F88\u4F4E\u7684\u5B57\u6BB5\u4E0A\u5EFA\u7ACB\u7D22\u5F15\uFF0C\u4F5C\u7528\u4E0D\u5927\u3002(explain sql\u8BED\u53E5 rows\u5B57\u6BB5\u7684\u503C\u6BD4\u8F83\u5927) B+\u6811\u4E0A\u91CD\u590D\u503C\u8FC7\u591A\uFF0C\u4E0D\u5229\u4E8E\u68C0\u7D22</li><li>\u5F53\u4E00\u4E2A\u5B57\u6BB5\u7684\u79BB\u6563\u5EA6\u592A\u4F4E\u65F6\uFF0C\u5B58\u50A8\u5F15\u64CE\u76F4\u63A5\u653E\u5F03\u4F7F\u7528\u7D22\u5F15\uFF0C\u8FDB\u884C\u5168\u8868\u626B\u63CF\uFF0C\u4E5F\u4E0D\u5229\u4E8E\u6570\u636E\u68C0\u7D22</li></ul></li><li>\u8054\u5408\u7D22\u5F15\u6700\u5DE6\u5339\u914D\u539F\u5219 <ul><li>\u5047\u8BBE\u5EFA\u7684\u8054\u5408\u7D22\u5F15\u662F(name\u3001phone) B+\u6811\u4E2D\u8054\u5408\u7D22\u5F15\u7684\u5B58\u50A8\u65B9\u5F0F(\u4F9D\u636E\u7D22\u5F15\u5EFA\u7ACB\u987A\u5E8F\u4ECE\u5DE6\u5230\u53F3)<img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/image-20200920172226252.png" alt="image-20200920172226252"></li><li>\u5047\u5982\u5B9A\u4E49\u8054\u5408\u7D22\u5F15<code>index(a,b,c)</code>\uFF0C\u90A3\u4E48\u6700\u7EC8\u5F97\u5230\u7684\u7D22\u5F15\u662F <ul><li><code>index(a)</code></li><li><code>index(a,b)</code></li><li><code>index(a,b,c)</code></li><li>\u67E5\u8BE2\u65F6\u6CA1\u6709\u7528\u5230\u4EE5\u4E0A\u7ED3\u6784\u7684\u7D22\u5F15\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u8054\u5408\u7D22\u5F15\u662F\u7528\u4E0D\u4E0A\u7684\uFF1B\u8981\u60F3\u4F7F\u7528\u8054\u5408\u7D22\u5F15\uFF0C\u5FC5\u987B\u4F7F\u7528\u6700\u5DE6\u8FB9\u7684\u5B57\u6BB5</li><li>\u5982\u679C\u67E5\u8BE2\u65F6\u4F7F\u7528\u7684\u5B57\u6BB5\u6EE1\u8DB3\u4E0A\u9762\u6761\u4EF6\uFF0C\u4F46\u662F\u987A\u5E8F\u4E0D\u4E00\u81F4\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5230\u8054\u5408\u7D22\u5F15\u3002\u56E0\u4E3A\u67E5\u8BE2\u4F18\u5316\u5668\u4F1A\u5E2E\u52A9\u4F18\u5316sql\u8BED\u53E5\uFF0C\u8C03\u6574where\u5B50\u53E5\u7684\u987A\u5E8F</li></ul></li></ul></li><li>\u8986\u76D6\u7D22\u5F15 <ul><li>\u56DE\u8868\uFF1AInnoDB\u4E2D\u901A\u8FC7\u4F7F\u7528\u666E\u901A\u7D22\u5F15\u5B9A\u4F4D\u4E3B\u952E\u503C\uFF0C\u518D\u901A\u8FC7\u4E3B\u952E\u503C\u5B9A\u4F4D\u5177\u4F53\u8BB0\u5F55\u7684\u64CD\u4F5C</li><li>\u8986\u76D6\u7D22\u5F15\uFF1A\u7D22\u5F15\u8986\u76D6\u4E86\u67E5\u8BE2\u7684\u5217\u3002\u5C06\u7D22\u5F15\u5217\u4F5C\u4E3A\u8981\u67E5\u8BE2\u7684\u6570\u636E\u8FD9\u6837\u7684\u8BDD\u5C31\u53EF\u4EE5\u76F4\u63A5\u8FD4\u56DE\u7D22\u5F15\u4E2D\u7684\u7684\u6570\u636E\uFF0C\u4E0D\u9700\u8981\u518D\u901A\u8FC7\u805A\u96C6\u7D22\u5F15\u53BB\u5B9A\u4F4D\u884C\u8BB0\u5F55\uFF0C\u907F\u514D\u4E86\u56DE\u8868\u7684\u60C5\u51B5\u53D1\u751F\u3002</li><li>\u53EF\u4EE5\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u6765\u4F18\u5316sql\u7684\u573A\u666F <ul><li>\u5168\u8868count\u67E5\u8BE2\u4F18\u5316\u3002\u4F7F\u7528<code>count</code>\u65F6\u5C3D\u53EF\u80FD\u53BB\u547D\u4E2D\u8F85\u52A9\u7D22\u5F15\u6216\u8005\u805A\u96C6\u7D22\u5F15\uFF0C\u800C\u4E0D\u662F\u4F7F\u7528<code>count(*)</code></li><li><code>where</code>\u3001<code>order</code>\u67E5\u8BE2\u65F6\u7D22\u5F15\u4F5C\u4E3A\u6570\u636E\u5217</li></ul></li></ul></li><li>\u901A\u914D\u7B26 <ul><li>\u5F53<code>%</code>\u653E\u5728\u524D\u9762\uFF0C\u90A3\u4E48\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15</li><li>\u5F53<code>%</code>\u653E\u5728\u540E\u9762\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15</li></ul></li><li>\u7D22\u5F15\u6761\u4EF6\u4E0B\u63A8 <ul><li>\u628A\u6761\u4EF6\u4E0B\u63A8\u5230\u5B58\u50A8\u5F15\u64CE\uFF0C\u4E0D\u9700\u8981\u5728Server\u5C42\u8FDB\u884C\u8FC7\u6EE4\u30025.7\u7248\u672C\u540E\u9ED8\u8BA4\u5F00\u542F</li><li>\u53EA\u9002\u7528\u4E8E\u666E\u901A\u7D22\u5F15</li><li>\u63D0\u5347\u6548\u7387</li></ul></li></ol><h2 id="\u4F18\u5316\u624B\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u4F18\u5316\u624B\u6BB5" aria-hidden="true">#</a> \u4F18\u5316\u624B\u6BB5</h2><ul><li><p>\u8868\u7684\u7D22\u5F15\u8D8A\u5168\u8D8A\u597D\uFF0C\u56E0\u4E3A\u4E0D\u7BA1\u4EC0\u4E48\u60C5\u51B5\u90FD\u80FD\u7528\u4E0A\u7D22\u5F15\uFF0C\u5BF9\u5417\uFF1F</p><blockquote><p>\u867D\u7136\u8FD9\u79CD\u505A\u6CD5\u5728\u7ED9\u6BCF\u4E00\u4E2A\u5B57\u6BB5\u8FDB\u884C\u67E5\u8BE2\u65F6\uFF0C\u80FD\u63D0\u9AD8\u6548\u7387\u3002\u4F46\u662F\uFF0C\u7D22\u5F15\u672C\u8D28\u662F\u78C1\u76D8\u4E0A\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u5EFA\u7ACB\u7D22\u5F15\u662F\u9700\u8981\u6D88\u8017\u7A7A\u95F4\u7684\u3002</p><p>\u800C\u4E14\u5728\u66F4\u65B0\u6570\u636E\u65F6\uFF0C\u6570\u636E\u7ED3\u6784\u6709\u53EF\u80FD\u4F1A\u5927\u91CF\u5730\u6539\u53D8\u3002</p><p>\u5982\u679C\u4E00\u4E2A\u5B57\u6BB5\u975E\u5E38\u957F(url)\uFF0C\u5728\u8FD9\u4E2A\u5B57\u6BB5\u4E0A\u5EFA\u7D22\u5F15\u6D88\u8017\u7684\u7A7A\u95F4\u6BD4\u8F83\u5927</p></blockquote></li><li><p>\u4E3A\u4EC0\u4E48\u4E0D\u8981\u5728\u6027\u522B\u5B57\u6BB5\u4E0A\u5EFA\u7D22\u5F15\uFF1F</p><blockquote><p>\u53EA\u6709\u4E24\u4E2A\u503C\uFF0C\u5217\u7684\u79BB\u6563\u5EA6\u592A\u5C0F\uFF0C\u4E0D\u80FD\u660E\u663E\u5730\u63D0\u5347\u6548\u7387</p></blockquote></li><li><p>\u4E3A\u4EC0\u4E48\u4E0D\u8981\u4F7F\u7528\u8EAB\u4EFD\u8BC1(UUID)\u4F5C\u4E3A\u4E3B\u952E\uFF1F</p><blockquote><p>\u4E0D\u4F7F\u7528\u4E00\u4E2A\u9012\u589E\u503C\u4F5C\u4E3A\u4E3B\u952E\u7684\u8BDD\uFF0C\u63D2\u5165\u6570\u636E\u65F6\uFF0C\u6709\u53EF\u80FD\u9020\u6210\u5927\u91CF\u7684\u9875\u6570\u636E\u7684\u5206\u88C2\u548C\u5408\u5E76\u3002\u4F7F\u7528\u81EA\u589Eid\u6765\u63D2\u5165\u6570\u636E\uFF0C\u4F1A\u81EA\u52A8\u6309\u987A\u5E8F\u627E\u5230\u6700\u540E\u7684\u9875\u6765\u8FDB\u884C\u63D2\u5165</p></blockquote></li><li><p>\u6A21\u7CCA\u5339\u914D<code>like abc%</code>\u3001<code>like %2673%</code>\u3001<code>like %888</code>\u90FD\u7528\u4E0D\u5230\u7D22\u5F15\uFF0C\u5BF9\u5417\uFF1F</p><blockquote><p>%\u653E\u5230\u540E\u9762\u53EF\u4EE5\u4F7F\u7528</p></blockquote></li><li><p>\u4E0D\u8981\u4F7F\u7528<code>select *</code>\u5199\u660E\u5177\u4F53\u5B57\u6BB5\uFF0C\u4E3A\u4EC0\u4E48\uFF1F</p><blockquote><p>\u4E3A\u4E86\u4F7F\u7528\u5230\u8986\u76D6\u7D22\u5F15</p></blockquote></li><li><p>\u5728<code>where</code>\u6761\u4EF6\u4E2D<code>not in</code>\u548C<code>&lt;&gt;</code>\u548C<code>not like</code>\u90FD\u65E0\u6CD5\u4F7F\u7528\u7D22\u5F15(\u8D1F\u5411\u67E5\u8BE2)\uFF0C\u5BF9\u5417\uFF1F</p><blockquote><p>not in \u6709\u53EF\u80FD\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15\uFF0C\u8DDF\u6570\u636E\u91CF\u6709\u5173\u7CFB</p><p>&lt;&gt;\u4E5F\u53EF\u4EE5\u4F7F\u7528\u7D22\u5F15</p></blockquote></li></ul><h2 id="avl\u6811\u3001b\u6811\u3001b-\u6811\u5206\u522B\u89E3\u51B3\u4E86\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#avl\u6811\u3001b\u6811\u3001b-\u6811\u5206\u522B\u89E3\u51B3\u4E86\u7684\u95EE\u9898" aria-hidden="true">#</a> AVL\u6811\u3001B\u6811\u3001B+\u6811\u5206\u522B\u89E3\u51B3\u4E86\u7684\u95EE\u9898</h2><ul><li>AVL\u6811\uFF1A\u89E3\u51B3\u4E86BST\u6811\u5728\u6700\u574F\u60C5\u51B5\u4E0B\u4F1A\u51FA\u73B0\u4E0D\u5E73\u8861\u7684\u60C5\u51B5(\u9000\u5316\u6210\u7EBF\u6027\u5355\u5411\u94FE\u8868)</li><li>B\u6811\uFF1A\u5728\u4E00\u4E2A\u7ED3\u70B9\u4E0A\u5B58\u50A8\u591A\u4E2A\u952E\u503C\u548C\u591A\u4E2A\u6307\u9488\uFF0C\u53EF\u4EE5\u51CF\u5C11IO\u6B21\u6570</li><li>B+\u6811\uFF1A\u6570\u636E\u53EA\u5B58\u50A8\u5230\u53F6\u5B50\u7ED3\u70B9\u4E0A\uFF0C\u6548\u7387\u66F4\u52A0\u7A33\u5B9A\uFF1B\u53F6\u5B50\u7ED3\u70B9\u4E0A\u8FD8\u5E26\u6709\u987A\u5E8F\u8BBF\u95EE\u7684\u6307\u9488\uFF0C\u505A\u8303\u56F4\u67E5\u8BE2\u7684\u65F6\u5019\u66F4\u52A0\u7B80\u5355</li></ul><h2 id="innodb\u5EFA\u8BAE\u4F7F\u7528\u81EA\u589E\u4F5C\u4E3A\u4E3B\u952E\u751F\u6210\u7684\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#innodb\u5EFA\u8BAE\u4F7F\u7528\u81EA\u589E\u4F5C\u4E3A\u4E3B\u952E\u751F\u6210\u7684\u7B56\u7565" aria-hidden="true">#</a> InnoDB\u5EFA\u8BAE\u4F7F\u7528\u81EA\u589E\u4F5C\u4E3A\u4E3B\u952E\u751F\u6210\u7684\u7B56\u7565</h2><ul><li>\u4E3A\u4E86\u9632\u6B62\u968F\u673A\u63D2\u5165\u65F6\u9875\u7684\u5206\u88C2\u548C\u5408\u5E76</li><li>\u5B58\u50A8\u548C\u67E5\u8BE2\u65F6\u90FD\u4F1A\u66F4\u52A0\u9AD8\u6548</li></ul><h1 id="mysql\u4E8B\u52A1\u4E0E\u9501\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#mysql\u4E8B\u52A1\u4E0E\u9501\u8BE6\u89E3" aria-hidden="true">#</a> MySQL\u4E8B\u52A1\u4E0E\u9501\u8BE6\u89E3</h1><p>\u9ED8\u8BA4\u81EA\u52A8\u5F00\u542F\u4E8B\u52A1\uFF0C\u6267\u884Cdml\u8BED\u53E5\u65F6\u81EA\u52A8\u63D0\u4EA4</p><p><code>show variables like &#39;atuocommit&#39;</code> \u663E\u793A<code>on</code></p><p>\u8BBE\u7F6E\u4E8B\u52A1\u662F\u5426\u81EA\u52A8\u5F00\u542F</p><p><code>set autocommit = on/off</code></p><p>\u624B\u52A8\u5F00\u542F\u4E8B\u52A1</p><p><code>start transaction</code> \u6216 <code>begin</code></p><p>\u7ED3\u675F\u4E00\u4E2A\u4E8B\u7269</p><p><code>commit</code> \u6216 <code>rollback</code></p><h2 id="\u6570\u636E\u5E93\u4E8B\u52A1\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5E93\u4E8B\u52A1\u5B9A\u4E49" aria-hidden="true">#</a> \u6570\u636E\u5E93\u4E8B\u52A1\u5B9A\u4E49</h2><h2 id="\u4E8B\u52A1\u5E76\u53D1\u4F1A\u5E26\u6765\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1\u5E76\u53D1\u4F1A\u5E26\u6765\u7684\u95EE\u9898" aria-hidden="true">#</a> \u4E8B\u52A1\u5E76\u53D1\u4F1A\u5E26\u6765\u7684\u95EE\u9898</h2><h2 id="\u4E8B\u52A1\u9694\u79BB\u6027\u548C\u9501\u7684\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u52A1\u9694\u79BB\u6027\u548C\u9501\u7684\u5173\u7CFB" aria-hidden="true">#</a> \u4E8B\u52A1\u9694\u79BB\u6027\u548C\u9501\u7684\u5173\u7CFB</h2><h2 id="\u884C\u9501\u7684\u539F\u7406\u548C\u7B97\u6CD5\u8BE6\u89E3" tabindex="-1"><a class="header-anchor" href="#\u884C\u9501\u7684\u539F\u7406\u548C\u7B97\u6CD5\u8BE6\u89E3" aria-hidden="true">#</a> \u884C\u9501\u7684\u539F\u7406\u548C\u7B97\u6CD5\u8BE6\u89E3</h2><h1 id="mysql\u6027\u80FD\u4F18\u5316\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#mysql\u6027\u80FD\u4F18\u5316\u603B\u7ED3" aria-hidden="true">#</a> MySQL\u6027\u80FD\u4F18\u5316\u603B\u7ED3</h1><p>\u4F18\u5316\u4ECE\u4F55\u5165\u624B\uFF1F</p><p>\u8FDE\u63A5\uFF1A</p><ul><li>too many connection</li><li>(\u8FDE\u63A5\u6C60)\u65E0\u6CD5\u83B7\u53D6\u8FDE\u63A5</li></ul><p>\u89E3\u51B3\uFF1A</p><ul><li>\u589E\u5927\u53EF\u7528\u7684\u8FDE\u63A5\u6570(\u9ED8\u8BA4151)</li><li>\u51CF\u5C11\u5E94\u7528\u4ECE\u6570\u636E\u5E93\u83B7\u53D6\u7684\u8FDE\u63A5\u6570 <ul><li>\u51CF\u5C11\u8D85\u65F6\u65F6\u95F4\u6765\u63D0\u65E9\u91CA\u653E\u957F\u8FDE\u63A5(\u9ED8\u8BA48\u5C0F\u65F6)</li><li>\u63D0\u9AD8\u8FDE\u63A5\u590D\u7528\u7387(\u8FDE\u63A5\u6C60)</li></ul></li></ul><p>\u67E5\u8BE2\u4F18\u5316\u5668\uFF1A</p><p>\u8BB0\u5F55\u6162\u67E5\u8BE2\u65E5\u5FD7(slow query log)\uFF0C\u9ED8\u8BA4\u5173\u95ED\u3002</p><p>mysqldumpslow\u5DE5\u5177\u6765\u5206\u6790\u6162\u65E5\u5FD7</p><p>show profiles \u67E5\u770Bsql\u8BED\u53E5\u53CA\u5176\u6267\u884C\u7684\u65F6\u95F4</p><p>\u4F18\u5316\u7684\u4F18\u5148\u7EA7\u4ECE\u4E0A\u5230\u4E0B\uFF1B\u96BE\u5EA6\u8D8A\u5C0F\uFF0C\u6536\u76CA\u8D8A\u9AD8</p><ul><li><p>sql\u8BED\u53E5\u548C\u7D22\u5F15\u7684\u4F18\u5316</p><ul><li>\u5C3D\u91CF\u4F7F\u7528\u7D22\u5F15</li><li>\u4F7F\u7528\u597D\u7684\u7D22\u5F15</li></ul></li><li><p>\u5B58\u50A8\u5F15\u64CE\u548C\u8868\u7ED3\u6784\u7684\u4F18\u5316</p><ul><li>\u5B58\u50A8\u5F15\u64CE <ul><li>\u67E5\u8BE2\u548C\u64CD\u4F5C\u6BD4\u8F83\u591A\uFF0CMyISAM</li><li>\u4E34\u65F6\u6570\u636E\uFF0CMemory</li><li>\u5E38\u89C4\uFF0C\u5E76\u53D1\u5927\uFF0C\u66F4\u65B0\u591A\uFF0CInnoDB</li></ul></li><li>\u8868\u7ED3\u6784 <ul><li>\u62C6\u5206\u5927\u8868</li><li>\u5206\u533A\uFF1A\u628A\u6570\u636E\u653E\u5230\u4E0D\u540C\u7684\u6587\u4EF6\u5939\u4E2D\u5B58\u653E\uFF0C<strong>\u6CBB\u6807\u4E0D\u6CBB\u672C\u7684\u505A\u6CD5</strong></li><li>\u5B57\u6BB5\u9009\u62E9\u539F\u5219\uFF1A\u4F7F\u7528\u53EF\u4EE5\u6B63\u786E\u5B58\u50A8\u8FD9\u4E2A\u6570\u636E\u7684\u6700\u5C0F\u7684\u6570\u636E\u7C7B\u578B\u3002\u5982\uFF1A\u6027\u522B\u5B57\u6BB5\u4F7F\u7528<code>tinyint(1)</code></li><li>\u4E0D\u5141\u8BB8\u4E3A\u7A7A\u7684\u5B57\u6BB5\u90FD\u5B9A\u4E49\u6210not null</li><li>\u5C11\u7528\u5B58\u50A8\u8FC7\u7A0B\u3001\u5916\u952E\u3001\u89C6\u56FE\uFF0C\u628A\u8FD9\u90E8\u5206\u5DE5\u4F5C\u653E\u5230\u7A0B\u5E8F\u91CC\u9762\u8FDB\u884C</li></ul></li></ul></li><li><p>\u67B6\u6784\u4F18\u5316</p><ul><li>\u4F7F\u7528\u7F13\u5B58\uFF0C\u4E0D\u7528\u6BCF\u6B21\u90FD\u76F4\u63A5\u548C\u6570\u636E\u5E93\u8FDE\u63A5</li><li>\u4E3B\u4ECE\u590D\u5236(\u8BFB\u5199\u5206\u79BB)\uFF0C\u5199-\u4E3B\uFF1B\u8BFB-\u4ECE</li><li>\u5782\u76F4\u5206\u5E93(\u628A\u4E0D\u540C\u7684\u6A21\u5757\u4F7F\u7528\u5230\u7684\u5E93\u5206\u522B\u72EC\u7ACB\u51FA\u6765)\uFF0C\u5173\u8054\u67E5\u8BE2\u7684\u8BDD\u4F7F\u7528\u5B57\u6BB5\u5197\u4F59</li><li>\u6C34\u5E73\u5206\u8868(\u628A\u5927\u8868\u6C34\u5E73\u5206\u5F00\u6210\u51E0\u4E2A\u5C0F\u8868)</li></ul></li><li><p>\u914D\u7F6E\u4F18\u5316(\u66F4\u597D\u5730\u53D1\u6325\u786C\u4EF6\u7684\u529F\u80FD)</p><ul><li>mysql\u914D\u7F6E\u4F18\u5316</li></ul></li><li><p>\u64CD\u4F5C\u7CFB\u7EDF\u548C\u786C\u4EF6\u4F18\u5316</p><ul><li>\u56FA\u6001\u786C\u76D8\u66FF\u6362\u673A\u68B0\u786C\u76D8</li></ul></li></ul><h1 id="sql\u8BED\u53E5\u6267\u884C\u6162\u7684\u539F\u56E0" tabindex="-1"><a class="header-anchor" href="#sql\u8BED\u53E5\u6267\u884C\u6162\u7684\u539F\u56E0" aria-hidden="true">#</a> SQL\u8BED\u53E5\u6267\u884C\u6162\u7684\u539F\u56E0</h1><h2 id="\u5199" tabindex="-1"><a class="header-anchor" href="#\u5199" aria-hidden="true">#</a> \u5199</h2><ul><li>\u5F53 redo log \u5199\u6EE1\u65F6\u5C31\u4F1A\u8FDB\u884C\u5237\u810F\u9875\uFF0C\u6B64\u65F6\u5199\u64CD\u4F5C\u4E5F\u4F1A\u7EC8\u6B62\uFF0C\u90A3\u4E48 SQL \u6267\u884C\u81EA\u7136\u5C31\u4F1A\u53D8\u6162\u3002</li><li>\u9047\u5230\u6240\u8981\u4FEE\u6539\u7684\u6570\u636E\u884C\u6216\u8868\u52A0\u4E86\u9501\u65F6\uFF0C\u9700\u8981\u7B49\u5F85\u9501\u91CA\u653E\u540E\u624D\u80FD\u8FDB\u884C\u540E\u7EED\u64CD\u4F5C\uFF0CSQL \u6267\u884C\u4E5F\u4F1A\u53D8\u6162\u3002</li></ul><h2 id="\u8BFB" tabindex="-1"><a class="header-anchor" href="#\u8BFB" aria-hidden="true">#</a> \u8BFB</h2><ul><li>\u8BFB\u64CD\u4F5C\u6162\u5E38\u89C1\u7684\u539F\u56E0\u662F\u672A\u547D\u4E2D\u7D22\u5F15\u4ECE\u800C\u5BFC\u81F4\u5168\u8868\u626B\u63CF\uFF0C\u53EF\u4EE5\u901A\u8FC7 explain \u65B9\u5F0F\u5BF9 SQL \u8BED\u53E5\u8FDB\u884C\u5206\u6790\u3002</li><li>\u5728\u8BFB\u64CD\u4F5C\u65F6\uFF0C\u8981\u8BFB\u5165\u7684\u6570\u636E\u9875\u4E0D\u5728\u5185\u5B58\u4E2D\uFF0C\u9700\u8981\u901A\u8FC7\u6DD8\u6C70\u810F\u9875\u624D\u80FD\u7533\u8BF7\u65B0\u7684\u6570\u636E\u9875\u4ECE\u800C\u5BFC\u81F4\u6267\u884C\u53D8\u6162\u3002\u6211\u4EEC\u9700\u8981\u63A7\u5236\u810F\u9875\u7684\u6BD4\u4F8B\uFF0C\u4E0D\u8981\u8BA9\u5B83\u7ECF\u5E38\u63A5\u8FD1 75%\u3002\u540C\u65F6\u8FD8\u8981\u63A7\u5236 redo log \u7684\u5199\u76D8\u901F\u5EA6\uFF0C\u5E76\u4E14\u901A\u8FC7\u8BBE\u7F6E innodb_io_capacity \u53C2\u6570\u544A\u8BC9 InnoDB \u4F60\u7684\u78C1\u76D8\u80FD\u529B\u3002</li></ul>`,468),a=[d];function r(t,c){return i(),l("div",null,a)}var m=e(s,[["render",r],["__file","MySQL.html.vue"]]);export{m as default};
