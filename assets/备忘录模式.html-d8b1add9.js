import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-859571d0.js";const p={},e=t(`<h1 id="备忘录模式" tabindex="-1"><a class="header-anchor" href="#备忘录模式" aria-hidden="true">#</a> 备忘录模式</h1><p>定义：在不破坏封装的前提下，捕获一个对象的内部状态的快照，并在对象之外保存这个状态的快照。这样以后可以将对象恢复到之前保存的状态</p><p>适用场景：</p><ol><li>需要保存历史快照</li><li>希望在对象之外保存状态，且除了自己，其他类对象无法访问状态保存具体内容</li></ol><p>优点：</p><ol><li>简化备忘录发起人职责，隔离快照存储与获取，实现了信息的封装，客户端无需关心快照的存储细节</li><li>提供快照回滚功能</li></ol><p>缺点：存储快照需要消耗资源，当需要保存的快照过多的时候，会对内存产生压力</p><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h2><p>用编辑器的草稿箱、撤销操作来演示备忘录模式，利用栈这种数据结构来存储文章的快照</p><p>文章编辑器，充当备忘录发起角色，里面存储的是文章的信息，另外关键还包括保存到备忘录和从备忘录恢复的方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Editor</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> imgs<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Editor</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">,</span> <span class="token class-name">String</span> imgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgs <span class="token operator">=</span> imgs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token class-name">ArticleMemento</span> <span class="token function">saveToMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ArticleMemento</span> articleMemento <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArticleMemento</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>imgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> articleMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">undoFromMemento</span><span class="token punctuation">(</span><span class="token class-name">ArticleMemento</span> articleMemento<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> articleMemento<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> articleMemento<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgs <span class="token operator">=</span> articleMemento<span class="token punctuation">.</span><span class="token function">getImgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>备忘录角色，用于记录文章快照</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArticleMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> imgs<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ArticleMemento</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">,</span> <span class="token class-name">String</span> imgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgs <span class="token operator">=</span> imgs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>草稿箱，用于管理备忘录</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DraftsBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArticleMemento</span><span class="token punctuation">&gt;</span></span> <span class="token constant">STACK</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ArticleMemento</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ArticleMemento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ArticleMemento</span> articleMemento <span class="token operator">=</span> <span class="token constant">STACK</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> articleMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addMemento</span><span class="token punctuation">(</span><span class="token class-name">ArticleMemento</span> articleMemento<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token constant">STACK</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>articleMemento<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>客户端调用</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">DraftsBox</span> draftsBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DraftsBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Editor</span> editor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Editor</span><span class="token punctuation">(</span><span class="token string">&quot;标题1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;内容1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;插图1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第一次存储快照</span>
        <span class="token class-name">ArticleMemento</span> articleMemento <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">saveToMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        draftsBox<span class="token punctuation">.</span><span class="token function">addMemento</span><span class="token punctuation">(</span>articleMemento<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第一次修改文章</span>
        editor<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;标题2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">&quot;内容2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第二次存储快照</span>
        articleMemento <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">saveToMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        draftsBox<span class="token punctuation">.</span><span class="token function">addMemento</span><span class="token punctuation">(</span>articleMemento<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第二次修改文章</span>
        editor<span class="token punctuation">.</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">&quot;标题3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">&quot;内容3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第一次撤销 标题：标题2；内容：内容2</span>
        articleMemento <span class="token operator">=</span> draftsBox<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">undoFromMemento</span><span class="token punctuation">(</span>articleMemento<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 第二次撤销 标题：标题1；内容：内容1</span>
        articleMemento <span class="token operator">=</span> draftsBox<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        editor<span class="token punctuation">.</span><span class="token function">undoFromMemento</span><span class="token punctuation">(</span>articleMemento<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="备忘录模式在源码中的体现" tabindex="-1"><a class="header-anchor" href="#备忘录模式在源码中的体现" aria-hidden="true">#</a> 备忘录模式在源码中的体现</h2><p>备忘录模式在框架源码中应用比较少，还是要结合具体场景来使用</p>`,19),o=[e];function c(l,i){return s(),a("div",null,o)}const r=n(p,[["render",c],["__file","备忘录模式.html.vue"]]);export{r as default};
