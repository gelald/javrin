import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";import{r as n,o as s,c as i,a as e,b as o,e as r,d as c}from"./app.165f1a8e.js";const d={},h=e("h1",{id:"rocketmq-learning",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#rocketmq-learning","aria-hidden":"true"},"#"),r(" RocketMQ-Learning")],-1),l=e("blockquote",null,[e("p",null,"\u8FD9\u4E2A\u9879\u76EE\u4F7F\u7528\u4E24\u79CD\u4F9D\u8D56\u65B9\u5F0F\u6574\u5408\u4E86 RocketMQ \u5E38\u89C1\u7684\u4F7F\u7528\u65B9\u5F0F"),e("p",null,"\u9002\u5408\u5165\u95E8\u5B66\u4E60\u7684\u5C0F\u4F19\u4F34\uFF0C\u4E5F\u53EF\u4EE5\u4F5C\u4E3A\u5E73\u65F6\u5F00\u53D1\u8981\u4F7F\u7528 RocketMQ \u65F6\u53C2\u8003\u7684\u539F\u578B")],-1),m=r("\u9879\u76EE Github \u4F20\u9001\u95E8 \u{1F449} : "),p={href:"https://github.com/gelald/rocketmq-learning",target:"_blank",rel:"noopener noreferrer"},u=r("rocketmq-learning"),k=r("\uFF0C\u5982\u679C\u5E2E\u5230\u4F60\u4E86\uFF0C\u9EBB\u70E6\u7ED9\u6211\u4E00\u4E2A star \u5662 \u{1F60A}"),g=c('<h2 id="\u6A21\u5757\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u6A21\u5757\u8BF4\u660E" aria-hidden="true">#</a> \u6A21\u5757\u8BF4\u660E</h2><h3 id="rocketmq-learning-1" tabindex="-1"><a class="header-anchor" href="#rocketmq-learning-1" aria-hidden="true">#</a> rocketmq-learning</h3><p>\u8FD9\u4E2A\u662F\u6240\u6709\u6A21\u5757\u7684\u7236\u5DE5\u7A0B\uFF0C\u4E3B\u8981\u662F\u7EDF\u4E00\u5B50\u5DE5\u7A0B\u4F7F\u7528\u7684\u4F9D\u8D56\u7248\u672C\uFF0C\u7EDF\u4E00\u6253\u5305\u914D\u7F6E</p><p>\u672C\u9879\u76EE\u4F7F\u7528\u7684\u4E3B\u8981\u4F9D\u8D56\u7684\u7248\u672C:</p><table><thead><tr><th>\u{1F527}\u4F9D\u8D56</th><th>\u{1F4D6}\u7248\u672C</th></tr></thead><tbody><tr><td>spring-boot</td><td>2.6.1</td></tr><tr><td>rocketmq-client</td><td>4.9.3</td></tr><tr><td>rocketmq-spring-boot-starter</td><td>2.2.2</td></tr></tbody></table><h3 id="rocketmq-common" tabindex="-1"><a class="header-anchor" href="#rocketmq-common" aria-hidden="true">#</a> rocketmq-common</h3><p>\u8FD9\u4E2A\u6A21\u5757\u8D1F\u8D23\u4E86\u4E00\u4E9B\u57FA\u7840\u76F8\u5173\u7684\u5DE5\u4F5C\uFF0C\u80FD\u8BA9\u5176\u4ED6\u6A21\u5757\u66F4\u4E13\u6CE8 RocketMQ \u7684\u4F7F\u7528\uFF1A</p><ul><li>\u7EDF\u7B79\u5171\u7528\u7684\u5E38\u91CF</li><li>\u7EDF\u4E00\u5F02\u5E38\u5904\u7406</li><li>\u7EDF\u4E00\u5305\u88C5\u54CD\u5E94</li><li>knife4j \u7EDF\u4E00\u914D\u7F6E</li></ul><h3 id="rocketmq-client" tabindex="-1"><a class="header-anchor" href="#rocketmq-client" aria-hidden="true">#</a> rocketmq-client</h3><p>\u8FD9\u4E2A\u6A21\u5757\u5C55\u793A\u4E86 SpringBoot \u96C6\u6210 rocketmq-client \u7684\u4F7F\u7528\u65B9\u5F0F</p><p>\u5176\u4E2D <code>rocketmq-consumer-client</code> \u662F\u6D88\u8D39\u8005\u6A21\u5757\uFF0C<code>rocketmq-producer-client</code> \u662F\u751F\u4EA7\u8005\u6A21\u5757</p><h3 id="rocketmq-starter" tabindex="-1"><a class="header-anchor" href="#rocketmq-starter" aria-hidden="true">#</a> rocketmq-starter</h3><p>\u8FD9\u4E2A\u6A21\u5757\u5C55\u793A\u4E86 SpringBoot \u96C6\u6210 rocketmq-spring-boot-starter \u7684\u4F7F\u7528\u65B9\u5F0F</p><p>\u5176\u4E2D <code>rocketmq-consumer-starter</code> \u662F\u6D88\u8D39\u8005\u6A21\u5757\uFF0C<code>rocketmq-producer-starter</code> \u662F\u751F\u4EA7\u8005\u6A21\u5757</p><h2 id="\u90E8\u7F72\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72\u8BF4\u660E" aria-hidden="true">#</a> \u90E8\u7F72\u8BF4\u660E</h2><h3 id="rocketmq-\u90E8\u7F72\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#rocketmq-\u90E8\u7F72\u65B9\u5F0F" aria-hidden="true">#</a> RocketMQ \u90E8\u7F72\u65B9\u5F0F</h3><p>RocketMQ \u90E8\u7F72\u65B9\u5F0F\u5B98\u7F51\u4E2D\u63D0\u4F9B\u4E86\u6E90\u7801\u90E8\u7F72\u65B9\u5F0F\uFF0C\u6211\u4EEC\u8FD9\u91CC\u4F7F\u7528 docker-compose \u7684\u90E8\u7F72\u65B9\u5F0F</p><p>\u5728 rocketmq-learning \u4E0B\u6709\u4E00\u4E2A\u76EE\u5F55 docker\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u4E0B\u5305\u542B\u4E86\uFF1A</p><ul><li>docker-compose.yaml\uFF1Adocker compose \u914D\u7F6E\u6587\u4EF6\uFF0C\u91CC\u9762\u5DF2\u7ECF\u7F16\u8F91\u597D name-server\u3001broker\u3001dashboard \u4E09\u4E2A\u5BB9\u5668\u542F\u52A8\u7684\u76F8\u5173\u914D\u7F6E</li><li>rocketmq-broker\uFF1Abroker \u5BB9\u5668\u4E2D\u6302\u8F7D\u7684\u76EE\u5F55\uFF0C\u5176\u4E2D conf \u76EE\u5F55\u4E0B\u662F broker \u7684\u542F\u52A8\u914D\u7F6E\uFF0C\u542F\u52A8\u65F6\u9700\u8981\u4FEE\u6539\u5176\u4E2D\u7684 brokerIP1 \u4E3A\u672C\u673A IP \u5730\u5740</li><li>rocketmq-dashboard\uFF1Adashboard \u5BB9\u5668\u4E2D\u6302\u8F7D\u7684\u76EE\u5F55</li><li>rocketmq-name-server\uFF1Aname-server \u5BB9\u5668\u4E2D\u6302\u8F7D\u7684\u76EE\u5F55</li></ul><p>\u542F\u52A8\u65B9\u5F0F\uFF1A\u5728 docker-compose.yaml \u6587\u4EF6\u540C\u76EE\u5F55\u4E0B\u6253\u5F00\u7EC8\u7AEF\uFF0C\u8F93\u5165\u547D\u4EE4 <code>docker-compose up -d</code> \u542F\u52A8</p><p>\u9A8C\u8BC1\u662F\u5426\u542F\u52A8\u6210\u529F\uFF1A\u8F93\u5165\u547D\u4EE4 <code>docker-compose ps</code> \u53EF\u4EE5\u770B\u5230 name-server\u3001broker\u3001dashboard \u4E09\u4E2A\u5BB9\u5668</p>',21),_=r("\u5176\u4E2D broker \u5BB9\u5668\u6709\u53EF\u80FD\u4F1A "),b=e("code",null,"exited with code 253",-1),q=r("\uFF0C\u89E3\u51B3\u65B9\u6CD5\u53EF\u4EE5\u770B\u8FD9\u7BC7\u6587\u7AE0\uFF1A"),f={href:"https://blog.csdn.net/weixin_43955543/article/details/124047740",target:"_blank",rel:"noopener noreferrer"},x=r("Docker \u642D\u5EFA\u90E8\u7F72 RocketMQ \u9047\u5230broker 253\u95EE\u9898"),M=c('<h3 id="\u9879\u76EE\u90E8\u7F72\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u90E8\u7F72\u65B9\u5F0F" aria-hidden="true">#</a> \u9879\u76EE\u90E8\u7F72\u65B9\u5F0F</h3><p>\u65E0\u8BBA\u662F\u4F7F\u7528\u54EA\u4E00\u79CD\u96C6\u6210\u65B9\u5F0F\uFF0C\u542F\u52A8\u524D\u90FD\u8981\u5728\u751F\u4EA7\u8005\u6D88\u8D39\u8005\u6A21\u5757\u4E2D resource \u76EE\u5F55\u4E0B\u7684 application.yml \u6587\u4EF6\u4E2D\u4FEE\u6539 name-server \u5730\u5740</p><p>\u5982\u9700\u542F\u52A8\u5176\u4ED6\u751F\u4EA7\u8005/\u6D88\u8D39\u8005\uFF0C\u9700\u8981\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u624B\u52A8\u8BBE\u7F6E\u4E3A true\uFF0C\u5177\u4F53\u5728\u4E0B\u9762\u8BE6\u7EC6\u8BF4\u660E\u3002</p><p>\u56E0\u4E3A\u751F\u4EA7\u8005\u9879\u76EE\u4E2D\u90FD\u96C6\u6210\u4E86knife4j\u6587\u6863\u7EC4\u4EF6\uFF0C\u6240\u4EE5\u6B63\u5E38\u542F\u52A8\u7684\u6807\u5FD7\u662F\u80FD\u6253\u5F00\u6587\u6863\u9875\u9762\u{1F447}\u3002</p><table><thead><tr><th>rocketmq-client</th><th>rocketmq-starter</th></tr></thead><tbody><tr><td><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20220904181131.png" alt=""></td><td><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20220904181402.png" alt=""></td></tr></tbody></table><h2 id="\u6A21\u5757\u8BE6\u7EC6\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u6A21\u5757\u8BE6\u7EC6\u8BF4\u660E" aria-hidden="true">#</a> \u6A21\u5757\u8BE6\u7EC6\u8BF4\u660E</h2><p>\u8FD9\u91CC\u4ECB\u7ECD\u4E24\u4E2A\u6A21\u5757\u7684\u4F7F\u7528\u65B9\u5F0F\u4EE5\u53CA\u4E00\u4E9B\u7279\u522B\u7684\u8BBE\u8BA1</p><h3 id="rocketmq-client-1" tabindex="-1"><a class="header-anchor" href="#rocketmq-client-1" aria-hidden="true">#</a> rocketmq-client</h3>',8),v=r("\u53EF\u4EE5\u914D\u5408\u96C6\u6210 "),Q=e("code",null,"rocketmq-client",-1),R=r(" \u7684\u843D\u5730\u5B9E\u73B0\u8BB2\u89E3\u6765\u4E00\u8D77\u5B66\u4E60\uFF1A"),C={href:"https://gelald.github.io/javrin/writings/message-queue/RocketMQ-operation-client.html",target:"_blank",rel:"noopener noreferrer"},y=r("RocketMQ \u64CD\u4F5C\u843D\u5730 (rocketmq-client \u65B9\u5F0F)"),w=c(`<h4 id="rocketmq-consumer-client" tabindex="-1"><a class="header-anchor" href="#rocketmq-consumer-client" aria-hidden="true">#</a> rocketmq-consumer-client</h4><p>\u5B9A\u4E49\u6D88\u8D39\u8005\u7684\u914D\u7F6E\u7C7B\u90FD\u9700\u8981\u7EE7\u627F\u57FA\u7C7B <code>RocketMQBaseConsumerConfiguration</code>\uFF0C\u5E76\u4E14\u5728\u5B9A\u4E49\u65F6\u90FD\u9700\u8981\u628A\u5B9A\u4E49\u51FA\u6765\u7684\u751F\u4EA7\u8005\u52A0\u5165\u5230\u57FA\u7C7B\u4E2D\u7BA1\u7406\u6D88\u8D39\u8005\u7684 <code>mqConsumers</code> \u96C6\u5408\u4E2D\u3002\u8FD9\u6837\u505A\u7684\u76EE\u7684\u662F\u57FA\u7C7B\u5B9E\u73B0\u4E86 <code>DisposableBean</code> \u8FD9\u4E2A\u540E\u7F6E\u5904\u7406\u5668\uFF0C\u5728\u9500\u6BC1 Bean \u7684\u65F6\u5019\u5148\u628A\u96C6\u5408\u4E2D\u6240\u6709\u7684\u751F\u4EA7\u8005\u90FD\u9010\u4E00\u9500\u6BC1\uFF0C\u4EE5\u4FBF\u91CA\u653E\u8D44\u6E90\u3002</p><p>\u6D88\u8D39\u8005\u4E0E\u6D88\u606F\u76D1\u542C\u5668\u7684\u5B9A\u4E49\u5206\u79BB\uFF0C\u65B9\u4FBF\u72EC\u7ACB\u7EF4\u62A4\uFF0C\u6BCF\u4E00\u4E2A\u6D88\u8D39\u8005\u5B9A\u4E49\u65F6\u90FD\u8981\u4F20\u5165\u7279\u5B9A\u7684\u4E00\u4E2A\u6D88\u606F\u76D1\u542C\u5668\uFF0C\u4F20\u5165\u7684\u76D1\u542C\u5668\u53D8\u91CF\u540D\u4E3A\u76D1\u542C\u5668\u7C7B\u540D<strong>\u9996\u5B57\u6BCD\u5C0F\u5199</strong>\uFF0C\u8FD9\u6837 Spring \u53EF\u4EE5\u6839\u636E\u540D\u5B57\u5BFB\u627E\u5177\u4F53\u7684 Bean \u6CE8\u5165\u3002</p><p>\u4F8B\u5982\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Bean
public DefaultMQPushConsumer defaultMQPushConsumer(MessageListenerConcurrently defaultListener) throws MQClientException {
        ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9664\u4E86\u9ED8\u8BA4\u7684\u6D88\u8D39\u8005\uFF0C\u5176\u4ED6\u8BB0\u5F55\u5728 <code>RocketMQConsumerProperties.ConsumerSwitch</code> \u7C7B\u578B\u7684\u6D88\u8D39\u8005\u652F\u6301\u5F00\u5173\u914D\u7F6E\uFF0C\u5F00\u5173\u914D\u7F6E\u662F\u4E3A\u4E86\u4E0D\u542F\u52A8\u6240\u6709\u7684\u6D88\u8D39\u8005\u4EE5\u4FBF\u8282\u7701\u8D44\u6E90\uFF0C\u5F53\u7136\u5168\u90E8\u8BBE\u7F6E\u4E3A <code>true</code> \u4E5F\u662F\u80FD\u6B63\u5E38\u542F\u52A8\u7684\u3002</p><h4 id="rocketmq-producer-client" tabindex="-1"><a class="header-anchor" href="#rocketmq-producer-client" aria-hidden="true">#</a> rocketmq-producer-client</h4><p>\u4E0E\u6D88\u8D39\u8005\u4E00\u81F4\uFF0C\u5B9A\u4E49\u751F\u4EA7\u8005\u7684\u914D\u7F6E\u7C7B\u4E5F\u9700\u8981\u7EE7\u627F\u57FA\u7C7B <code>RocketMQBaseProducerConfiguration</code>\uFF0C\u5E76\u4E14\u5728\u5B9A\u4E49\u65F6\u4E5F\u9700\u8981\u628A\u751F\u4EA7\u8005\u52A0\u5165 <code>mqProducers</code> \u96C6\u5408\u4E2D\u3002</p><p>\u9664\u4E86\u9ED8\u8BA4\u7684\u751F\u4EA7\u8005\uFF0C\u987A\u5E8F\u6D88\u606F\u751F\u4EA7\u8005\u548C\u4E8B\u52A1\u6D88\u606F\u751F\u4EA7\u8005\u652F\u6301\u5F00\u5173\u914D\u7F6E\uFF0C\u914D\u7F6E\u9879\u53EF\u4EE5\u53C2\u8003 <code>RocketMQProducerProperties.ProducerSwitch</code>\uFF0C\u5168\u90E8\u8BBE\u7F6E\u4E3A <code>true</code> \u4E5F\u662F\u53EF\u4EE5\u6B63\u5E38\u542F\u52A8\u7684\u3002</p><p>\u4E3A\u4E86\u65B9\u4FBF\u5927\u5BB6\u5B66\u4E60\u8C03\u8BD5\uFF0C\u672C\u9879\u76EE\u96C6\u6210\u4E86 knife4j \u6587\u6863\u7EC4\u4EF6\uFF0C\u76F4\u63A5\u6253\u5F00 localhost:9091/doc.html \u5C31\u80FD\u8FDB\u884C\u8C03\u8BD5\u4E86\uFF0C\u6B63\u5E38\u542F\u52A8\u540E\u7684\u754C\u9762\uFF1A</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20220905161550.png" alt=""></p><h3 id="rocketmq-starter-1" tabindex="-1"><a class="header-anchor" href="#rocketmq-starter-1" aria-hidden="true">#</a> rocketmq-starter</h3>`,12),P=r("\u53EF\u4EE5\u914D\u5408\u96C6\u6210 "),B=e("code",null,"rocketmq-spring-boot-starter",-1),L=r(" \u7684\u843D\u5730\u5B9E\u73B0\u8BB2\u89E3\u6765\u4E00\u8D77\u5B66\u4E60\uFF1A"),S={href:"https://gelald.github.io/javrin/writings/message-queue/RocketMQ-operation-starter.html",target:"_blank",rel:"noopener noreferrer"},j=r("RocketMQ \u64CD\u4F5C\u843D\u5730 (rocketmq-starter \u65B9\u5F0F)"),z=c('<h4 id="rocketmq-consumer-starter" tabindex="-1"><a class="header-anchor" href="#rocketmq-consumer-starter" aria-hidden="true">#</a> rocketmq-consumer-starter</h4><p>\u4F7F\u7528\u8FD9\u79CD\u96C6\u6210\u65B9\u5F0F\u5B9A\u4E49\u6D88\u8D39\u8005\u53D8\u5F97\u975E\u5E38\u7B80\u5355\uFF0C\u76F4\u63A5\u4F7F\u7528\u6CE8\u89E3 <code>@RocketMQMessageListener</code>\uFF0C\u53E6\u5916\u5982\u679C\u540C\u4E00\u4E2A\u7EC4\u8981\u5B9A\u4E49\u591A\u4E2A\u6D88\u8D39\u8005\u5B9E\u4F8B\uFF0C\u90A3\u4E48\u9700\u8981\u5B9E\u73B0\u63A5\u53E3 <code>RocketMQPushConsumerLifecycleListener</code> \u6765\u4FEE\u6539\u5B9E\u4F8B\u540D\u3002</p><p>\u9664\u4E86\u9ED8\u8BA4\u7684\u6D88\u8D39\u8005\uFF0C\u5176\u4ED6\u8BB0\u5F55\u5728 <code>RocketMQConsumerProperties.ConsumerSwitch</code> \u7C7B\u578B\u7684\u6D88\u8D39\u8005\u652F\u6301\u5F00\u5173\u914D\u7F6E\uFF0C\u5F00\u5173\u914D\u7F6E\u662F\u4E3A\u4E86\u4E0D\u542F\u52A8\u6240\u6709\u7684\u6D88\u8D39\u8005\u4EE5\u4FBF\u8282\u7701\u8D44\u6E90\uFF0C\u5F53\u7136\u5168\u90E8\u8BBE\u7F6E\u4E3A <code>true</code> \u4E5F\u662F\u80FD\u6B63\u5E38\u542F\u52A8\u7684\u3002</p><h4 id="rocketmq-producer-starter" tabindex="-1"><a class="header-anchor" href="#rocketmq-producer-starter" aria-hidden="true">#</a> rocketmq-producer-starter</h4><p>\u4F7F\u7528\u8FD9\u79CD\u96C6\u6210\u65B9\u5F0F\u540E\uFF0C\u76F4\u63A5\u4F7F\u7528\u6846\u67B6\u4E2D\u5B9A\u4E49\u597D\u7684\u751F\u4EA7\u8005\u5C31\u53EF\u4EE5\u4E86\uFF0C\u975E\u5E38\u65B9\u4FBF\u3002</p><p>\u5176\u4E2D <code>LocalTransactionListener</code> \u662F\u751F\u4EA7\u8005\u4E8B\u52A1\u6D88\u606F\u76D1\u542C\u5668\uFF0C\u8D1F\u8D23\u6267\u884C\u672C\u5730\u4E8B\u52A1\u4EE5\u53CA\u63D0\u4F9B\u4E8B\u52A1\u56DE\u67E5\u3002</p><p>\u4E3A\u4E86\u65B9\u4FBF\u5927\u5BB6\u5B66\u4E60\u8C03\u8BD5\uFF0C\u672C\u9879\u76EE\u96C6\u6210\u4E86 knife4j \u6587\u6863\u7EC4\u4EF6\uFF0C\u76F4\u63A5\u6253\u5F00 localhost:9093/doc.html \u5C31\u80FD\u8FDB\u884C\u8C03\u8BD5\u4E86\uFF0C\u6B63\u5E38\u542F\u52A8\u540E\u7684\u754C\u9762\uFF1A</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/20220905165851.png" alt=""></p>',8);function E(I,N){const t=n("ExternalLinkIcon");return s(),i("div",null,[h,l,e("p",null,[m,e("a",p,[u,o(t)]),k]),g,e("p",null,[_,b,q,e("a",f,[x,o(t)])]),M,e("p",null,[v,Q,R,e("a",C,[y,o(t)])]),w,e("p",null,[P,B,L,e("a",S,[j,o(t)])]),z])}var T=a(d,[["render",E],["__file","RocketMQ-learning.html.vue"]]);export{T as default};
