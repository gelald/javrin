import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as i,e as t}from"./app-f9042815.js";const d={},n=t(`<h1 id="nginx-配置记录" tabindex="-1"><a class="header-anchor" href="#nginx-配置记录" aria-hidden="true">#</a> Nginx 配置记录</h1><h2 id="root-与-alias区别" tabindex="-1"><a class="header-anchor" href="#root-与-alias区别" aria-hidden="true">#</a> root 与 alias区别</h2><p>nginx 指定⽂件路径有两种⽅式 root 和 alias，root 与 alias 主要区别在于 nginx 如何解释 location 后⾯的 uri，这会使两者分别以不同的⽅式将请求映射到服务器⽂件上。</p><h3 id="root" tabindex="-1"><a class="header-anchor" href="#root" aria-hidden="true">#</a> root</h3><p>root 指定⽬录的上级⽬录，并且该上级⽬录要含有 locatoin 指定名称的同名⽬录。</p><p>以root⽅式设置资源路径：</p><ul><li><p>语法：root path</p></li><li><p>配置块：http、server、location、if</p></li></ul><p>例子：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /img/ {
	alias /var/www/image/;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若按照上述配置的话，则访问 <code>/img/</code> ⽬录⾥⾯的⽂件时，nginx 会⾃动去 <code>/var/www/image/</code> ⽬录找⽂件</p><h3 id="alias" tabindex="-1"><a class="header-anchor" href="#alias" aria-hidden="true">#</a> alias</h3><p>alias 指定的⽬录是准确的，给location指定⼀个⽬录。</p><p>以 alias ⽅式设置资源路径：</p><ul><li><p>语法：alias path。需要注意的是目录后面一定要有 <code>/</code></p></li><li><p>配置块：location</p></li></ul><p>例子：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /img/ {
	root /var/www/image;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若按照这种配置的话，则访问 <code>/img/</code> ⽬录下的⽂件时，nginx 会去 <code>/var/www/image/img/</code> ⽬录下找⽂件</p><h2 id="proxy-pass-与-的关系" tabindex="-1"><a class="header-anchor" href="#proxy-pass-与-的关系" aria-hidden="true">#</a> proxy_pass 与 / 的关系</h2><p>在 nginx 中配置 proxy_pass 代理转发时</p><ul><li>如果在 proxy_pass 后面的 url 加 <code>/</code>，表示绝对根路径；</li><li>如果没有 <code>/</code>，表示相对路径，把匹配的路径部分也给代理走。</li></ul><p>假设下面四种情况分别用 <code>http://127.0.0.1/proxy/test.html</code> 进行访问。</p><p>第一种：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /proxy/ {
	proxy_pass http://192.168.0.120/;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问的 URL：<code>http://127.0.0.1/proxy/test.html</code></p><p>代理到 URL：<code>http://192.168.0.120/test.html</code></p><p>第二种（相对于第一种，最后少一个 / ）</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /proxy/ {
	proxy_pass http://192.168.0.120;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问的 URL：<code>http://127.0.0.1/proxy/test.html</code></p><p>代理到 URL：<code>http://192.168.0.120/proxy/test.html</code></p><p>第三种：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /proxy {
	proxy_pass http://192.168.0.120/;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问的 URL：<code>http://127.0.0.1/proxy/test.html</code></p><p>代理到 URL：<code>http://192.168.0.120//test.html</code></p><p>第四种：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /proxy {
	proxy_pass http://192.168.0.120;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问的 URL：<code>http://127.0.0.1/proxy/test.html</code></p><p>代理到 URL：<code>http://192.168.0.120/proxy/test.html</code></p><p>第五种：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /proxy/ {
	proxy_pass http://192.168.0.120/aaa/;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问的 URL：<code>http://127.0.0.1/proxy/test.html</code></p><p>代理到 URL：<code>http://192.168.0.120/aaa/test.html</code></p><p>第六种（相对于第五种，最后少一个 / ）</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>location /proxy/ {
	proxy_pass http://192.168.0.120/aaa;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问的 URL：<code>http://127.0.0.1/proxy/test.html</code></p><p>代理到 URL：<code>http://192.168.0.120/aaatest.html</code></p>`,45),s=[n];function l(o,r){return a(),i("div",null,s)}const v=e(d,[["render",l],["__file","Nginx.html.vue"]]);export{v as default};
