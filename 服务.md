# On-Premises 
本地部署
# IaaS 
**Infrastructure as a Service** - 基础设施即服务
从蛋糕店中直接购买成品，回家后用微波炉进行烘焙之后就可以在自己的餐桌上吃，整个流程你仅需要一个蛋糕成品的供应商。（客户不用自己构建一个数据中心，而是通过租用的方式来使用基础设施服务，包括服务器、存储和网络等。）
# PaaS
**Platform as a Service** - 平台即服务
打开某外卖App直接叫外卖将蛋糕送到家中，摆在餐桌上就可以吃了，整个流程你需要提供一个吃蛋糕的地方。（将一个完整的软件研发和部署平台，包括应用设计、应用开发、应用测试和应用托管，都作为一种服务提供给客户。）
# SaaS
**Software as a Service** - 软件即服务
直接在蛋糕店中吃蛋糕，随意挑选你喜欢的蛋糕类型，并且无需准备任何物料，包括蛋糕成品、微波炉、以及餐桌，蛋糕店全都会为你提供，整个流程仅需安心的坐下吃蛋糕即可。（将应用软件统一部署在厂商的服务器上，客户可以根据实际需求，任意选择所需的应用软件服务，通过互联网获得Saas平台供应商提供的服务。）

![](https://gitee.com/ngyb/pic/raw/master/20200909144509.png)

---

假设你想从无到有办个养猪场，要养猪当然要有厂房咯，此时有两种选择：
1. 租一块地，从一砖一瓦开始建；
2. 租用别人已经建好的厂房。

**自己建厂房的话，租给你地的一方就相当于IaaS提供者，提供给你的Infrastructure就是地**。
其优点是你可以在地允许的范围内随意建造，除了养猪场，养鸡场也是可以建的，自由度很大，你可以按照猪的养殖情况，给它们建八人间，四人间，高低床，等等。
缺点是除了给你地之外啥都没有，水电不通，一砖一瓦都要你亲自筹备。

**租用别人厂房的话就和PaaS类似，厂房就是Platform**。
其优点是已经给你提供好了现成的厂房设施，基本的水电也有了，只需要把你的业务，也就是猪，放进来就可以，以后养殖规模扩大了的话，还可以再租一个厂房。
缺点是厂房里猪舍的大小，设施位置等已经固定了，你不能做太多的自定义，一个猪舍关两头猪嫌浪费，三头猪又太挤，某一天引进一个新品种，这个品种的猪平日喜欢通透式的LOFT猪舍，而你现在的猪舍都是四面高墙和故宫一样，这样你的新业务也就是新品种的猪就不能顺利地部署在猪舍里了。

---

养猪场办好了，此时新的问题又接踵而至：猪有的时候会生病，但自己又没有专业的兽医，怎么办呢？**这个时候有一个叫禽兽大保健的机构，专门为养殖场提供猪病防治的服务，这个机构就是SaaS的角色**。除了这个机构以外，还有提供生猪销售服务，母猪配种服务等等的机构，你就可以把养猪场里的这些业务交给上述机构处理，而你，作为一个养猪场的场长，只需要根据不同的情况，选择把猪养在什么地方就可以了。



---



# SOA

Service-Oriented Architecture，面向服务的架构

![img](https://gitee.com/ngyb/pic/raw/master/880309-20170514190347066-1095632262.png)

- SOA帮助我们把服务之间调用的关系治理起来，从以前的互相交互，到现在的只对数据总线进行交互，提供一个统一的标准，这样系统就变得统一起来。

  - 统一标准：各系统的协议、地址、交互方式

  - 新的交互方式：各个系统分别根据统一标准向数据总线进行注册，子系统调用其他子系统时，只找数据总线，数据总线再根据统一标准找其他子系统，数据总线在这里充当一个只路人的作用

  - 数据总线：充当数据通道的作用，数据总线不关心业务，数据总线根据给的地址和协议去调服务
- SOA好处

  -  降低用户成本，用户不需要关心如何调用服务，只要通过统一标准找数据总线就可以
  - 低耦合，服务之间关系简单
  - 因为服务需要向数据总线注册，所以可以及时识别哪些服务有问题
- SOA缺点：提示了系统的复杂程度，性能有相应影响
- SOA与微服务区别
  - SOA侧重服务的重用性和解决信息孤岛问题
  - 微服务侧重业务之间的解耦
  - 微服务是SOA架构演进的结果。随着互联网的发展，复杂的平台、业务的出现，导致SOA架构向更细粒度、更通过化程度发展，就成了所谓的微服务了，微服务是SOA发展出来的产物，它是一种比较现代化的细粒度的SOA实现方式

![img](https://gitee.com/ngyb/pic/raw/master/09fb5b91107b4a87b59cafc3366bd088.jpeg)

# 微服务

将每一个具体业务服务构成可独立运行的微服务，每个服务只关注某个特定的功能，服务之间采用轻量级通信机制REST API进行通信。

优点：

- 复杂度可控。通过对公共业务服务进行更细粒度地拆分，所以每个服务只关注特定的业务领域，有清晰的服务边界
- 独立部署。每一个微服务都是一个独立运行的进程，某个服务发生变更不需要重新编译整个应用
- 容错性。当某一个服务发生故障，可以把错误隔离在单个服务中
- 可扩展性强。增加单个服务的集群规模，提升部署该服务节点的硬件配置

缺点：

- 故障排查。一次请求可能会经历多个不同的微服务的多次交互，交互链路可能较长，定位问题可能比较困难
- 服务监控。微服务架构中，不仅要对整个链路进行监控，还需要对单个微服务进行监控，监控开销大
- 网络问题。微服务架构中服务之间需要网络通信，无法避免网络延迟与网络故障
- 运维成本。需要解决单个服务流量激增时如何快速扩容、服务拆分之后导致故障点增多如何处理等问题

![image-20201201103602173](https://gitee.com/ngyb/pic/raw/master/image-20201201103602173.png)

# WebService

低耦合的，自包含的、基于可编程的web的应用程序，可使用开放的**XML**标准来描述、发布、发现、协调和配置这些应用程序，用于开发分布式的互操作的应用程序

WebService是一种技术，只要是能够平台独立，**无关语言，无关操作系统，基于XML作为数据交换格式**的应用程序都可以叫做WebService。

要实现WebService，需要一套协议来支持（WebService三要素：SOAP、WSDL、UDDI）

## SOAP

SOAP（Simple Object Access Protocol：简单对象访问协议）是一种轻量简单的、基于XML的交换数据的协议规范。 （**简单来说：SOAP=HTTP+XML，HTTP是基于TCP的超文本传送协议**）

## WSDL

WSDL（Web Service Describe Language：Web Service 描述语言）用于描述Web Service及其函数、参数和返回值（也就是描述如何访问具体的接口）

## UDDI

UDDI 的目的是为电子商务建立标准；UDDI是一套基于Web的、分布式的、为Web Service提供的、信息注册中心的实现标准规范，同时也包含一组使企业能将自身提供的Web Service注册，以使别的企业能够发现的访问协议的实现标准。（**简单一句话概括就是：用来管理，分发，查询WebService**）

# RPC

 RPC（Remote Procedure Call：远程过程调用）就是从一台机器（客户端）上通过参数传递的方式调用另一台机器（服务器）上的一个函数或方法（可以统称为服务）并得到返回的结果

# RMI

RMI（Remote Method Invocation：远程方法调用）基于Java远程方法协议和java的原生序列化的RPC。

# REST

REST（Representational State Transfer：表现性状态转换）不是协议也不是规范，而是一种服务通讯的设计风格

RPC是面向服务的，并关注于行为和动作；而REST是面向资源的，强调描述应用程序的事物和名词

## Restful

Restful是一种架构设计风格，提供了设计原则和约束条件，而不是架构，而满足这些约束条件和原则的应用程序或设计就是 Restful架构或服务

RESTful的核心就是后端将资源发布为URI，前端通过URI访问资源，并通过HTTP动词表示要对资源进行的操作



SOA和微服务架构都是一种组件模型，一种架构方式，不依赖于任何技术，因此SOAP、RPC、REST是对SOA和微服务架构的组件或服务之间通信方式的不同实现。


