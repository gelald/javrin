<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://gelald.github.io/javrin/javrin/writings/archive/JavaEE.html"><meta property="og:site_name" content="Javrin"><meta property="og:title" content="JDBC"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-07-30T16:21:52.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-07-30T16:21:52.000Z"><link rel="icon" href="/javrin/avataaars.ico"><title>JDBC | Javrin</title><meta name="description" content="Javrin çŸ¥è¯†åº“">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/javrin/assets/style.eff89a4c.css">
    <link rel="modulepreload" href="/javrin/assets/app.667f4f53.js"><link rel="modulepreload" href="/javrin/assets/JavaEE.html.6dd1c575.js"><link rel="modulepreload" href="/javrin/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/javrin/assets/JavaEE.html.260604e3.js"><link rel="prefetch" href="/javrin/assets/index.html.77ee5188.js"><link rel="prefetch" href="/javrin/assets/home.html.3fb9fbb2.js"><link rel="prefetch" href="/javrin/assets/index.html.5aac91a4.js"><link rel="prefetch" href="/javrin/assets/disable.html.c7e3e16d.js"><link rel="prefetch" href="/javrin/assets/encrypt.html.d2660ea5.js"><link rel="prefetch" href="/javrin/assets/markdown.html.0e6d3ae4.js"><link rel="prefetch" href="/javrin/assets/page.html.c910b6f2.js"><link rel="prefetch" href="/javrin/assets/index.html.194af9f2.js"><link rel="prefetch" href="/javrin/assets/article10.html.98dce066.js"><link rel="prefetch" href="/javrin/assets/article11.html.ca609c0f.js"><link rel="prefetch" href="/javrin/assets/article12.html.e115caf0.js"><link rel="prefetch" href="/javrin/assets/article9.html.a1a67146.js"><link rel="prefetch" href="/javrin/assets/index.html.703b6440.js"><link rel="prefetch" href="/javrin/assets/article1.html.9b2af1ae.js"><link rel="prefetch" href="/javrin/assets/article2.html.ece2c58d.js"><link rel="prefetch" href="/javrin/assets/article3.html.96e3e960.js"><link rel="prefetch" href="/javrin/assets/article4.html.2a5f83b6.js"><link rel="prefetch" href="/javrin/assets/article5.html.f37af044.js"><link rel="prefetch" href="/javrin/assets/article6.html.a0622579.js"><link rel="prefetch" href="/javrin/assets/article7.html.252406bc.js"><link rel="prefetch" href="/javrin/assets/article8.html.62c704d3.js"><link rel="prefetch" href="/javrin/assets/Lambdaè¡¨è¾¾å¼ä¸å‡½æ•°å¼ç¼–ç¨‹.html.6f3156f9.js"><link rel="prefetch" href="/javrin/assets/Object.html.87436ccd.js"><link rel="prefetch" href="/javrin/assets/SPIæœºåˆ¶.html.29a41e48.js"><link rel="prefetch" href="/javrin/assets/Stream.html.f77aaafa.js"><link rel="prefetch" href="/javrin/assets/String.html.22762e1e.js"><link rel="prefetch" href="/javrin/assets/åå°„æœºåˆ¶.html.58a802bc.js"><link rel="prefetch" href="/javrin/assets/å¼‚å¸¸æœºåˆ¶.html.793a04dc.js"><link rel="prefetch" href="/javrin/assets/æ•°æ®ä¸è¿ç®—.html.2486df80.js"><link rel="prefetch" href="/javrin/assets/æ³›å‹æœºåˆ¶.html.4ff6f17d.js"><link rel="prefetch" href="/javrin/assets/é¢å‘å¯¹è±¡.html.f95067e7.js"><link rel="prefetch" href="/javrin/assets/é¢è¯•é¢˜æ€»ç»“.html.3c09e153.js"><link rel="prefetch" href="/javrin/assets/CMSæ”¶é›†å™¨.html.597c246b.js"><link rel="prefetch" href="/javrin/assets/G1æ”¶é›†å™¨.html.f15d2a93.js"><link rel="prefetch" href="/javrin/assets/Javaå†…å­˜æ¨¡å‹ä¸å¹¶å‘.html.0e241f81.js"><link rel="prefetch" href="/javrin/assets/å†…å­˜åˆ†æ.html.3afbed39.js"><link rel="prefetch" href="/javrin/assets/åƒåœ¾å›æ”¶åŸºç¡€.html.a5f52df1.js"><link rel="prefetch" href="/javrin/assets/å­—èŠ‚ç æ–‡ä»¶.html.ec6fb317.js"><link rel="prefetch" href="/javrin/assets/ç‰©ç†å†…å­˜æ¨¡å‹.html.cf8ee88d.js"><link rel="prefetch" href="/javrin/assets/ç±»åŠ è½½æœºåˆ¶.html.3aabe6f1.js"><link rel="prefetch" href="/javrin/assets/çº¿ç¨‹å †æ ˆåˆ†æ.html.d1383386.js"><link rel="prefetch" href="/javrin/assets/è¿è¡Œæ—¶å†…å­˜ç»“æ„.html.fa6a5238.js"><link rel="prefetch" href="/javrin/assets/ArrayDeque.html.92b431ed.js"><link rel="prefetch" href="/javrin/assets/ArrayList.html.4b52ff77.js"><link rel="prefetch" href="/javrin/assets/HashMap_HashSet.html.132f5f05.js"><link rel="prefetch" href="/javrin/assets/LinkedHashMap_LinkedHashSet.html.5dd602cf.js"><link rel="prefetch" href="/javrin/assets/LinkedList.html.da2f675c.js"><link rel="prefetch" href="/javrin/assets/PriorityQueue.html.a7e415f2.js"><link rel="prefetch" href="/javrin/assets/TreeMap_TreeSet.html.52d8b8ae.js"><link rel="prefetch" href="/javrin/assets/æ€»è§ˆ.html.6f22dd1f.js"><link rel="prefetch" href="/javrin/assets/MySQL.html.2fb153ad.js"><link rel="prefetch" href="/javrin/assets/MySQLä¼˜åŒ–.html.11c080d0.js"><link rel="prefetch" href="/javrin/assets/MySQLç´¢å¼•å¤±æ•ˆåœºæ™¯.html.c9f46096.js"><link rel="prefetch" href="/javrin/assets/åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ä¸æ€è€ƒ.html.8a3ced5f.js"><link rel="prefetch" href="/javrin/assets/Spring_SpringBoot.html.78488dc6.js"><link rel="prefetch" href="/javrin/assets/Spring-thread-pool.html.2a7ea681.js"><link rel="prefetch" href="/javrin/assets/SpringBootæ ¸å¿ƒç»„ä»¶.html.72361da4.js"><link rel="prefetch" href="/javrin/assets/SpringMVC.html.e8afd34d.js"><link rel="prefetch" href="/javrin/assets/Springå®šæ—¶ä»»åŠ¡.html.e2747d65.js"><link rel="prefetch" href="/javrin/assets/Springæ³¨è§£ç¼–ç¨‹.html.22f747b7.js"><link rel="prefetch" href="/javrin/assets/Springé¢è¯•é¢˜.html.70bfbe22.js"><link rel="prefetch" href="/javrin/assets/pretty-controller.html.2ccf2c3c.js"><link rel="prefetch" href="/javrin/assets/æ‰‹å†™Spring.html.889af9db.js"><link rel="prefetch" href="/javrin/assets/SpringCloud.html.1ca84287.js"><link rel="prefetch" href="/javrin/assets/SpringCloudAlibaba.html.9ac0667a.js"><link rel="prefetch" href="/javrin/assets/SpringCloudGateway.html.734d0114.js"><link rel="prefetch" href="/javrin/assets/SpringCloudZookeeper.html.b8820271.js"><link rel="prefetch" href="/javrin/assets/JWT.html.10192ec7.js"><link rel="prefetch" href="/javrin/assets/OAuth2.html.463dc1e4.js"><link rel="prefetch" href="/javrin/assets/SpringSecurity.html.5841c548.js"><link rel="prefetch" href="/javrin/assets/dynamic-programming.html.193327e3.js"><link rel="prefetch" href="/javrin/assets/fibonacci.html.6799924a.js"><link rel="prefetch" href="/javrin/assets/moore-voting.html.00fdc436.js"><link rel="prefetch" href="/javrin/assets/Algorithm.html.19e8c5a5.js"><link rel="prefetch" href="/javrin/assets/HashMap.html.daf9788c.js"><link rel="prefetch" href="/javrin/assets/IO.html.b86134fa.js"><link rel="prefetch" href="/javrin/assets/JVM.html.f6c85e22.js"><link rel="prefetch" href="/javrin/assets/JavaSE.html.27965b7d.js"><link rel="prefetch" href="/javrin/assets/MyBatis.html.29404924.js"><link rel="prefetch" href="/javrin/assets/PrimaryKey.html.da20a223.js"><link rel="prefetch" href="/javrin/assets/Redis.html.1ec7ee16.js"><link rel="prefetch" href="/javrin/assets/SpringDataJpa.html.948c8235.js"><link rel="prefetch" href="/javrin/assets/Swagger.html.520be39e.js"><link rel="prefetch" href="/javrin/assets/XML.html.ec853687.js"><link rel="prefetch" href="/javrin/assets/å¹¶å‘.html.09f1e602.js"><link rel="prefetch" href="/javrin/assets/æ¥å£.html.9084450a.js"><link rel="prefetch" href="/javrin/assets/æœåŠ¡.html.c9c57ba5.js"><link rel="prefetch" href="/javrin/assets/é›†åˆ.html.97740e12.js"><link rel="prefetch" href="/javrin/assets/is-thread-executed-in-executor.html.a9a6a60f.js"><link rel="prefetch" href="/javrin/assets/serial-to-parallel.html.71395340.js"><link rel="prefetch" href="/javrin/assets/thread-pool.html.7e884006.js"><link rel="prefetch" href="/javrin/assets/container-communication.html.6a3ec0c7.js"><link rel="prefetch" href="/javrin/assets/docker.html.0829d70b.js"><link rel="prefetch" href="/javrin/assets/modify-docker-default-storage.html.45004919.js"><link rel="prefetch" href="/javrin/assets/CAP-theory.html.e0fccd4b.js"><link rel="prefetch" href="/javrin/assets/distributed-lock.html.bc87b989.js"><link rel="prefetch" href="/javrin/assets/distributed-transaction.html.ae371124.js"><link rel="prefetch" href="/javrin/assets/MessageQueue.html.8c0ac9f8.js"><link rel="prefetch" href="/javrin/assets/RabbitMQ.html.c0e9e164.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-interview.html.aeaaeeb2.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-operation-client.html.e2c5d2b6.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-operation-starter.html.8a0f1dd2.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-start.html.912728f2.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-theory-1.html.60bb57b4.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-theory-2.html.18a6ee6d.js"><link rel="prefetch" href="/javrin/assets/RocketMQ.html.e569f128.js"><link rel="prefetch" href="/javrin/assets/Git.html.ec06dcc2.js"><link rel="prefetch" href="/javrin/assets/Maven.html.bf0ceeda.js"><link rel="prefetch" href="/javrin/assets/UML.html.247c3163.js"><link rel="prefetch" href="/javrin/assets/ZooKeeperåˆ†å¸ƒå¼é”.html.46765f5b.js"><link rel="prefetch" href="/javrin/assets/Beanè‡ªåŠ¨æ˜ å°„.html.1a5c4d8e.js"><link rel="prefetch" href="/javrin/assets/Linux.html.f3287d5d.js"><link rel="prefetch" href="/javrin/assets/Network.html.bbe4d920.js"><link rel="prefetch" href="/javrin/assets/ä¸­ä»‹è€…æ¨¡å¼.html.aeabf30c.js"><link rel="prefetch" href="/javrin/assets/äº«å…ƒæ¨¡å¼.html.d7f0a4d6.js"><link rel="prefetch" href="/javrin/assets/ä»£ç†æ¨¡å¼.html.5af6d1f0.js"><link rel="prefetch" href="/javrin/assets/å•ä¾‹æ¨¡å¼.html.07e1f693.js"><link rel="prefetch" href="/javrin/assets/åŸå‹æ¨¡å¼.html.4d60efeb.js"><link rel="prefetch" href="/javrin/assets/å‘½ä»¤æ¨¡å¼.html.6b4aebcb.js"><link rel="prefetch" href="/javrin/assets/å¤‡å¿˜å½•æ¨¡å¼.html.2f28166d.js"><link rel="prefetch" href="/javrin/assets/å§”æ´¾æ¨¡å¼.html.0508511f.js"><link rel="prefetch" href="/javrin/assets/å·¥å‚æ¨¡å¼.html.90e0f26f.js"><link rel="prefetch" href="/javrin/assets/å»ºé€ è€…æ¨¡å¼.html.52633918.js"><link rel="prefetch" href="/javrin/assets/æ¡¥æ¥æ¨¡å¼.html.bbf21e0f.js"><link rel="prefetch" href="/javrin/assets/æ¨¡æ¿æ–¹æ³•æ¨¡å¼.html.589e3592.js"><link rel="prefetch" href="/javrin/assets/çŠ¶æ€æ¨¡å¼.html.eefc4f78.js"><link rel="prefetch" href="/javrin/assets/ç­–ç•¥æ¨¡å¼.html.62be1641.js"><link rel="prefetch" href="/javrin/assets/ç»„åˆæ¨¡å¼.html.dd2609e2.js"><link rel="prefetch" href="/javrin/assets/è£…é¥°å™¨æ¨¡å¼.html.bc3a8fd0.js"><link rel="prefetch" href="/javrin/assets/è§‚å¯Ÿè€…æ¨¡å¼.html.354245b4.js"><link rel="prefetch" href="/javrin/assets/è§£é‡Šå™¨æ¨¡å¼.html.3fc2817e.js"><link rel="prefetch" href="/javrin/assets/è®¾è®¡åŸåˆ™.html.c300043b.js"><link rel="prefetch" href="/javrin/assets/è®¾è®¡æ¨¡å¼æ€»è§ˆ.html.2deb5b2d.js"><link rel="prefetch" href="/javrin/assets/è®¿é—®è€…æ¨¡å¼.html.6b49a89c.js"><link rel="prefetch" href="/javrin/assets/è´£ä»»é“¾æ¨¡å¼.html.ff702f0d.js"><link rel="prefetch" href="/javrin/assets/è¿­ä»£å™¨æ¨¡å¼.html.46d34d41.js"><link rel="prefetch" href="/javrin/assets/é€‚é…å™¨æ¨¡å¼.html.731493c4.js"><link rel="prefetch" href="/javrin/assets/é—¨é¢æ¨¡å¼.html.0df12862.js"><link rel="prefetch" href="/javrin/assets/ç»¼åˆæ¡ˆä¾‹äº‹å.html.a3fcf141.js"><link rel="prefetch" href="/javrin/assets/404.html.fd533572.js"><link rel="prefetch" href="/javrin/assets/index.html.58b16885.js"><link rel="prefetch" href="/javrin/assets/index.html.a68fd036.js"><link rel="prefetch" href="/javrin/assets/index.html.f657d11f.js"><link rel="prefetch" href="/javrin/assets/index.html.db27eb87.js"><link rel="prefetch" href="/javrin/assets/index.html.d50e9056.js"><link rel="prefetch" href="/javrin/assets/index.html.43c2e592.js"><link rel="prefetch" href="/javrin/assets/index.html.54223465.js"><link rel="prefetch" href="/javrin/assets/index.html.be7a177d.js"><link rel="prefetch" href="/javrin/assets/index.html.9a7e43fb.js"><link rel="prefetch" href="/javrin/assets/index.html.9eabc93f.js"><link rel="prefetch" href="/javrin/assets/index.html.be1bdfa2.js"><link rel="prefetch" href="/javrin/assets/index.html.a762961e.js"><link rel="prefetch" href="/javrin/assets/index.html.ae3b676a.js"><link rel="prefetch" href="/javrin/assets/index.html.072b08c6.js"><link rel="prefetch" href="/javrin/assets/index.html.27ea51d9.js"><link rel="prefetch" href="/javrin/assets/index.html.29e4d19e.js"><link rel="prefetch" href="/javrin/assets/index.html.854a2e00.js"><link rel="prefetch" href="/javrin/assets/index.html.16939a61.js"><link rel="prefetch" href="/javrin/assets/index.html.b4f308a6.js"><link rel="prefetch" href="/javrin/assets/index.html.32d0b28d.js"><link rel="prefetch" href="/javrin/assets/index.html.fa24a9b7.js"><link rel="prefetch" href="/javrin/assets/index.html.a7a3b0c7.js"><link rel="prefetch" href="/javrin/assets/index.html.e9c05b92.js"><link rel="prefetch" href="/javrin/assets/index.html.1ed944ab.js"><link rel="prefetch" href="/javrin/assets/index.html.3d442681.js"><link rel="prefetch" href="/javrin/assets/index.html.68754340.js"><link rel="prefetch" href="/javrin/assets/index.html.693d4933.js"><link rel="prefetch" href="/javrin/assets/index.html.a98dbb66.js"><link rel="prefetch" href="/javrin/assets/index.html.0cb7da4e.js"><link rel="prefetch" href="/javrin/assets/index.html.e22bd898.js"><link rel="prefetch" href="/javrin/assets/index.html.0efce88b.js"><link rel="prefetch" href="/javrin/assets/index.html.fd8842fe.js"><link rel="prefetch" href="/javrin/assets/index.html.af627ba0.js"><link rel="prefetch" href="/javrin/assets/index.html.fa05ab36.js"><link rel="prefetch" href="/javrin/assets/index.html.65705e0a.js"><link rel="prefetch" href="/javrin/assets/index.html.19f6dff5.js"><link rel="prefetch" href="/javrin/assets/index.html.18d33c2a.js"><link rel="prefetch" href="/javrin/assets/index.html.05744a1a.js"><link rel="prefetch" href="/javrin/assets/index.html.0247c002.js"><link rel="prefetch" href="/javrin/assets/index.html.cb1de256.js"><link rel="prefetch" href="/javrin/assets/index.html.12133386.js"><link rel="prefetch" href="/javrin/assets/index.html.76a21b8d.js"><link rel="prefetch" href="/javrin/assets/index.html.505afaac.js"><link rel="prefetch" href="/javrin/assets/index.html.8a044ee8.js"><link rel="prefetch" href="/javrin/assets/index.html.f654363f.js"><link rel="prefetch" href="/javrin/assets/index.html.cde2fbc1.js"><link rel="prefetch" href="/javrin/assets/index.html.c8b27756.js"><link rel="prefetch" href="/javrin/assets/index.html.cd06afca.js"><link rel="prefetch" href="/javrin/assets/index.html.1d1b8e3c.js"><link rel="prefetch" href="/javrin/assets/index.html.37bcb607.js"><link rel="prefetch" href="/javrin/assets/index.html.572e0b1a.js"><link rel="prefetch" href="/javrin/assets/index.html.1591f17b.js"><link rel="prefetch" href="/javrin/assets/index.html.f1d08ff2.js"><link rel="prefetch" href="/javrin/assets/home.html.03052147.js"><link rel="prefetch" href="/javrin/assets/index.html.56cb026f.js"><link rel="prefetch" href="/javrin/assets/disable.html.b928b8bb.js"><link rel="prefetch" href="/javrin/assets/encrypt.html.dc246bff.js"><link rel="prefetch" href="/javrin/assets/markdown.html.888d2619.js"><link rel="prefetch" href="/javrin/assets/page.html.bb2de4a2.js"><link rel="prefetch" href="/javrin/assets/index.html.34b3dfad.js"><link rel="prefetch" href="/javrin/assets/article10.html.b9031b8c.js"><link rel="prefetch" href="/javrin/assets/article11.html.e4d27210.js"><link rel="prefetch" href="/javrin/assets/article12.html.626b1bae.js"><link rel="prefetch" href="/javrin/assets/article9.html.021c3791.js"><link rel="prefetch" href="/javrin/assets/index.html.e9d5ccd4.js"><link rel="prefetch" href="/javrin/assets/article1.html.03a8e202.js"><link rel="prefetch" href="/javrin/assets/article2.html.3fd805a6.js"><link rel="prefetch" href="/javrin/assets/article3.html.0c5a6d5b.js"><link rel="prefetch" href="/javrin/assets/article4.html.a264b629.js"><link rel="prefetch" href="/javrin/assets/article5.html.383e1c65.js"><link rel="prefetch" href="/javrin/assets/article6.html.8f47ef26.js"><link rel="prefetch" href="/javrin/assets/article7.html.4a011d0c.js"><link rel="prefetch" href="/javrin/assets/article8.html.0818677b.js"><link rel="prefetch" href="/javrin/assets/Lambdaè¡¨è¾¾å¼ä¸å‡½æ•°å¼ç¼–ç¨‹.html.abe38357.js"><link rel="prefetch" href="/javrin/assets/Object.html.c9f24a3b.js"><link rel="prefetch" href="/javrin/assets/SPIæœºåˆ¶.html.bce2f522.js"><link rel="prefetch" href="/javrin/assets/Stream.html.1e25c9be.js"><link rel="prefetch" href="/javrin/assets/String.html.f8eaf912.js"><link rel="prefetch" href="/javrin/assets/åå°„æœºåˆ¶.html.c2e077f0.js"><link rel="prefetch" href="/javrin/assets/å¼‚å¸¸æœºåˆ¶.html.ae969113.js"><link rel="prefetch" href="/javrin/assets/æ•°æ®ä¸è¿ç®—.html.c810b77f.js"><link rel="prefetch" href="/javrin/assets/æ³›å‹æœºåˆ¶.html.087e6e06.js"><link rel="prefetch" href="/javrin/assets/é¢å‘å¯¹è±¡.html.9c8328a2.js"><link rel="prefetch" href="/javrin/assets/é¢è¯•é¢˜æ€»ç»“.html.02d63a4b.js"><link rel="prefetch" href="/javrin/assets/CMSæ”¶é›†å™¨.html.58fd1287.js"><link rel="prefetch" href="/javrin/assets/G1æ”¶é›†å™¨.html.0344b29a.js"><link rel="prefetch" href="/javrin/assets/Javaå†…å­˜æ¨¡å‹ä¸å¹¶å‘.html.4d7efc32.js"><link rel="prefetch" href="/javrin/assets/å†…å­˜åˆ†æ.html.4f3219fc.js"><link rel="prefetch" href="/javrin/assets/åƒåœ¾å›æ”¶åŸºç¡€.html.ba76ad12.js"><link rel="prefetch" href="/javrin/assets/å­—èŠ‚ç æ–‡ä»¶.html.d7befc4b.js"><link rel="prefetch" href="/javrin/assets/ç‰©ç†å†…å­˜æ¨¡å‹.html.4b2376f3.js"><link rel="prefetch" href="/javrin/assets/ç±»åŠ è½½æœºåˆ¶.html.a9cd22c3.js"><link rel="prefetch" href="/javrin/assets/çº¿ç¨‹å †æ ˆåˆ†æ.html.2b317ae5.js"><link rel="prefetch" href="/javrin/assets/è¿è¡Œæ—¶å†…å­˜ç»“æ„.html.079729b6.js"><link rel="prefetch" href="/javrin/assets/ArrayDeque.html.246c2be5.js"><link rel="prefetch" href="/javrin/assets/ArrayList.html.6f1a77db.js"><link rel="prefetch" href="/javrin/assets/HashMap_HashSet.html.c9988546.js"><link rel="prefetch" href="/javrin/assets/LinkedHashMap_LinkedHashSet.html.51260775.js"><link rel="prefetch" href="/javrin/assets/LinkedList.html.4917ce4a.js"><link rel="prefetch" href="/javrin/assets/PriorityQueue.html.aeb25c75.js"><link rel="prefetch" href="/javrin/assets/TreeMap_TreeSet.html.d788b1f5.js"><link rel="prefetch" href="/javrin/assets/æ€»è§ˆ.html.b7abedc9.js"><link rel="prefetch" href="/javrin/assets/MySQL.html.96fb86ee.js"><link rel="prefetch" href="/javrin/assets/MySQLä¼˜åŒ–.html.d84aa9ea.js"><link rel="prefetch" href="/javrin/assets/MySQLç´¢å¼•å¤±æ•ˆåœºæ™¯.html.8a4ad867.js"><link rel="prefetch" href="/javrin/assets/åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–ä¸æ€è€ƒ.html.c052f022.js"><link rel="prefetch" href="/javrin/assets/Spring_SpringBoot.html.a128ce6c.js"><link rel="prefetch" href="/javrin/assets/Spring-thread-pool.html.cfa1732d.js"><link rel="prefetch" href="/javrin/assets/SpringBootæ ¸å¿ƒç»„ä»¶.html.3ca4ab3f.js"><link rel="prefetch" href="/javrin/assets/SpringMVC.html.5c66c035.js"><link rel="prefetch" href="/javrin/assets/Springå®šæ—¶ä»»åŠ¡.html.7c52e3f9.js"><link rel="prefetch" href="/javrin/assets/Springæ³¨è§£ç¼–ç¨‹.html.22fee1ce.js"><link rel="prefetch" href="/javrin/assets/Springé¢è¯•é¢˜.html.2dd3dd9b.js"><link rel="prefetch" href="/javrin/assets/pretty-controller.html.9bc954a6.js"><link rel="prefetch" href="/javrin/assets/æ‰‹å†™Spring.html.46de8bdf.js"><link rel="prefetch" href="/javrin/assets/SpringCloud.html.7bc365ad.js"><link rel="prefetch" href="/javrin/assets/SpringCloudAlibaba.html.517d88a1.js"><link rel="prefetch" href="/javrin/assets/SpringCloudGateway.html.d6641c71.js"><link rel="prefetch" href="/javrin/assets/SpringCloudZookeeper.html.5ff5b635.js"><link rel="prefetch" href="/javrin/assets/JWT.html.3117e634.js"><link rel="prefetch" href="/javrin/assets/OAuth2.html.de2e02a7.js"><link rel="prefetch" href="/javrin/assets/SpringSecurity.html.e0af716d.js"><link rel="prefetch" href="/javrin/assets/dynamic-programming.html.7a45210c.js"><link rel="prefetch" href="/javrin/assets/fibonacci.html.d1b677d4.js"><link rel="prefetch" href="/javrin/assets/moore-voting.html.4058d950.js"><link rel="prefetch" href="/javrin/assets/Algorithm.html.5e655366.js"><link rel="prefetch" href="/javrin/assets/HashMap.html.cffe779a.js"><link rel="prefetch" href="/javrin/assets/IO.html.9593b44e.js"><link rel="prefetch" href="/javrin/assets/JVM.html.913d6467.js"><link rel="prefetch" href="/javrin/assets/JavaSE.html.4e07414f.js"><link rel="prefetch" href="/javrin/assets/MyBatis.html.b94b60a8.js"><link rel="prefetch" href="/javrin/assets/PrimaryKey.html.897b2056.js"><link rel="prefetch" href="/javrin/assets/Redis.html.b34cc203.js"><link rel="prefetch" href="/javrin/assets/SpringDataJpa.html.ce08274a.js"><link rel="prefetch" href="/javrin/assets/Swagger.html.112dcea8.js"><link rel="prefetch" href="/javrin/assets/XML.html.772991b7.js"><link rel="prefetch" href="/javrin/assets/å¹¶å‘.html.57288290.js"><link rel="prefetch" href="/javrin/assets/æ¥å£.html.c0925537.js"><link rel="prefetch" href="/javrin/assets/æœåŠ¡.html.10ebb252.js"><link rel="prefetch" href="/javrin/assets/é›†åˆ.html.aaaa93b5.js"><link rel="prefetch" href="/javrin/assets/is-thread-executed-in-executor.html.6e02f9f4.js"><link rel="prefetch" href="/javrin/assets/serial-to-parallel.html.8e98ed8e.js"><link rel="prefetch" href="/javrin/assets/thread-pool.html.8a48ad26.js"><link rel="prefetch" href="/javrin/assets/container-communication.html.caf1e0e2.js"><link rel="prefetch" href="/javrin/assets/docker.html.b30be269.js"><link rel="prefetch" href="/javrin/assets/modify-docker-default-storage.html.2e1cc5f6.js"><link rel="prefetch" href="/javrin/assets/CAP-theory.html.c1e7d79c.js"><link rel="prefetch" href="/javrin/assets/distributed-lock.html.47e417b8.js"><link rel="prefetch" href="/javrin/assets/distributed-transaction.html.c656c818.js"><link rel="prefetch" href="/javrin/assets/MessageQueue.html.7836a091.js"><link rel="prefetch" href="/javrin/assets/RabbitMQ.html.13e6d95b.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-interview.html.2aa07719.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-operation-client.html.a3677567.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-operation-starter.html.6af98d57.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-start.html.6c462d1f.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-theory-1.html.df4e9aa4.js"><link rel="prefetch" href="/javrin/assets/RocketMQ-theory-2.html.5ad943d6.js"><link rel="prefetch" href="/javrin/assets/RocketMQ.html.24bc2581.js"><link rel="prefetch" href="/javrin/assets/Git.html.9782b372.js"><link rel="prefetch" href="/javrin/assets/Maven.html.de855d1d.js"><link rel="prefetch" href="/javrin/assets/UML.html.e5e02bce.js"><link rel="prefetch" href="/javrin/assets/ZooKeeperåˆ†å¸ƒå¼é”.html.7e795e77.js"><link rel="prefetch" href="/javrin/assets/Beanè‡ªåŠ¨æ˜ å°„.html.851491c5.js"><link rel="prefetch" href="/javrin/assets/Linux.html.daa3ca84.js"><link rel="prefetch" href="/javrin/assets/Network.html.00734de0.js"><link rel="prefetch" href="/javrin/assets/ä¸­ä»‹è€…æ¨¡å¼.html.b490b1f6.js"><link rel="prefetch" href="/javrin/assets/äº«å…ƒæ¨¡å¼.html.2603cfab.js"><link rel="prefetch" href="/javrin/assets/ä»£ç†æ¨¡å¼.html.e778713a.js"><link rel="prefetch" href="/javrin/assets/å•ä¾‹æ¨¡å¼.html.c5c9e78e.js"><link rel="prefetch" href="/javrin/assets/åŸå‹æ¨¡å¼.html.ff31bcf7.js"><link rel="prefetch" href="/javrin/assets/å‘½ä»¤æ¨¡å¼.html.a28c8ee0.js"><link rel="prefetch" href="/javrin/assets/å¤‡å¿˜å½•æ¨¡å¼.html.99e2a331.js"><link rel="prefetch" href="/javrin/assets/å§”æ´¾æ¨¡å¼.html.1554a0a9.js"><link rel="prefetch" href="/javrin/assets/å·¥å‚æ¨¡å¼.html.027e049a.js"><link rel="prefetch" href="/javrin/assets/å»ºé€ è€…æ¨¡å¼.html.58794c6b.js"><link rel="prefetch" href="/javrin/assets/æ¡¥æ¥æ¨¡å¼.html.7358a7af.js"><link rel="prefetch" href="/javrin/assets/æ¨¡æ¿æ–¹æ³•æ¨¡å¼.html.043972ca.js"><link rel="prefetch" href="/javrin/assets/çŠ¶æ€æ¨¡å¼.html.3551c42c.js"><link rel="prefetch" href="/javrin/assets/ç­–ç•¥æ¨¡å¼.html.ca1fc312.js"><link rel="prefetch" href="/javrin/assets/ç»„åˆæ¨¡å¼.html.4579235b.js"><link rel="prefetch" href="/javrin/assets/è£…é¥°å™¨æ¨¡å¼.html.72769e8a.js"><link rel="prefetch" href="/javrin/assets/è§‚å¯Ÿè€…æ¨¡å¼.html.4e4fd629.js"><link rel="prefetch" href="/javrin/assets/è§£é‡Šå™¨æ¨¡å¼.html.5528a371.js"><link rel="prefetch" href="/javrin/assets/è®¾è®¡åŸåˆ™.html.a4fc5fff.js"><link rel="prefetch" href="/javrin/assets/è®¾è®¡æ¨¡å¼æ€»è§ˆ.html.2f49bf14.js"><link rel="prefetch" href="/javrin/assets/è®¿é—®è€…æ¨¡å¼.html.ee2948ef.js"><link rel="prefetch" href="/javrin/assets/è´£ä»»é“¾æ¨¡å¼.html.5b14f3e1.js"><link rel="prefetch" href="/javrin/assets/è¿­ä»£å™¨æ¨¡å¼.html.43f69745.js"><link rel="prefetch" href="/javrin/assets/é€‚é…å™¨æ¨¡å¼.html.0f7f6b25.js"><link rel="prefetch" href="/javrin/assets/é—¨é¢æ¨¡å¼.html.b0d133b4.js"><link rel="prefetch" href="/javrin/assets/ç»¼åˆæ¡ˆä¾‹äº‹å.html.8bae52fa.js"><link rel="prefetch" href="/javrin/assets/404.html.23a2fbf0.js"><link rel="prefetch" href="/javrin/assets/index.html.f0ca53e9.js"><link rel="prefetch" href="/javrin/assets/index.html.7bbff3de.js"><link rel="prefetch" href="/javrin/assets/index.html.dec0a18a.js"><link rel="prefetch" href="/javrin/assets/index.html.7e096078.js"><link rel="prefetch" href="/javrin/assets/index.html.1a8dd741.js"><link rel="prefetch" href="/javrin/assets/index.html.81e73627.js"><link rel="prefetch" href="/javrin/assets/index.html.b3b44f5e.js"><link rel="prefetch" href="/javrin/assets/index.html.b50fe1a9.js"><link rel="prefetch" href="/javrin/assets/index.html.8b2aec4a.js"><link rel="prefetch" href="/javrin/assets/index.html.4b1cf363.js"><link rel="prefetch" href="/javrin/assets/index.html.96c710e4.js"><link rel="prefetch" href="/javrin/assets/index.html.06f8fceb.js"><link rel="prefetch" href="/javrin/assets/index.html.6d9c535d.js"><link rel="prefetch" href="/javrin/assets/index.html.34e12b5f.js"><link rel="prefetch" href="/javrin/assets/index.html.af1eac55.js"><link rel="prefetch" href="/javrin/assets/index.html.4b2213de.js"><link rel="prefetch" href="/javrin/assets/index.html.e09766bd.js"><link rel="prefetch" href="/javrin/assets/index.html.2bf9be70.js"><link rel="prefetch" href="/javrin/assets/index.html.97a7badd.js"><link rel="prefetch" href="/javrin/assets/index.html.5c96981b.js"><link rel="prefetch" href="/javrin/assets/index.html.329a84d8.js"><link rel="prefetch" href="/javrin/assets/index.html.8d76769c.js"><link rel="prefetch" href="/javrin/assets/index.html.4341caf6.js"><link rel="prefetch" href="/javrin/assets/index.html.e34ebe20.js"><link rel="prefetch" href="/javrin/assets/index.html.a893dae1.js"><link rel="prefetch" href="/javrin/assets/index.html.6b06099b.js"><link rel="prefetch" href="/javrin/assets/index.html.3f66d07e.js"><link rel="prefetch" href="/javrin/assets/index.html.bb9671d6.js"><link rel="prefetch" href="/javrin/assets/index.html.723d29a5.js"><link rel="prefetch" href="/javrin/assets/index.html.2eae4953.js"><link rel="prefetch" href="/javrin/assets/index.html.0e3b2771.js"><link rel="prefetch" href="/javrin/assets/index.html.d88789d7.js"><link rel="prefetch" href="/javrin/assets/index.html.03d4c531.js"><link rel="prefetch" href="/javrin/assets/index.html.b8577d09.js"><link rel="prefetch" href="/javrin/assets/index.html.fed66302.js"><link rel="prefetch" href="/javrin/assets/index.html.1844fc1e.js"><link rel="prefetch" href="/javrin/assets/index.html.34ed3fae.js"><link rel="prefetch" href="/javrin/assets/index.html.edb27a66.js"><link rel="prefetch" href="/javrin/assets/index.html.59b936e8.js"><link rel="prefetch" href="/javrin/assets/index.html.0526ac26.js"><link rel="prefetch" href="/javrin/assets/index.html.da348dc2.js"><link rel="prefetch" href="/javrin/assets/index.html.418e3cc6.js"><link rel="prefetch" href="/javrin/assets/index.html.0cf0e57a.js"><link rel="prefetch" href="/javrin/assets/index.html.fc6ae114.js"><link rel="prefetch" href="/javrin/assets/index.html.a08d9697.js"><link rel="prefetch" href="/javrin/assets/index.html.03e880e6.js"><link rel="prefetch" href="/javrin/assets/index.html.0d7b7555.js"><link rel="prefetch" href="/javrin/assets/index.html.4df01a7c.js"><link rel="prefetch" href="/javrin/assets/index.html.68686610.js"><link rel="prefetch" href="/javrin/assets/index.html.6023a2d6.js"><link rel="prefetch" href="/javrin/assets/index.html.ba8e79a0.js"><link rel="prefetch" href="/javrin/assets/index.html.e85e98db.js"><link rel="prefetch" href="/javrin/assets/404.a40d7629.js"><link rel="prefetch" href="/javrin/assets/Layout.a7d796da.js"><link rel="prefetch" href="/javrin/assets/Blog.c2c261c1.js"><link rel="prefetch" href="/javrin/assets/giscus.es.b79aa1b4.js"><link rel="prefetch" href="/javrin/assets/photoswipe.esm.351abe37.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/javrin/" class="brand"><img class="logo" src="/javrin/logo.svg" alt="Javrin"><!----><span class="site-name hide-in-pad">Javrin</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/javrin/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/javrin/writings" class="nav-link active" aria-label="åšå®¢æ–‡ç« "><span class="icon iconfont icon-list" style=""></span>åšå®¢æ–‡ç« <!----></a></div><div class="nav-item hide-in-mobile"><a href="/javrin/learning" class="nav-link" aria-label="å­¦ä¹ é¡¹ç›®"><span class="icon iconfont icon-computer" style=""></span>å­¦ä¹ é¡¹ç›®<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="ä¸»é¢˜æ–‡æ¡£" class="nav-link"><span class="icon iconfont icon-note" style=""></span>ä¸»é¢˜æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/gelald/javrin" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/javrin/" class="nav-link sidebar-link sidebar-page" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-list" style=""></span><a href="/javrin/writings/" class="title">åšå®¢æ–‡ç« </a><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="icon iconfont icon-computer" style=""></span><a href="/javrin/learning/" class="title">å­¦ä¹ é¡¹ç›®</a><!----></p><ul class="sidebar-links"></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->JDBC</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" localizeddate="2022å¹´7æœˆ30æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/gelald" target="_blank" rel="noopener noreferrer">gelald</a></span><span property="author" content="gelald"></span></span><!----><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022å¹´7æœˆ30æ—¥</span><meta property="datePublished" content="2022-07-30T16:21:52.000Z"></span><!----><!----><span class="words-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down" localizeddate="2022å¹´7æœˆ30æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 14946 å­—</span><meta property="wordCount" content="14946"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" localizeddate="2022å¹´7æœˆ30æ—¥" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 50 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT50M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#jdbc-1" class="router-link-active router-link-exact-active toc-link level2">JDBC</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ä½¿ç”¨æ­¥éª¤" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨æ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#drivermanager-é©±åŠ¨ç®¡ç†" class="router-link-active router-link-exact-active toc-link level3">DriverManagerï¼šé©±åŠ¨ç®¡ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#connection-æ•°æ®åº“è¿æ¥" class="router-link-active router-link-exact-active toc-link level3">Connectionï¼šæ•°æ®åº“è¿æ¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#statement-æ‰§è¡Œsqlçš„å¯¹è±¡" class="router-link-active router-link-exact-active toc-link level3">Statementï¼šæ‰§è¡Œsqlçš„å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#resultset-ç»“æœé›†" class="router-link-active router-link-exact-active toc-link level3">ResultSetï¼šç»“æœé›†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#preparestatement" class="router-link-active router-link-exact-active toc-link level3">PrepareStatement</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#statementã€preparestatementã€callablestatementå¼‚åŒ" class="router-link-active router-link-exact-active toc-link level3">Statementã€PrepareStatementã€CallableStatementå¼‚åŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#è‡ªå®šä¹‰çš„å·¥å…·ç±»" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰çš„å·¥å…·ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ§åˆ¶äº‹åŠ¡" class="router-link-active router-link-exact-active toc-link level3">æ§åˆ¶äº‹åŠ¡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ•°æ®åº“è¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level2">æ•°æ®åº“è¿æ¥æ± </a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å®ç°" class="router-link-active router-link-exact-active toc-link level3">å®ç°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#c3p0" class="router-link-active router-link-exact-active toc-link level3">c3p0</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#druid" class="router-link-active router-link-exact-active toc-link level3">druid</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#spring-jdbc" class="router-link-active router-link-exact-active toc-link level2">Spring JDBC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level2">æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ‰§è¡ŒåŸç†" class="router-link-active router-link-exact-active toc-link level2">æ‰§è¡ŒåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç”Ÿå‘½å‘¨æœŸ" class="router-link-active router-link-exact-active toc-link level2">ç”Ÿå‘½å‘¨æœŸ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å¤šçº¿ç¨‹é—®é¢˜" class="router-link-active router-link-exact-active toc-link level2">å¤šçº¿ç¨‹é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#servlet3-0" class="router-link-active router-link-exact-active toc-link level2">Servlet3.0</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ä½“ç³»ç»“æ„" class="router-link-active router-link-exact-active toc-link level2">ä½“ç³»ç»“æ„</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#gerericservlet" class="router-link-active router-link-exact-active toc-link level3">GerericServlet</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#httpservlet" class="router-link-active router-link-exact-active toc-link level3">HttpServlet</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç›¸å…³é…ç½®" class="router-link-active router-link-exact-active toc-link level2">ç›¸å…³é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#request" class="router-link-active router-link-exact-active toc-link level2">Request</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level3">åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#response" class="router-link-active router-link-exact-active toc-link level2">Response</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#åŠŸèƒ½-1" class="router-link-active router-link-exact-active toc-link level3">åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¡ˆä¾‹-1" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#servletcontext" class="router-link-active router-link-exact-active toc-link level2">ServletContext</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#è·å–" class="router-link-active router-link-exact-active toc-link level3">è·å–</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#åŠŸèƒ½-2" class="router-link-active router-link-exact-active toc-link level3">åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¡ˆä¾‹-2" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#cookie" class="router-link-active router-link-exact-active toc-link level2">Cookie</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å®ç°åŸç†" class="router-link-active router-link-exact-active toc-link level3">å®ç°åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç»†èŠ‚å¤„ç†" class="router-link-active router-link-exact-active toc-link level3">ç»†èŠ‚å¤„ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç‰¹ç‚¹ä½œç”¨" class="router-link-active router-link-exact-active toc-link level3">ç‰¹ç‚¹ä½œç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¡ˆä¾‹-3" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#session" class="router-link-active router-link-exact-active toc-link level2">Session</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å®ç°åŸç†-1" class="router-link-active router-link-exact-active toc-link level3">å®ç°åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç»†èŠ‚å¤„ç†-1" class="router-link-active router-link-exact-active toc-link level3">ç»†èŠ‚å¤„ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç‰¹ç‚¹ä½œç”¨-1" class="router-link-active router-link-exact-active toc-link level3">ç‰¹ç‚¹ä½œç”¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#åŸç†" class="router-link-active router-link-exact-active toc-link level2">åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#è„šæœ¬" class="router-link-active router-link-exact-active toc-link level2">è„šæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æŒ‡ä»¤" class="router-link-active router-link-exact-active toc-link level2">æŒ‡ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ³¨é‡Š" class="router-link-active router-link-exact-active toc-link level2">æ³¨é‡Š</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å†…ç½®å¯¹è±¡" class="router-link-active router-link-exact-active toc-link level2">å†…ç½®å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#elè¡¨è¾¾å¼" class="router-link-active router-link-exact-active toc-link level2">ELè¡¨è¾¾å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#jstl" class="router-link-active router-link-exact-active toc-link level2">JSTL</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#mvcå¼€å‘æ¨¡å¼" class="router-link-active router-link-exact-active toc-link level2">MVCå¼€å‘æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ä¸‰å±‚æ¶æ„" class="router-link-active router-link-exact-active toc-link level2">ä¸‰å±‚æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¡ˆä¾‹-4" class="router-link-active router-link-exact-active toc-link level2">æ¡ˆä¾‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ç™»å½•éªŒè¯" class="router-link-active router-link-exact-active toc-link level3">ç™»å½•éªŒè¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ•æ„Ÿè¯æ±‡è¿‡æ»¤" class="router-link-active router-link-exact-active toc-link level3">æ•æ„Ÿè¯æ±‡è¿‡æ»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#postè¯·æ±‚ä¸­æ–‡æ•°æ®ä¹±ç é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">postè¯·æ±‚ä¸­æ–‡æ•°æ®ä¹±ç é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#ä½¿ç”¨æ­¥éª¤-2" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨æ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ“ä½œå„ç§æ•°æ®ç»“æ„" class="router-link-active router-link-exact-active toc-link level3">æ“ä½œå„ç§æ•°æ®ç»“æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#è¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level3">è¿æ¥æ± </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#è¿æ¥æ± å·¥å…·ç±»" class="router-link-active router-link-exact-active toc-link level3">è¿æ¥æ± å·¥å…·ç±»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ¡ˆä¾‹-5" class="router-link-active router-link-exact-active toc-link level3">æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#æ•°æ®æ ¼å¼" class="router-link-active router-link-exact-active toc-link level2">æ•°æ®æ ¼å¼</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼" class="router-link-active router-link-exact-active toc-link level3">è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼" class="router-link-active router-link-exact-active toc-link level3">å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javrin/writings/archive/JavaEE.html#å±æ€§æ³¨å…¥" class="router-link-active router-link-exact-active toc-link level3">å±æ€§æ³¨å…¥</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="jdbc" tabindex="-1"><a class="header-anchor" href="#jdbc" aria-hidden="true">#</a> JDBC</h1><h2 id="jdbc-1" tabindex="-1"><a class="header-anchor" href="#jdbc-1" aria-hidden="true">#</a> JDBC</h2><p>æ¦‚å¿µï¼šJava DataBase Connectivity Javaæ•°æ®åº“è¿æ¥</p><p>æœ¬è´¨ï¼šå®˜æ–¹å®šä¹‰çš„ä¸€å¥—æ“ä½œæ‰€æœ‰å…³ç³»å‹æ•°æ®åº“çš„è§„åˆ™ï¼Œå³æ¥å£ã€‚å„ä¸ªæ•°æ®åº“å‚å•†å„è‡ªå®ç°è¿™ä¸ªæ¥å£ï¼Œæä¾›æ•°æ®åº“é©±åŠ¨jaråŒ…ï¼Œæ¥æ“ä½œè‡ªå®¶æ•°æ®åº“</p><h3 id="ä½¿ç”¨æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ­¥éª¤" aria-hidden="true">#</a> ä½¿ç”¨æ­¥éª¤</h3><ol><li><p>å¯¼å…¥é©±åŠ¨jaråŒ…</p></li><li><p>æ³¨å†Œé©±åŠ¨</p></li><li><p>è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡ Connection</p></li><li><p>å®šä¹‰sql</p></li><li><p>è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡ Statement</p></li><li><p>æ‰§è¡Œsqlï¼Œæ¥æ”¶ç»“æœ</p></li><li><p>å¤„ç†ç»“æœ</p></li><li><p>é‡Šæ”¾èµ„æº</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://127.0.0.1:3306/test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="drivermanager-é©±åŠ¨ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#drivermanager-é©±åŠ¨ç®¡ç†" aria-hidden="true">#</a> DriverManagerï¼šé©±åŠ¨ç®¡ç†</h3><p><strong>åŠŸèƒ½</strong>ï¼š</p><ol><li><p>æ³¨å†Œé©±åŠ¨</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token class-name">Driver</span> driver<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ³¨å†Œä¸ç»™å®šçš„é©±åŠ¨ç¨‹åº</span>

<span class="token comment">//å†™ä»£ç æ—¶ä½¿ç”¨ä»¥ä¸‹è¯­å¥</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å› ä¸ºDriverç±»ä¸­å­˜åœ¨é™æ€ä»£ç å—ï¼Œæ‰€ä»¥åªéœ€åŠ è½½Driverç±»å°±å¥½</span>
<span class="token keyword">static</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> var1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t register driver!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æˆ–è€…è¿™ä¸€å¥ä¹Ÿå¯ä»¥</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span><span class="token class-name">Driver</span></span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç›®çš„å°±æ˜¯æŠŠDriverç±»åŠ è½½è¿›å†…å­˜å¹¶æ‰§è¡Œstaticä»£ç å—</span>

<span class="token comment">//æ³¨æ„ï¼šmysql5ä¹‹åçš„jaråŒ…å¯ä»¥çœç•¥æ³¨å†Œé©±åŠ¨</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å†Œé©±åŠ¨ä¸‰ç§æ–¹å¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc.drivers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è·å–æ•°æ®åº“è¿æ¥</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
	url:è¿æ¥çš„è·¯å¾„
		è¯­æ³•:&quot;jdbc:mysql://127.0.0.1:3306/test&quot;
	user:ç”¨æˆ·å
	password:å¯†ç 
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="connection-æ•°æ®åº“è¿æ¥" tabindex="-1"><a class="header-anchor" href="#connection-æ•°æ®åº“è¿æ¥" aria-hidden="true">#</a> Connectionï¼šæ•°æ®åº“è¿æ¥</h3><p><strong>åŠŸèƒ½</strong>ï¼š</p><ol><li><p>è·å–æ‰§è¡Œsqlçš„å¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Statement</span> <span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">PrepareStatement</span> <span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ç®¡ç†äº‹åŠ¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> autoCommit<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//è°ƒç”¨è¯¥æ–¹æ³•ï¼Œè®¾ç½®å‚æ•°å€¼ä¸ºfalseï¼Œå³å¼€å¯äº‹åŠ¡</span>

<span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//æäº¤äº‹åŠ¡</span>

<span class="token keyword">void</span> <span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//å›æ»šäº‹åŠ¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="statement-æ‰§è¡Œsqlçš„å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#statement-æ‰§è¡Œsqlçš„å¯¹è±¡" aria-hidden="true">#</a> Statementï¼šæ‰§è¡Œsqlçš„å¯¹è±¡</h3><p>**åŠŸèƒ½ï¼š**æ‰§è¡Œé™æ€sqlè¯­å¥ï¼Œï¼ˆå³ç”Ÿæˆsqlè¯­å¥çš„æ—¶å€™æ‰€æœ‰å‚æ•°éƒ½æ˜¯æ‹¼æ¥å¥½çš„ï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">boolean</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å¯ä»¥æ‰§è¡Œä»»æ„sqlï¼Œä¸€èˆ¬æƒ…å†µä¸ä½¿ç”¨</span>

<span class="token keyword">int</span> <span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å¯ä»¥æ‰§è¡Œdmlè¯­å¥ï¼ˆinsertã€updateã€deleteï¼‰ã€ddlè¯­å¥</span>
<span class="token comment">//è¿”å›å€¼ï¼šå½±å“çš„è¯­å¥ï¼Œåˆ¤æ–­dmlè¯­å¥æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼›è¿”å›å€¼å¤§äº0ï¼Œæ‰§è¡ŒæˆåŠŸï¼›åä¹‹ï¼Œæ‰§è¡Œå¤±è´¥</span>
<span class="token comment">//å¦‚æœæ‰§è¡Œçš„æ˜¯ddlè¯­å¥ï¼Œåˆ™è¿”å›0</span>

<span class="token class-name">ResultSet</span> <span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ‰§è¡Œdqlè¯­å¥(select)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="resultset-ç»“æœé›†" tabindex="-1"><a class="header-anchor" href="#resultset-ç»“æœé›†" aria-hidden="true">#</a> ResultSetï¼šç»“æœé›†</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">boolean</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä½¿ç»“æœé›†æ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ</span>
<span class="token comment">//è¿”å›å€¼ï¼šåˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æ˜¯æœ€åä¸€è¡Œæœ«å°¾ï¼ˆæœ€åä¸€è¡Œä¸‹ä¸€è¡Œï¼‰ï¼Œ</span>
<span class="token comment">//è¿”å›falseï¼Œæ²¡æœ‰æ•°æ®ï¼›è¿”å›trueï¼Œæœ‰æ•°æ® </span>

<span class="token class-name">XXX</span> <span class="token function">getXXX</span><span class="token punctuation">(</span>å‚æ•°<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//è·å–æ•°æ® XXXä»£è¡¨æ•°æ®ç±»å‹ å¦‚ï¼šgetInt()è¿”å›ä¸€ä¸ªintå‹æ•°å€¼ getString()è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span>
<span class="token comment">//å‚æ•° </span>
<span class="token comment">//1.int åˆ—çš„ç¼–å·ï¼Œä»1å¼€å§‹ï¼ŒgetString(1)</span>
<span class="token comment">//2.String åˆ—çš„åç§° getDouble(&quot;balance&quot;) æ¨èä½¿ç”¨åˆ—åï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“åˆ—åçš„ç±»å‹ï¼Œé¿å…ç”¨ç¼–å·çš„æ–¹å¼å¯¼è‡´ç±»å‹å¯¹ä¸ä¸Šçš„é”™è¯¯</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨æ­¥éª¤</strong>ï¼š</p><ol><li><p>æ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ <code>next()</code></p></li><li><p>åˆ¤æ–­æ˜¯å¦æœ‰æ•°æ®</p></li><li><p>è·å–æ•°æ® <code>getXXX()</code></p></li><li><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> id <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> name <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">double</span> balance <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token string">&quot;balance&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="preparestatement" tabindex="-1"><a class="header-anchor" href="#preparestatement" aria-hidden="true">#</a> PrepareStatement</h3><h4 id="sqlæ³¨å…¥é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#sqlæ³¨å…¥é—®é¢˜" aria-hidden="true">#</a> sqlæ³¨å…¥é—®é¢˜</h4><p>åœ¨æ‹¼æ¥sqlæ—¶ï¼Œæœ‰ä¸€äº›sqlçš„ç‰¹æ®Šå…³é”®å­—å‚ä¸å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œä¼šé€ æˆå®‰å…¨æ€§é—®é¢˜ã€‚æ¯”å¦‚ï¼šæ‹¼æ¥çš„æ—¶å€™æ‹¼ä¸Šäº†or &#39;a&#39; = &#39;a&#39; è¿™ç§æ’ç­‰å¼ï¼Œå¯¼è‡´å‰é¢çš„æ¡ä»¶å†ç­›é€‰æœ€ç»ˆè¿˜æ˜¯ä¼šæŸ¥è¯¢åˆ°æ‰€æœ‰çš„è®°å½•å‡ºæ¥</p><p>æ¦‚å¿µï¼šé¢„ç¼–è¯‘çš„sqlè¯­å¥ã€‚ï¼ˆå‚æ•°ä½¿ç”¨ï¼Ÿä½œä¸ºå ä½ç¬¦ï¼‰</p><p>åæœŸéƒ½ä½¿ç”¨PrepareStatementï¼š</p><ol><li>å®‰å…¨ï¼Œé˜²æ­¢sqlæ³¨å…¥</li><li>åœ¨æ‰§è¡Œå¯å˜å‚æ•°çš„ä¸€æ¡SQLæ—¶ï¼ŒPreparedStatementæ¯”Statementçš„æ•ˆç‡é«˜ï¼Œå› ä¸ºDBMSé¢„ç¼–è¯‘ä¸€æ¡SQLå½“ç„¶ä¼šæ¯”å¤šæ¬¡ç¼–è¯‘ä¸€æ¡SQLçš„æ•ˆç‡è¦é«˜ã€‚</li><li>å¯¹äºå¤šæ¬¡é‡å¤æ‰§è¡Œçš„è¯­å¥ï¼Œä½¿ç”¨PreparedStamentæ•ˆç‡ä¼šæ›´é«˜ä¸€ç‚¹ï¼Œå¹¶ä¸”åœ¨è¿™ç§æƒ…å†µä¸‹ä¹Ÿæ¯”è¾ƒé€‚åˆä½¿ç”¨batch</li></ol><h3 id="statementã€preparestatementã€callablestatementå¼‚åŒ" tabindex="-1"><a class="header-anchor" href="#statementã€preparestatementã€callablestatementå¼‚åŒ" aria-hidden="true">#</a> Statementã€PrepareStatementã€CallableStatementå¼‚åŒ</h3><ul><li>åŒï¼šStatementã€PreparedStatementå’ŒCallableStatementéƒ½æ˜¯æ¥å£ã€‚</li><li>å¼‚ï¼š <ol><li>ç»§æ‰¿å…³ç³»ï¼š</li></ol><ul><li>Statementç»§æ‰¿è‡ªWrapper</li><li>PreparedStatementç»§æ‰¿è‡ªStatement</li><li>CallableStatementç»§æ‰¿è‡ªPreparedStatement</li></ul><ol start="2"><li>åŠŸèƒ½ä½œç”¨ï¼š <ul><li>Statementæ¥å£æä¾›äº†æ‰§è¡Œè¯­å¥å’Œè·å–ç»“æœçš„åŸºæœ¬æ–¹æ³•</li><li>PreparedStatementæ¥å£æ·»åŠ äº†å¤„ç† IN å‚æ•°çš„æ–¹æ³•</li><li>CallableStatementæ¥å£æ·»åŠ äº†å¤„ç† OUT å‚æ•°çš„æ–¹æ³•</li></ul></li><li>ç‰¹ç‚¹ï¼š <ul><li>Statement: <strong>æ™®é€šçš„ä¸å¸¦å‚çš„æŸ¥è¯¢SQL</strong>ï¼›æ”¯æŒæ‰¹é‡æ›´æ–°,æ‰¹é‡åˆ é™¤;</li><li>PreparedStatement: å¯å˜å‚æ•°çš„SQL,ç¼–è¯‘ä¸€æ¬¡,æ‰§è¡Œå¤šæ¬¡,æ•ˆç‡é«˜; å®‰å…¨æ€§å¥½ï¼Œ<strong>æœ‰æ•ˆé˜²æ­¢Sqlæ³¨å…¥ç­‰é—®é¢˜</strong>; æ”¯æŒæ‰¹é‡æ›´æ–°,æ‰¹é‡åˆ é™¤;</li><li>CallableStatement: ç»§æ‰¿è‡ªPreparedStatement,æ”¯æŒå¸¦å‚æ•°çš„SQLæ“ä½œ; **** **æ”¯æŒè°ƒç”¨å­˜å‚¨è¿‡ç¨‹,**æä¾›äº†å¯¹è¾“å‡ºå’Œè¾“å…¥/è¾“å‡ºå‚æ•°(INOUT)çš„æ”¯æŒ;</li></ul></li></ol></li></ul><h4 id="ä½¿ç”¨æ­¥éª¤-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ­¥éª¤-1" aria-hidden="true">#</a> ä½¿ç”¨æ­¥éª¤</h4><ol><li>å¯¼å…¥é©±åŠ¨jaråŒ…</li><li>æ³¨å†Œé©±åŠ¨</li><li>è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡ Connection</li><li>å®šä¹‰sql</li><li>è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡ <strong>PrepareStatement</strong></li><li>ç»™sqlä¸­çš„å‚æ•°èµ‹å€¼ <code>setXXX(?çš„ä½ç½®ç¼–å·ä»1å¼€å§‹, ?çš„å€¼)</code> xxxä»£è¡¨å‚æ•°çš„ç±»å‹</li><li>æ‰§è¡Œsqlï¼Œæ¥æ”¶ç»“æœï¼Œä¸éœ€è¦ä¼ é€’sqlè¯­å¥</li><li>å¤„ç†ç»“æœ</li><li>é‡Šæ”¾èµ„æº</li></ol><h3 id="è‡ªå®šä¹‰çš„å·¥å…·ç±»" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰çš„å·¥å…·ç±»" aria-hidden="true">#</a> è‡ªå®šä¹‰çš„å·¥å…·ç±»</h3><ul><li>é™æ€ä»£ç å—ï¼š <ul><li>é©±åŠ¨æ³¨å†Œã€‚è¯»å–propertiesæ–‡ä»¶è·å–æ•°æ®åº“é©±åŠ¨æ¥æ³¨å†Œï¼Œå†™åœ¨é™æ€ä»£ç å—ä¸­ï¼Œä½¿å¾—è¿™ä¸ªé©±åŠ¨åªæ³¨å†Œä¸€æ¬¡ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ–¹æ³•å‰å°±ä¼šæ³¨å†Œ</li></ul></li><li>æ–¹æ³•ï¼š <ol><li>è·å–è¿æ¥ã€‚é©±åŠ¨æ³¨å†Œçš„é™æ€ä»£ç å—æ—¶ï¼Œè¯»å–propertiesæ–‡ä»¶é¡ºä¾¿ç»™é™æ€å˜é‡èµ‹å€¼ï¼ˆurlï¼Œuserï¼Œpasswordï¼‰æ¥è·å–è¿æ¥</li><li>é‡Šæ”¾èµ„æºã€‚é‡å¤ä»£ç çš„æŠ½å–</li></ol></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> user<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç»å¯¹è·¯å¾„ï¼Œå¯ä»¥ï¼Œä½†æ˜¯ä½ç½®ä¸€ç§»åŠ¨å°±ä¸å¥½ä½¿</span>
        <span class="token comment">//è·å–srcç›®å½•ä¸‹çš„æ–‡ä»¶-&gt;ClassLoader</span>
        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ§åˆ¶äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶äº‹åŠ¡" aria-hidden="true">#</a> æ§åˆ¶äº‹åŠ¡</h3><p>äº‹åŠ¡ï¼šä¸€ä¸ªåŒ…å«å¤šä¸ªæ­¥éª¤çš„ä¸šåŠ¡æ“ä½œã€‚å¦‚æœä¸šåŠ¡æ“ä½œè¢«äº‹åŠ¡ç®¡ç†ï¼Œé‚£ä¹ˆè¿™äº›æ­¥éª¤åªèƒ½åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥</p><p>ä½¿ç”¨Connectionå¯¹è±¡æ¥ç®¡ç†äº‹åŠ¡</p><p>åœ¨æ‰§è¡Œsqlä¹‹å‰<strong>å¼€å¯äº‹åŠ¡</strong></p><p>åœ¨æ‰€æœ‰sqlæ‰§è¡Œå®Œæˆä¹‹å<strong>æäº¤äº‹åŠ¡</strong></p><p>åœ¨catchä¸­<strong>å›æ»šäº‹åŠ¡</strong></p><p>æ¡ˆä¾‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> preparedStatement1 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name">PreparedStatement</span> preparedStatement2 <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;update account set balance = balance - ? where id = ?&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;update account set balance = balance + ? where id = ?&quot;</span><span class="token punctuation">;</span>
  preparedStatement1 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  preparedStatement2 <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  preparedStatement1<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  preparedStatement1<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  preparedStatement2<span class="token punctuation">.</span><span class="token function">setDouble</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  preparedStatement2<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  preparedStatement1<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//å¼‚å¸¸-------------------</span>
  preparedStatement2<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> preparedStatement1<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> preparedStatement2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•°æ®åº“è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“è¿æ¥æ± " aria-hidden="true">#</a> æ•°æ®åº“è¿æ¥æ± </h2><p>æ¦‚å¿µï¼šå­˜æ”¾æ•°æ®åº“è¿æ¥çš„å®¹å™¨ã€‚å½“ç³»ç»Ÿè¢«åˆå§‹åŒ–åï¼Œå®¹å™¨ä¼šè¢«åˆ›å»ºï¼Œå®¹å™¨ä¸­ä¼šç”³è¯·ä¸€äº›è¿æ¥å¯¹è±¡ã€‚å½“ç”¨æˆ·è®¿é—®æ•°æ®åº“æ—¶ï¼Œä»å®¹å™¨ä¸­è·å–è¿æ¥å¯¹è±¡ï¼Œç”¨æˆ·è®¿é—®å®Œä¹‹åï¼Œå°†è¿æ¥å¯¹è±¡å½’è¿˜ç»™å®¹å™¨</p><p>å¥½å¤„ï¼š</p><ol><li>èŠ‚çº¦èµ„æºï¼Œå› ä¸ºè¿æ¥å¯¹è±¡å¯ä»¥å¤ç”¨</li><li>é«˜æ•ˆï¼Œç›´æ¥ä»å®¹å™¨ä¸­è·å–è¿æ¥ï¼Œä¸ç”¨å†è€—è´¹ç”³è¯·æ—¶é—´</li></ol><h3 id="å®ç°" tabindex="-1"><a class="header-anchor" href="#å®ç°" aria-hidden="true">#</a> å®ç°</h3><ul><li><p>æ ‡å‡†æ¥å£ï¼šDataSource</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–è¿æ¥å¯¹è±¡</span>

<span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å¦‚æœè¿æ¥å¯¹è±¡æ˜¯ä»è¿æ¥æ± ä¸­è·å–çš„ï¼Œé‚£ä¹ˆè°ƒç”¨Connection.close()æ–¹æ³•å°±ä¸å†å…³é—­è¿æ¥ï¼Œè€Œæ˜¯å½’è¿˜è¿æ¥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å®ç°</p><ul><li>c3p0ï¼šæ—§ï¼Œå’Œhibernateæ¡†æ¶åŒæ—¶ä½¿ç”¨æœ‰è¾ƒå¥½çš„æ€§èƒ½</li><li>druidï¼šæ–°ï¼Œç”±é˜¿é‡Œå·´å·´å®ç°ï¼Œé«˜æ•ˆ.(è¯»éŸ³join d)</li></ul></li></ul><h3 id="c3p0" tabindex="-1"><a class="header-anchor" href="#c3p0" aria-hidden="true">#</a> c3p0</h3><p><strong>ä½¿ç”¨æ­¥éª¤</strong>ï¼š</p><ol><li>å¯¼å…¥jaråŒ…</li><li>å®šä¹‰é…ç½®æ–‡ä»¶ <ol><li>æ–‡ä»¶åç§°ï¼šå¿…é¡»æ˜¯ c3p0.properties æˆ– c3p0-config.xml ï¼Œå¦åˆ™c3p0æ— æ³•è‡ªåŠ¨å¯»æ‰¾é…ç½®æ–‡ä»¶</li><li>æ–‡ä»¶è·¯å¾„ï¼šç±»è·¯å¾„ä¸‹ï¼Œå³srcç›®å½•ä¸‹</li></ol></li><li>åˆ›å»ºæ ¸å¿ƒå¯¹è±¡ï¼šæ•°æ®åº“è¿æ¥æ± å¯¹è±¡ <strong>ComboPooledDataSource</strong>ã€‚æ„é€ æ–¹æ³•ä¸­ï¼Œä¸ä¼ é€’å‚æ•°ï¼Œä½¿ç”¨é»˜è®¤çš„é…ç½®ï¼›å¯ä»¥ä¼ å…¥è‡ªå®šä¹‰é…ç½®çš„åç§°ï¼Œåˆ™ä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰çš„é…ç½®</li><li>è·å–è¿æ¥ï¼š<code>getConnection()</code></li></ol><p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- æ–°å»ºComboPooledDataSourceé»˜è®¤ä½¿ç”¨çš„çš„é…ç½®è¯»å–è¿æ¥æ± å¯¹è±¡ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default-config</span><span class="token punctuation">&gt;</span></span>
  	<span class="token comment">&lt;!--  è¿æ¥å‚æ•° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- è¿æ¥æ± å‚æ•° --&gt;</span>
    <span class="token comment">&lt;!--åˆå§‹åŒ–ç”³è¯·çš„è¿æ¥æ•°é‡ã€‚å®¹å™¨ä¸€åˆå§‹åŒ–ï¼Œç”³è¯·å¥½5ä¸ªè¿æ¥--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--æœ€å¤§çš„è¿æ¥æ•°é‡ã€‚åˆå§‹åŒ–çš„ä¸€æ—¦ç”¨å®Œï¼Œå†éœ€è¦ä½¿ç”¨çš„è¯éœ€è¦å†ç”³è¯·ï¼Œä½†æ˜¯ç”³è¯·çš„æ€»æ•°ä¸èƒ½è¶…è¿‡10ä¸ª--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--è¶…æ—¶æ—¶é—´--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkoutTimeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>3000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default-config</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- è‡ªå®šä¹‰é…ç½®ï¼Œå…¶ä¸­nameå¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥ComboPooledDataSourceçš„æ„é€ æ–¹æ³•ä¸­ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>named-config</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>otherc3p0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
    <span class="token comment">&lt;!--  è¿æ¥å‚æ•° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- è¿æ¥æ± å‚æ•° --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkoutTimeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>named-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="druid" tabindex="-1"><a class="header-anchor" href="#druid" aria-hidden="true">#</a> druid</h3><p><strong>ä½¿ç”¨æ­¥éª¤</strong>ï¼š</p><ol><li>å¯¼å…¥jaråŒ…</li><li>å®šä¹‰é…ç½®æ–‡ä»¶ <ol><li>æ˜¯propertieså½¢å¼çš„</li><li>å¯ä»¥æ˜¯ä»»æ„åç§°ï¼Œå¯ä»¥æ”¾åœ¨ä»»æ„çš„ç›®å½•ä¸‹</li></ol></li><li>ç”¨propertiesæ¥åŠ è½½é…ç½®æ–‡ä»¶</li><li>é€šè¿‡å·¥å‚ç±»<code>druidDataSourceFactory</code>è·å–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡</li><li>è·å–è¿æ¥ï¼š<code>getConnection()</code></li></ol><p><strong>é…ç½®æ–‡ä»¶ï¼š</strong></p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/test</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token comment"># åˆå§‹åŒ–è¿æ¥æ•°é‡</span>
<span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
<span class="token comment"># æœ€å¤§è¿æ¥æ•°é‡</span>
<span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token comment"># è¶…æ—¶æ—¶é—´</span>
<span class="token key attr-name">maxWait</span><span class="token punctuation">=</span><span class="token value attr-value">3000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å·¥å…·ç±»</strong></p><ul><li>é™æ€ä»£ç å—ï¼š <ul><li>åœ¨é™æ€ä»£ç å—ä¸­é€šè¿‡propertiesæ¥åŠ è½½é…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–è¿æ¥æ± å¯¹è±¡</li></ul></li><li>æ–¹æ³•ï¼š <ul><li>è·å–è¿æ¥</li><li>é‡Šæ”¾èµ„æº</li><li>è·å–è¿æ¥æ± </li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token punctuation">{</span>
  <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataSource <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å½’è¿˜è¿æ¥</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>statement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spring-jdbc" tabindex="-1"><a class="header-anchor" href="#spring-jdbc" aria-hidden="true">#</a> Spring JDBC</h2><p>Springæ¡†æ¶å¯¹JDBCçš„ç®€å•å°è£…ï¼Œä½¿ç”¨<strong>JDBCTemplate</strong>å¯¹è±¡</p><p>ä¸éœ€è¦ç”³è¯·è¿æ¥å’Œé‡Šæ”¾èµ„æºäº†ï¼Œåªéœ€é€šè¿‡è¿æ¥æ± è·å–JDBCTemplateç„¶åå³å¯æ‰§è¡ŒDMLã€DQL</p><p><strong>æ­¥éª¤</strong>ï¼š</p><ol><li><p>å¯¼å…¥jaråŒ…</p></li><li><p>åˆ›å»ºJDBCTemplateå¯¹è±¡ã€‚ä¾èµ–DataSource</p><p><code>JDBCTemplate jdbcTemplate = new JDBCTemplate(dataSource)</code></p></li><li><p>è°ƒç”¨æ–¹æ³•æ¥å®Œæˆcrudçš„æ“ä½œ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//æ‰§è¡ŒDMLè¯­å¥ï¼Œå®Œæˆå¢ã€åˆ ã€æ”¹è¯­å¥</span>
<span class="token comment">//è¿”å›å½±å“è¡Œæ•°</span>

<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryForMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//æŸ¥è¯¢ç»“æœå°†ç»“æœé›†å°è£…æˆä¸ºmapé›†åˆ</span>
<span class="token comment">//åˆ—åä¸ºkeyï¼Œå€¼ä¸ºvalue</span>
<span class="token comment">//æŸ¥è¯¢çš„ç»“æœé›†é•¿åº¦åªèƒ½æ˜¯1ï¼Œå¦åˆ™æŠ¥é”™</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//æŸ¥è¯¢ç»“æœå°†ç»“æœé›†å°è£…æˆä¸ºlisté›†åˆ</span>
<span class="token comment">//æ¯ä¸€ä¸ªè®°å½•å°è£…æˆMap&lt;String, Object&gt;ï¼Œå†æŠŠæ‰€æœ‰mapè£…è½½åˆ°Listä¸­</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//æ‰§è¡ŒDQLè¯­å¥ï¼ŒæŸ¥è¯¢ç»“æœå°†ç»“æœé›†å°è£…æˆJavaBeanå¯¹è±¡</span>
<span class="token comment">//å‚æ•°ï¼šRowMapper</span>
<span class="token comment">//ä¸€èˆ¬ä½¿ç”¨ BeanPropertyRowMapperå¯¹è±¡ï¼Œå®ç°æ•°æ®-&gt;JavaBeanå¯¹è±¡çš„è½¬æ¢</span>
<span class="token comment">//new BeanPropertyRowMapper&lt;&gt;(T.class)</span>

<span class="token class-name">T</span> <span class="token function">queryForObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//æŸ¥è¯¢ç»“æœå°†ç»“æœé›†å°è£…æˆå¯¹è±¡(åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»)</span>
<span class="token comment">//ä¸€èˆ¬ç”¨äºèšåˆå‡½æ•°çš„æŸ¥è¯¢</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><strong>æ¡ˆä¾‹</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * ä¿®æ”¹idä¸º1001çš„è®°å½•çš„salaryä¸º10000
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update emp set salary = 10000 where id = ?&quot;</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æ’å…¥ä¸€æ¡æ–°è®°å½•
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into emp(id, ename, dept_id) values(?, ?, ?)&quot;</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1015</span><span class="token punctuation">,</span> <span class="token string">&quot;éƒ­é–&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * åˆ é™¤ä¸€æ¡è®°å½•
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from emp where id = ?&quot;</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1015</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢idä¸º1001çš„è®°å½•ï¼Œå°†ç»“æœé›†å°è£…æˆ Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,</span> <span class="token attr-name">Object</span><span class="token punctuation">&gt;</span></span>
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from emp where id = ?&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> stringObjectMap <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">queryForMap</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringObjectMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢æ‰€æœ‰è®°å½•ï¼Œå°†ç»“æœé›†å°è£…æˆ List&lt;Map<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,</span> <span class="token attr-name">Object</span><span class="token punctuation">&gt;</span></span>&gt;
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from emp&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">queryForList</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> stringObjectMap <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stringObjectMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢æ‰€æœ‰è®°å½•ï¼Œå°†ç»“æœé›†å°è£…æˆ List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Emp</span><span class="token punctuation">&gt;</span></span>
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from emp&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Emp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æŸ¥è¯¢è®°å½•æ•°
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select count(id) from emp&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> total <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="servlet" tabindex="-1"><a class="header-anchor" href="#servlet" aria-hidden="true">#</a> Servlet</h1><h2 id="æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ¦‚å¿µ" aria-hidden="true">#</a> æ¦‚å¿µ</h2><p>server applet è¿è¡Œåœ¨æœåŠ¡ç«¯çš„å°ç¨‹åº</p><p>servletå°±æ˜¯ä¸€ä¸ª<strong>æ¥å£</strong>ï¼Œå®šä¹‰äº†Javaç±»è¢«tomcatè¯†åˆ«åˆ°çš„<strong>è§„åˆ™</strong></p><p><strong>é…ç½®servlet</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--é…ç½®Servlet å…¨ç±»åå’Œservletåå­—çš„æ˜ å°„--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>demo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>cn.itcast.servlet.ServletDemo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--urlå¯¹servletçš„æ˜ å°„ urlå’Œservletåå­—çš„æ˜ å°„--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>demo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/demo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ‰§è¡ŒåŸç†" tabindex="-1"><a class="header-anchor" href="#æ‰§è¡ŒåŸç†" aria-hidden="true">#</a> æ‰§è¡ŒåŸç†</h2><ol><li>å½“æœåŠ¡å™¨æ¥æ”¶åˆ°æµè§ˆå™¨çš„è¯·æ±‚åï¼Œè§£æè¯·æ±‚çš„urlï¼Œè·å–èµ„æºè·¯å¾„</li><li>æŸ¥æ‰¾web.xmlå»å¯»æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„ <code>&lt;url-pattern&gt;</code></li><li>æ‰¾åˆ°url-patternå¯¹åº”çš„ <code>&lt;servlet-class&gt;</code> å…¨ç±»å</li><li>æ ¹æ®å…¨ç±»åå°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜Class.forName()</li><li>åˆ›å»ºå¯¹è±¡cls.newInstance()</li><li>è°ƒç”¨serviceæ–¹æ³•</li></ol><p><strong>æŠ½è±¡æ–¹æ³•</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//åˆå§‹åŒ–æ–¹æ³•</span>
<span class="token comment">//åœ¨servletè¢«åˆ›å»ºæ—¶æ‰§è¡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">//è·å–ServletConfigå¯¹è±¡</span>
<span class="token comment">//Servleté…ç½®å¯¹è±¡</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">ServletConfig</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//æä¾›æœåŠ¡çš„æ–¹æ³•</span>
<span class="token comment">//åœ¨servletè¢«è®¿é—®æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œå¤šæ¬¡</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>

<span class="token comment">//è·å–Servletçš„ä¿¡æ¯ï¼Œç‰ˆæœ¬ã€ä½œè€…</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getServletInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//é”€æ¯æ–¹æ³•</span>
<span class="token comment">//åœ¨æœåŠ¡å™¨è¢«æ­£å¸¸å…³é—­æ—¶æ‰§è¡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> <strong>ç”Ÿå‘½å‘¨æœŸ</strong></h2><ol><li><p>åŠ è½½ï¼šservletå®¹å™¨<strong>é€šè¿‡ç±»åŠ è½½å™¨</strong>ä½¿ç”¨servletç±»å¯¹åº”çš„æ–‡ä»¶<strong>åŠ è½½</strong>servlet</p></li><li><p>åˆ›å»ºï¼šé€šè¿‡è°ƒç”¨servlet<strong>æ„é€ å‡½æ•°</strong>åˆ›å»ºä¸€ä¸ªservletå¯¹è±¡</p></li><li><p>åˆå§‹åŒ–ï¼šæ‰§è¡Œinitæ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€æ¬¡</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>åˆ›å»ºServletçš„å®ä¾‹æ˜¯ç”±Servletå®¹å™¨æ¥å®Œæˆçš„ï¼Œä¸”åˆ›å»ºServletå®ä¾‹æ˜¯åœ¨åˆå§‹åŒ–æ–¹æ³•init()ä¹‹å‰
é»˜è®¤æƒ…å†µä¸‹ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶ï¼ŒServletè¢«åˆ›å»º
å¯ä»¥æŒ‡å®šServletçš„åˆ›å»ºæ—¶æœº
åœ¨&lt;servlet&gt;æ ‡ç­¾ä¸‹çš„&lt;load-on-startup&gt;é…ç½®
è´Ÿæ•°ï¼šç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶åˆ›å»ºï¼ˆé»˜è®¤-1ï¼‰
0æˆ–æ­£æ•°ï¼šæœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»º


Servletçš„initæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œè¯´æ˜Servletåœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ŒServletæ˜¯å•ä¾‹çš„ã€‚
å¤šä¸ªç”¨æˆ·è®¿é—®æ—¶ï¼Œå¯èƒ½å­˜åœ¨çº¿ç¨‹å®‰å…¨çš„é—®é¢˜
è§£å†³æ–¹æ¡ˆï¼šå°½é‡ä¸è¦servletä¸­å®šä¹‰æˆå‘˜å˜é‡ï¼Œå®šä¹‰å±€éƒ¨å˜é‡çš„è¯ï¼Œæ¯æ¬¡æ–¹æ³•å…¥æ ˆéƒ½æœ‰ä¸€ä»½ç‹¬ç«‹çš„å±€éƒ¨å˜é‡ã€‚å³ä½¿å®šä¹‰äº†æˆå‘˜å˜é‡ä¹Ÿä¸è¦å¯¹å…¶ä¿®æ”¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æä¾›æœåŠ¡ï¼šæ‰§è¡Œserviceæ–¹æ³•ï¼Œæ‰§è¡Œå¤šæ¬¡ã€‚æ¯å½“æœ‰ä¸€ä¸ªå®¢æˆ·è¯·æ±‚ï¼Œå®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†å®¢æˆ·è¯·æ±‚</p></li><li><p>è¢«é”€æ¯ï¼šæ‰§è¡Œdestroyæ–¹æ³•ï¼Œåªæ‰§è¡Œä¸€æ¬¡</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>åªæœ‰æœåŠ¡å™¨æ­£å¸¸å…³é—­æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œdestroyæ–¹æ³•

åœ¨é”€æ¯servletä¹‹å‰ï¼Œæ‰§è¡Œdestroyæ–¹æ³•
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="å¤šçº¿ç¨‹é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¤šçº¿ç¨‹é—®é¢˜" aria-hidden="true">#</a> å¤šçº¿ç¨‹é—®é¢˜</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Servletçš„initæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œè¯´æ˜Servletåœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ŒServletæ˜¯å•ä¾‹çš„ã€‚servletå¤„äºæœåŠ¡å™¨è¿›ç¨‹ä¸­ï¼Œå®ƒé€šè¿‡å¤šçº¿ç¨‹æ–¹å¼è¿è¡Œå…¶serviceæ–¹æ³•ï¼Œä¸€ä¸ªå®ä¾‹å¯ä»¥æœåŠ¡äºå¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å…¶å®ä¾‹ä¸€èˆ¬ä¸ä¼šé”€æ¯ã€‚
è€ŒCGIå¯¹æ¯ä¸ªè¯·æ±‚éƒ½äº§ç”Ÿæ–°çš„è¿›ç¨‹ï¼ŒæœåŠ¡å®Œæˆåå°±é”€æ¯ï¼Œæ‰€ä»¥æ•ˆç‡ä¸Šä½äºservletã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="servlet3-0" tabindex="-1"><a class="header-anchor" href="#servlet3-0" aria-hidden="true">#</a> Servlet3.0</h2><ul><li><p>æ”¯æŒæ³¨è§£é…ç½®ï¼Œå¯ä»¥ä¸éœ€è¦web.xml</p></li><li><p>åœ¨ç±»ä¸Šä½¿ç”¨<code>@WebServlet(&quot;èµ„æºè·¯å¾„&quot;)</code>æ³¨è§£ï¼Œè¿›è¡Œé…ç½®èµ„æºè·¯å¾„</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//éœ€è¦åˆ¶å®šurlPatternsçš„å€¼ï¼Œä½†valueä»£è¡¨äº†urlPatternsçš„å€¼ï¼ŒåŒæ—¶valueå¯ä»¥çœç•¥ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿é…ç½®</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/demo2&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServletDemo01</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="ä½“ç³»ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ä½“ç³»ç»“æ„" aria-hidden="true">#</a> ä½“ç³»ç»“æ„</h2><p>å®ç°ç±»</p><p>Servlet(æ¥å£)--GenericServlet(æŠ½è±¡ç±»)--HttpServlet(æŠ½è±¡ç±»)</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrty5io6j313u0iwgsa.jpg" alt=""></p><h3 id="gerericservlet" tabindex="-1"><a class="header-anchor" href="#gerericservlet" aria-hidden="true">#</a> GerericServlet</h3><p>å°†Servletæ¥å£ä¸­çš„å…¶ä»–æ–¹æ³•åšäº†é»˜è®¤ç©ºå®ç°ï¼Œåªå°†serviceæ–¹æ³•ä½œä¸ºæŠ½è±¡ã€‚å°†æ¥åˆ›å»ºServletæ—¶ï¼Œç»§æ‰¿GenericServletååªéœ€å®ç°serviceæ–¹æ³•</p><p>ç»™å‡ºäº†<strong>è®¾è®¡ servlet çš„ä¸€äº›éª¨æ¶ï¼Œå®šä¹‰äº† servlet ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œè¿˜æœ‰ä¸€äº›å¾—åˆ°åå­—ã€é…ç½®ã€åˆå§‹åŒ–å‚æ•°çš„æ–¹æ³•ï¼Œå…¶è®¾è®¡çš„<strong>æ˜¯å’Œåº”ç”¨å±‚åè®®æ— å…³çš„</strong></p><h3 id="httpservlet" tabindex="-1"><a class="header-anchor" href="#httpservlet" aria-hidden="true">#</a> HttpServlet</h3><p>å¯¹Httpåè®®çš„å°è£…ï¼Œç®€åŒ–æ“ä½œ</p><ol><li><p>å®šä¹‰ç±»ç»§æ‰¿HttpServlet</p></li><li><p>å¤å†™doGetæˆ–è€…doPostæ–¹æ³•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/RequestDemo01&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestDemo01</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="ç›¸å…³é…ç½®" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³é…ç½®" aria-hidden="true">#</a> ç›¸å…³é…ç½®</h2><ul><li><p>url-patternï¼šservletè®¿é—®è·¯å¾„</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ä¸€ä¸ªservletå¯ä»¥å®šä¹‰å¤šä¸ªè®¿é—®è·¯å¾„ï¼Œä¸€èˆ¬åªå®šä¹‰ä¸€ä¸ª

è§„åˆ™ï¼š
1./xxx
2./xxx/xxx å¤šå±‚è·¯å¾„ï¼Œç›®å½•ç»“æœ
3.*.do ä¸€å®šä¸èƒ½åŠ /ï¼Œè·¯å¾„ä¸­ä¸€å®šè¦åŠ .do
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="request" tabindex="-1"><a class="header-anchor" href="#request" aria-hidden="true">#</a> Request</h2><p><strong>è¯·æ±‚çš„è¿‡ç¨‹</strong>ï¼š</p><ol><li>tomcatæœåŠ¡å™¨æ ¹æ®è¯·æ±‚urlä¸­çš„<strong>èµ„æºè·¯å¾„</strong>ï¼Œåˆ›å»ºå¯¹åº”çš„<strong>servlet</strong>å¯¹è±¡</li><li>tomcatæœåŠ¡å™¨åˆ›å»ºrequestå’Œresponseä¸¤ä¸ªå¯¹è±¡ï¼Œrequestå¯¹è±¡ä¸­å°è£…è¯·æ±‚æ¶ˆæ¯æ•°æ®</li><li>tomcatæœåŠ¡å™¨å°†requestå’Œresponseä¼ é€’ç»™servletä¸­çš„serviceæ–¹æ³•ï¼Œå¹¶è°ƒç”¨</li><li>å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡requestè·å–è¯·æ±‚ä¿¡æ¯ï¼Œé€šè¿‡responseè®¾ç½®å“åº”æ•°æ®</li><li>tomcatæœåŠ¡å™¨åœ¨ç»™æµè§ˆå™¨åšå‡ºå“åº”ä¹‹å‰ï¼Œä»responseå¯¹è±¡ä¸­æå–è¢«è®¾ç½®çš„å“åº”æ¶ˆæ¯æ•°æ®</li></ol><p><strong>requestç»§æ‰¿ä½“ç³»ç»“æ„</strong>ï¼š</p><p>ServletRequest(æ¥å£)--HttpServletRequest(æ¥å£)--RequestFacade(ç±» tomcatçš„)</p><h3 id="åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#åŠŸèƒ½" aria-hidden="true">#</a> åŠŸèƒ½</h3><h4 id="è·å–è¯·æ±‚æ¶ˆæ¯æ•°æ®" tabindex="-1"><a class="header-anchor" href="#è·å–è¯·æ±‚æ¶ˆæ¯æ•°æ®" aria-hidden="true">#</a> è·å–è¯·æ±‚æ¶ˆæ¯æ•°æ®</h4><ol><li><p>è·å–è¯·æ±‚è¡Œæ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//è·å–è¯·æ±‚æ–¹å¼</span>
<span class="token class-name">String</span> <span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ***** è·å–è™šæ‹Ÿç›®å½•ï¼ˆé¡¹ç›®è·¯å¾„ï¼‰</span>
<span class="token class-name">String</span> <span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–Servletè·¯å¾„ï¼ˆèµ„æºè·¯å¾„ï¼‰</span>
<span class="token class-name">String</span> <span class="token function">getServletPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–getè¯·æ±‚å‚æ•°ï¼ˆè·¯å¾„å‚æ•°ï¼‰åç»­ä¸é‡‡ç”¨è¿™ä¸ªæ–¹æ³•è·å–å‚æ•°ï¼ˆè·å–åˆ°çš„æ˜¯ä¸€è¡Œçš„ï¼‰</span>
<span class="token class-name">String</span> <span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ***** è·å–è¯·æ±‚uriï¼ˆé¡¹ç›®è·¯å¾„+èµ„æºè·¯å¾„ï¼‰</span>
<span class="token comment">//contextPath+servletPath</span>
<span class="token class-name">String</span> <span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–æ•´ä¸ªurl ä¸åŒ…å«è·¯å¾„å‚æ•°</span>
<span class="token comment">//host+contextPath+servletPath</span>
<span class="token class-name">StringBuffer</span> <span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
	ï¼ˆèŒƒå›´æ›´å¤§ï¼‰uri:ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ /day14/demo ï¼šå…±å’Œå›½
	url:ç»Ÿä¸€èµ„æºå®šä½ç¬¦ http://localhost:8080/day14/demo ï¼šä¸­å›½äººæ°‘å…±å’Œå›½
*/</span>

<span class="token comment">//è·å–åè®®å’Œç‰ˆæœ¬å·</span>
<span class="token class-name">String</span> <span class="token function">getProtocol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–å®¢æˆ·æœºçš„IPåœ°å€ IPv6åœ°å€</span>
<span class="token class-name">String</span> <span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfxq3s8oi3j30y60n6adq.jpg" alt="image-20200619172425047"></p></li><li><p>è·å–è¯·æ±‚å¤´æ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ***** æ ¹æ®è¯·æ±‚å¤´çš„åç§°æ¥è·å–å€¼</span>
<span class="token class-name">String</span> <span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–æ‰€æœ‰è¯·æ±‚å¤´çš„åç§°</span>
<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getHeaderNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å½“ä½œè¿­ä»£å™¨æ¥ä½¿ç”¨</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è·å–è¯·æ±‚ä½“æ•°æ®ï¼ˆåªæœ‰postè¯·æ±‚æ–¹å¼æ‰æœ‰è¯·æ±‚ä½“ï¼‰</p><ol><li><p>è·å–æµæ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">BufferedReader</span> <span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å­—ç¬¦è¾“å…¥æµ ï¼ˆè·å–åˆ°çš„æ˜¯ä¸€è¡Œçš„ï¼‰</span>
<span class="token class-name">ServletInputStream</span> <span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å­—èŠ‚è¾“å…¥æµ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ä»æµæ•°æ®ä¸­æ‹¿æ•°æ®</p></li></ol></li></ol><h4 id="å…¶ä»–åŠŸèƒ½-éå¸¸é‡è¦" tabindex="-1"><a class="header-anchor" href="#å…¶ä»–åŠŸèƒ½-éå¸¸é‡è¦" aria-hidden="true">#</a> å…¶ä»–åŠŸèƒ½ï¼ˆéå¸¸é‡è¦ï¼‰</h4><ol><li><p>è·å–è¯·æ±‚å‚æ•°é€šç”¨çš„æ–¹å¼ï¼ŒåŒæ—¶é€‚ç”¨get/postè¯·æ±‚ï¼Œå¯ä»¥å¤ç”¨å…¶ä¸­ä¸€ä»½çš„ä»£ç </p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//æ ¹æ®å‚æ•°åè·å–å‚æ•°å€¼ï¼Œä¼šè‡ªåŠ¨åˆ†éš”</span>
<span class="token class-name">String</span> <span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//tomcat8ä¼šè‡ªåŠ¨è§£å†³ä¸­æ–‡çš„é—®é¢˜</span>
<span class="token comment">//å¦‚æœä½¿ç”¨äº†å…¶ä»–ç‰ˆæœ¬é‚£ä¹ˆéœ€è¦ä½¿ç”¨utf-8é‡æ–°ç¼–ç </span>
<span class="token class-name">String</span> param <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;param&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>param<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>ISO_8859_1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//æ ¹æ®å‚æ•°åè·å–å‚æ•°å€¼çš„æ•°ç»„(å¤é€‰æ¡†)</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–æ‰€æœ‰çš„å‚æ•°åç§°</span>
<span class="token class-name">Enumeration</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–æ‰€æœ‰å‚æ•°çš„ç®€ç›´å¯¹é›†åˆ</span>
<span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ä¸­æ–‡ä¹±ç é—®é¢˜</span>
<span class="token comment">/*
	getè¯·æ±‚ï¼štomcat8ç‰ˆæœ¬å·²è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
	postè¯·æ±‚ï¼šä¸­æ–‡ä¹±ç ï¼Œå†…éƒ¨è¿˜æ˜¯é€‚ç”¨æµçš„æ–¹å¼è·å–
		è§£å†³ï¼šrequest.setCharacterEncoding(&quot;utf-8&quot;)
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è¯·æ±‚è½¬å‘:ä¸€ç§åœ¨æœåŠ¡å™¨å†…éƒ¨çš„èµ„æºè·³è½¬çš„æ–¹å¼</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1.é€šè¿‡requestå¯¹è±¡è·å–è¯·æ±‚è½¬å‘å™¨å¯¹è±¡</span>
<span class="token comment">//pathå¡«å†™èµ„æºè·¯å¾„ï¼ˆservletçš„åï¼‰æˆ–è€…jspçš„åå­—ï¼Œå› ä¸ºjspå°±æ˜¯servlet</span>
<span class="token class-name">RequestDispatcher</span> <span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.ä½¿ç”¨RequestDispatcherå¯¹è±¡è¿›è¡Œè½¬å‘</span>
<span class="token keyword">void</span> <span class="token function">forward</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/*
	1.æµè§ˆå™¨åœ°å€æ è·¯å¾„æ²¡æœ‰å‘ç”Ÿå˜åŒ–
	2.åªèƒ½è½¬å‘åˆ°å½“å‰æœåŠ¡å™¨å†…éƒ¨çš„èµ„æºä¸­
	3.è½¬å‘æ˜¯åŒä¸€æ¬¡è¯·æ±‚ï¼ŒåŒä¸€æ¬¡è¯·æ±‚æ„å‘³ç€å¯ä»¥ä½¿ç”¨requeståŸŸä¸­çš„å…±äº«æ•°æ®
	4.åªèƒ½è½¬å‘åˆ°ç›¸åŒæ–¹æ³•
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsrtymg8lj31ru0tkwi9.jpg" alt=""></p></li><li><p>å…±äº«æ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//åŸŸå¯¹è±¡ï¼šä¸€ä¸ªæœ‰ä½œç”¨èŒƒå›´çš„å¯¹è±¡ï¼Œå¯ä»¥åœ¨èŒƒå›´å†…å…±äº«æ•°æ®</span>
<span class="token comment">/*
	requeståŸŸï¼šä»£è¡¨ä¸€æ¬¡è¯·æ±‚çš„èŒƒå›´ï¼Œä¸€èˆ¬ç”¨äºè¯·æ±‚è½¬å‘çš„å¤šä¸ªèµ„æºä¸­å…±äº«æ•°æ®
*/</span>

<span class="token comment">//å­˜å‚¨æ•°æ®</span>
<span class="token keyword">void</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–æ•°æ®</span>
<span class="token class-name">Object</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç§»é™¤æ•°æ®</span>
<span class="token keyword">void</span> <span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è·å–ServletContextå¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Servlet</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h3 id="æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><p>éœ€æ±‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>1.login htmlé¡µé¢ usernameã€passwordä¸¤ä¸ªè¾“å…¥æ¡†
2.ä½¿ç”¨druidè¿æ¥æ± æ“ä½œæ•°æ®åº“ä¸­çš„userè¡¨
3.ä½¿ç”¨JDBCTemplateå°è£…JDBC
4.ç™»é™†æˆåŠŸè·³è½¬åˆ°SuccessServletï¼Œç™»é™†æˆåŠŸï¼Œæ¬¢è¿ç”¨æˆ·å
5.ç™»é™†å¤±è´¥è·³è½¬åˆ°FailServletï¼Œç™»é™†å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç </p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//domain/User.java</span>
<span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>domain</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/1/4
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;User{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span>
                <span class="token string">&quot;, username=&#39;&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, password=&#39;&quot;</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token char">&#39;\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">=</span> password<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//dao/UserDao.java</span>
<span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">JDBCUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">BeanPropertyRowMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/1/4
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">User</span> loginUser<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> username <span class="token operator">=</span> loginUser<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> password <span class="token operator">=</span> loginUser<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where username = ? and password = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//util/JDBCUtils</span>
<span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/1/4
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            dataSource <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token comment">//servlet/LoginServlet</span>
<span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">UserDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/1/4
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/loginServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> loginUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        loginUser<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        loginUser<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>loginUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/failServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/successServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//serlvet/SuccessServlet</span>
<span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/1/4
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/successServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SuccessServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;ç™»é™†æˆåŠŸï¼Œæ¬¢è¿&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//servlet/FailServlet</span>
<span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/1/4
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/failServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FailServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doGet</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;ç™»é™†å¤±è´¥ï¼Œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//login.html</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span><span class="token class-name">Title</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;/day14_test/loginServlet&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;get&quot;</span><span class="token operator">&gt;</span>
        ç”¨æˆ·å<span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">&gt;</span></span>
        å¯†ç <span class="token operator">:</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token generics"><span class="token punctuation">&lt;</span>br<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;æäº¤&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ”¹è¿›ï¼šä½¿ç”¨BeanUtilsï¼Œå®ŒæˆMap-&gt;Objectï¼Œç®€åŒ–æ•°æ®å°è£…</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ç”¨äºå°è£…JavaBean

å±æ€§ï¼šsetterå’Œgetteræˆªå–åçš„äº§ç‰©ï¼Œå¤§å¤šæ•°å’Œæˆå‘˜å˜é‡ä¸€æ ·ã€‚ä¾‹å¤–ï¼šsetåé¢è·Ÿå…¶ä»–å†…å®¹ ä½†ä¹Ÿè®¾ç½®æˆå‘˜å˜é‡çš„å€¼

void populate(Object obj, Map map):å°†mapé›†åˆçš„é”®å€¼å¯¹ä¿¡æ¯ï¼Œå°è£…åˆ°JavaBeanå¯¹è±¡ä¸­
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="response" tabindex="-1"><a class="header-anchor" href="#response" aria-hidden="true">#</a> Response</h2><h3 id="åŠŸèƒ½-1" tabindex="-1"><a class="header-anchor" href="#åŠŸèƒ½-1" aria-hidden="true">#</a> åŠŸèƒ½</h3><h4 id="è®¾ç½®å“åº”æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®å“åº”æ¶ˆæ¯" aria-hidden="true">#</a> è®¾ç½®å“åº”æ¶ˆæ¯</h4><ol><li><p>è®¾ç½®å“åº”è¡Œ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//è®¾ç½®çŠ¶æ€ç </span>
<span class="token keyword">void</span> <span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token keyword">int</span> sc<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è®¾ç½®å“åº”å¤´</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//è®¾ç½®å“åº”ä½“</span>
<span class="token keyword">void</span> <span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è®¾ç½®å“åº”ä½“</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
	1.è·å–è¾“å‡ºæµ
			å­—ç¬¦è¾“å‡ºæµï¼šè¾“å‡ºå­—ç¬¦				PrintWriter getWriter()
			å­—èŠ‚è¾“å‡ºæµï¼šè¾“å‡ºä»»æ„æ•°æ®		 ServletOutputStream getOutputStream()
	2.ä½¿ç”¨è¾“å‡ºæµå°†æ•°æ®è¾“å‡ºåˆ°æµè§ˆå™¨
*/</span>
<span class="token class-name">PrintWriter</span> <span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å­—ç¬¦è¾“å‡ºæµ</span>
<span class="token class-name">ServletOutputStream</span> <span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–å­—èŠ‚è¾“å‡ºæµ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="æ¡ˆä¾‹-1" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-1" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><h4 id="é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#é‡å®šå‘" aria-hidden="true">#</a> é‡å®šå‘</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//æ–¹æ³•ä¸€</span>
<span class="token comment">//è®¾ç½®çŠ¶æ€ç ä¸º302</span>
response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//è®¾ç½®å“åº”å¤´location</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;location&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/day15/responseDemo02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//æ–¹æ³•äºŒ ç®€å•çš„é‡å®šå‘æ–¹æ³•</span>
response<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">&quot;/day15/responseDemo02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsru0l92kj31xo0ny7c4.jpg" alt=""></p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ol><li>æµè§ˆå™¨åœ°å€æ å‘ç”Ÿå˜åŒ–</li><li>å¯ä»¥è®¿é—®å…¶ä»–æœåŠ¡å™¨çš„èµ„æº</li><li>é‡å®šå‘æ˜¯ä¸¤æ¬¡è¯·æ±‚ï¼ˆä¸èƒ½ä½¿ç”¨requestå¯¹è±¡æ¥å…±äº«æ•°æ®ï¼‰</li><li>ç¬¬äºŒæ¬¡è¯·æ±‚æ˜¯å®¢æˆ·ç«¯å‘å‡ºçš„ï¼Œæ‰€ä»¥ç”¨ç»å¯¹è·¯å¾„çš„è¯è¦åŠ ä¸Šé¡¹ç›®è·¯å¾„</li></ol><p><strong>é‡å®šå‘å’Œè¯·æ±‚è½¬å‘çš„åŒºåˆ«</strong>ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>redirectï¼šè¯·æ±‚é‡å®šå‘:å®¢æˆ·ç«¯è¡Œä¸ºï¼Œæœ¬è´¨ä¸Šä¸º2æ¬¡è¯·æ±‚ï¼Œåœ°å€æ æ”¹å˜ï¼Œå‰ä¸€æ¬¡è¯·æ±‚å¯¹è±¡æ¶ˆå¤±ã€‚
ä¸¾ä¾‹ï¼šå»é“¶è¡ŒåŠäº‹ï¼Œç»“æœå‘Šè¯‰ä½ å°‘å¸¦äº†ä¸œè¥¿ï¼Œä½ å¾—å…ˆå»xxå±€åŠä¸´æ—¶èº«ä»½è¯,è¿™æ—¶ä½ å°±ä¼šèµ°å‡ºé“¶è¡Œï¼Œè‡ªå·±å‰å¾€xxå±€ï¼Œåœ°å€æ æ”¹å˜

forwardï¼šè¯·æ±‚è½¬å‘:æœåŠ¡å™¨è¡Œä¸ºï¼Œåœ°å€æ ä¸å˜ã€‚
ä¸¾ä¾‹ï¼šä½ æŠŠé’±åŒ…è½åœ¨å‡ºç§Ÿè½¦ä¸Šï¼Œä½ å»è­¦å¯Ÿå±€æŠ¥æ¡ˆï¼Œè­¦å¯Ÿå±€è¯´é’±åŒ…è½åœ¨æŸæŸå…¬å¸çš„å‡ºç§Ÿè½¦ä¸Šï¼Œè¿™æ—¶ä½ ä¸ç”¨äº²è‡ªå»æ‰¾æŸæŸå…¬å¸çš„å‡ºç§Ÿè½¦,è­¦å¯Ÿå±€è®©å‡ºç§Ÿè½¦è‡ªå·±ç»™ä½ é€æ¥ï¼Œä½ åªè¦åœ¨è­¦å¯Ÿå±€ç­‰å°±è¡Œã€‚æ‰€ä»¥åœ°å€æ ä¸å˜ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è·¯å¾„ï¼š</strong></p><ol><li>ç›¸å¯¹è·¯å¾„ï¼šå…·æœ‰ä¸€ä¸ªç›¸å¯¹çš„ä½ç½®å…³ç³»ï¼Œä¸ä»¥/å¼€å¤´ã€‚ <ol><li>è§„åˆ™ï¼šç¡®å®šè®¿é—®çš„å½“å‰èµ„æºå’Œç›®æ ‡èµ„æºçš„ç›¸å¯¹ä½ç½®å…³ç³»</li></ol></li><li>ç»å¯¹è·¯å¾„ï¼šé€šè¿‡ç»å¯¹è·¯å¾„å¯ä»¥ç¡®å®šå”¯ä¸€èµ„æºï¼Œä»¥/å¼€å¤´ã€‚ <ol><li>è§„åˆ™ï¼šç»™å®¢æˆ·ç«¯ï¼šéœ€è¦åŠ è™šæ‹Ÿç›®å½•ï¼ˆé¡¹ç›®è·¯å¾„ï¼‰ï¼›ç»™æœåŠ¡å™¨ï¼šåªéœ€è¦èµ„æºè·¯å¾„ï¼ˆServletè·¯å¾„ï¼‰</li><li>å»ºè®®è™šæ‹Ÿç›®å½•ä½¿ç”¨<code>getContextPath()</code>æ¥åŠ¨æ€è·å–</li></ol></li></ol><h4 id="æœåŠ¡å™¨è¾“å‡ºå­—ç¬¦æ•°æ®åˆ°æµè§ˆå™¨" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å™¨è¾“å‡ºå­—ç¬¦æ•°æ®åˆ°æµè§ˆå™¨" aria-hidden="true">#</a> æœåŠ¡å™¨è¾“å‡ºå­—ç¬¦æ•°æ®åˆ°æµè§ˆå™¨</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œä¸¤ä¸ªæ–¹å¼</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//1.è·å–å­—ç¬¦è¾“å‡ºæµ</span>
<span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.è¾“å‡ºæ•°æ®</span>
<span class="token comment">//responseè·å–çš„PrintWriterä¸éœ€è¦æ‰‹åŠ¨flushï¼Œä¸€æ¬¡å“åº”ç»“æŸåä¼šè‡ªåŠ¨é”€æ¯ï¼ŒåŒæ—¶è·å–çš„æµä¹Ÿä¼šè‡ªåŠ¨å…³é—­ï¼Œæµå…³é—­å‰ä¼šåˆ·æ–°ç¼“å†²åŒº</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;h1æ ‡é¢˜&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æœåŠ¡å™¨è¾“å‡ºå­—èŠ‚æ•°æ®åˆ°æµè§ˆå™¨" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡å™¨è¾“å‡ºå­—èŠ‚æ•°æ®åˆ°æµè§ˆå™¨" aria-hidden="true">#</a> æœåŠ¡å™¨è¾“å‡ºå­—èŠ‚æ•°æ®åˆ°æµè§ˆå™¨</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//1.è·å–å­—èŠ‚è¾“å‡ºæµ</span>
<span class="token class-name">ServletOutputStream</span> outputStream <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.è¾“å‡ºæ•°æ®</span>
outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å¥½&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">&quot;GBK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="éªŒè¯ç " tabindex="-1"><a class="header-anchor" href="#éªŒè¯ç " aria-hidden="true">#</a> éªŒè¯ç </h4><p>servlet</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token comment">//1.åˆ›å»ºå›¾ç‰‡å¯¹è±¡ï¼Œå†…å­˜ä¸­ç”Ÿæˆ</span>
<span class="token class-name">BufferedImage</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">.</span>TYPE_INT_RGB<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.ç¾åŒ–å›¾ç‰‡</span>
<span class="token comment">//åˆ›å»ºç”»ç¬”å¯¹è±¡</span>
<span class="token class-name">Graphics</span> graphics <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getGraphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
graphics<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>PINK<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¡«å……é¢œè‰²</span>
graphics<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¡«å……</span>

graphics<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>BLUE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¾¹æ¡†é¢œè‰²</span>
graphics<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> height <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç”»ä¸€ä¸ªçŸ©å½¢å……å½“è¾¹æ¡†</span>

<span class="token comment">//ç”Ÿæˆéšæœºç </span>
<span class="token class-name">String</span> checkCode <span class="token operator">=</span> <span class="token string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Random</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> index<span class="token punctuation">;</span>
<span class="token keyword">char</span> ch<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  index <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>checkCode<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ch <span class="token operator">=</span> checkCode<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  graphics<span class="token punctuation">.</span><span class="token function">drawString</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> i<span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç”»å¹²æ‰°çº¿</span>
graphics<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span>GREEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> y2<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x1 <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  x2 <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  y1 <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  y2 <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
  graphics<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//3.è¾“å‡ºå›¾ç‰‡</span>
<span class="token class-name">ServletOutputStream</span> outputStream <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>html</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> checkCode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;checkCode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            checkCode<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                checkCode<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;/day15/checkCode?&quot;</span> <span class="token operator">+</span> time<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkCode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/day15/checkCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>çœ‹ä¸æ¸… æ¢ä¸€å¼ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="servletcontext" tabindex="-1"><a class="header-anchor" href="#servletcontext" aria-hidden="true">#</a> ServletContext</h2><p>æ¦‚å¿µï¼šä»£è¡¨æ•´ä¸ªWebå·¥ç¨‹ã€‚å¯ä»¥å’Œç¨‹åºçš„å®¹å™¨ï¼ˆæœåŠ¡å™¨ï¼štomcatï¼‰æ¥é€šä¿¡</p><h3 id="è·å–" tabindex="-1"><a class="header-anchor" href="#è·å–" aria-hidden="true">#</a> è·å–</h3><ol><li>é€šè¿‡requestå¯¹è±¡è·å–ï¼š<code>request.getServletContext();</code></li><li>é€šè¿‡HttpServletå¯¹è±¡è·å–ï¼š<code>this.getServletContext();</code></li></ol><p>webåº”ç”¨åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸ç®¡ä½•ç§æ–¹å¼è·å–å‡ºæ¥çš„å¯¹è±¡éƒ½æ˜¯ä¸€æ ·çš„</p><h3 id="åŠŸèƒ½-2" tabindex="-1"><a class="header-anchor" href="#åŠŸèƒ½-2" aria-hidden="true">#</a> åŠŸèƒ½</h3><ol><li><p>è·å–MIMEç±»å‹ï¼šäº’è”ç½‘é€šä¿¡è¿‡ç¨‹ä¸­ä¸€ç§æ–‡ä»¶çš„æ•°æ®ç±»å‹ã€‚æ ¼å¼ï¼šå¤§ç±»å‹/å°ç±»å‹<code>text/html</code> <code>image/jpg</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> <span class="token function">getMimeType</span><span class="token punctuation">(</span><span class="token class-name">String</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–MIMEç±»å‹</span>
<span class="token comment">//æ ¹æ®æ–‡ä»¶çš„åç¼€åæ¥è·å–çš„ï¼Œæ•´ä¸ªMIMEç±»å‹çš„å¯¹åº”å…³ç³»åœ¨æœåŠ¡å™¨é‡Œé¢å­˜å‚¨ç€ tomcatä¸‹çš„web.xml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åŸŸå¯¹è±¡ï¼šå…±äº«æ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
	serlevtContextåŸŸï¼šæœ€å¤§çš„èŒƒå›´ï¼Œå…±äº«æ‰€æœ‰ç”¨æˆ·æ‰€æœ‰è¯·æ±‚çš„æ•°æ®
	ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿ï¼šæœåŠ¡å™¨å¯åŠ¨äº§ç”Ÿï¼ŒæœåŠ¡å™¨å…³é—­æ‰é”€æ¯ã€‚åœ¨å†…å­˜ä¸­é©»ç•™å¾ˆä¹…
*/</span>

<span class="token comment">//å­˜å‚¨æ•°æ®</span>
<span class="token keyword">void</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span> object<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–æ•°æ®</span>
<span class="token class-name">Object</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç§»é™¤æ•°æ®</span>
<span class="token keyword">void</span> <span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è·å–æ–‡ä»¶çš„çœŸå®è·¯å¾„ï¼ˆæœåŠ¡å™¨è·¯å¾„ï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> <span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//ä¸‰ä¸ªä¾‹å­</span>
<span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> bRealPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/b.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//webç›®å½•ä¸‹</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bRealPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> cRealPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/c.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//webç›®å½•ä¸‹çš„WEB-INFç›®å½•ä¸‹</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cRealPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> aRealPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/classes/a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//srcç›®å½•ä¸‹ï¼Œå°†æ¥ä¼šå­˜åœ¨äºwebç›®å½•ä¸‹çš„WEB-INFç›®å½•ä¸‹çš„classesç›®å½•ä¸‹</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aRealPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//srcç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶éƒ½å¯ä»¥ä½¿ç”¨classLoaderæ¥è·å–</span>
<span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token class-name">ServletContextDemo02</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">URL</span> resource <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="æ¡ˆä¾‹-2" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-2" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><p>éœ€æ±‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>1.é¡µé¢æ˜¾ç¤ºè¶…é“¾æ¥
2.ç‚¹å‡»è¶…é“¾æ¥åå¼¹å‡ºä¸‹è½½æç¤ºæ¡†
3.å®Œæˆå›¾ç‰‡æ–‡ä»¶ä¸‹è½½
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç </p><p>servlet</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//ä¸ºé¿å…æµè§ˆå™¨ä¸»åŠ¨è§£æäº†å›¾ç‰‡ç­‰èµ„æºå¯¼è‡´æ— æ³•å®ç°å¼¹å‡ºä¸‹è½½æ¡†ï¼Œè®©hrefä¸ç›´æ¥æŒ‡å‘èµ„æºæ–‡ä»¶ï¼Œè€Œæ˜¯æŒ‡å‘servletå¹¶æ‰‹åŠ¨è®¾ç½®å“åº”å¤´çš„content-dispositionä¸ºattachment;filename=xxx</span>

<span class="token comment">//1.è·å–è¯·æ±‚å‚æ•°ï¼Œæ–‡ä»¶åç§°</span>
<span class="token class-name">String</span> filename <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;filename&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.ä½¿ç”¨å­—èŠ‚è¾“å…¥æµï¼Œè¯»å–æ–‡ä»¶è¿›å…¥å†…å­˜</span>
<span class="token comment">//å¯»æ‰¾æ–‡ä»¶çœŸæ˜¯è·¯å¾„</span>
<span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> realPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/img/&quot;</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//ç”¨å­—èŠ‚æµå…³è”</span>
<span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.è®¾ç½®å“åº”å¤´</span>
<span class="token class-name">String</span> mimeType <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getMimeType</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-type&quot;</span><span class="token punctuation">,</span> mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;content-disposition&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attachment;filename=&quot;</span> <span class="token operator">+</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4.å°†è¾“å…¥æµçš„æ•°æ®å†™å‡ºåˆ°è¾“å‡ºæµä¸­</span>
<span class="token class-name">ServletOutputStream</span> outputStream <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> len<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fileInputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//outputStreamæ˜¯responseä¸­åˆ›å»ºçš„ï¼Œä¸ç”¨å…³é—­ï¼Œä½†æ˜¯fileInputStreamæ˜¯æ‰‹åŠ¨åˆ›å»ºçš„ï¼Œéœ€è¦å…³é—­</span>
fileInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä¼šè¯æŠ€æœ¯" tabindex="-1"><a class="header-anchor" href="#ä¼šè¯æŠ€æœ¯" aria-hidden="true">#</a> ä¼šè¯æŠ€æœ¯</h1><p>æ¦‚å¿µï¼šæµè§ˆå™¨ç¬¬ä¸€æ¬¡ç»™æœåŠ¡å™¨å‘é€èµ„æºï¼Œä¼šè¯å»ºç«‹ã€‚ç›´åˆ°æœ‰ä¸€æ–¹æ–­å¼€ä¸ºæ­¢ã€‚ä¸€æ¬¡ä¼šè¯åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº”ã€‚</p><p>ä½œç”¨ï¼šåœ¨ä¸€æ¬¡ä¼šè¯çš„èŒƒå›´å†…çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ®ã€‚ä½¿ç”¨ä¼šè¯æŠ€æœ¯æ¥è§£å†³HTTPæ— çŠ¶æ€çš„é—®é¢˜</p><p>åˆ†ç±»ï¼š</p><ol><li>å®¢æˆ·ç«¯ä¼šè¯æŠ€æœ¯ï¼šCookie</li><li>æœåŠ¡å™¨ä¼šè¯æŠ€æœ¯ï¼šSession</li></ol><h2 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h2><p>æ¦‚å¿µï¼šå®¢æˆ·ç«¯ä¼šè¯æŠ€æœ¯ï¼Œå°†æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯</p><p><strong>ä½¿ç”¨æ­¥éª¤</strong></p><ol><li><p>åˆ›å»ºCookieå¯¹è±¡ï¼Œç»‘å®šæ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//cookieåå­—å’Œå€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>é€šè¿‡å“åº”å‘é€cookieç»™æµè§ˆå™¨</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">addCookie</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è·å–è¯·æ±‚è·å–cookieä¸­çš„æ•°æ®</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#å®ç°åŸç†" aria-hidden="true">#</a> å®ç°åŸç†</h3><p>åŸºäºå“åº”å¤´<code>set-cookie</code>å’Œè¯·æ±‚å¤´<code>cookie</code>æ¥å®ç°çš„</p><p>è¯·æ±‚åˆ°æœåŠ¡å™¨èµ„æºåï¼ŒæœåŠ¡å™¨ç»™å“åº”å¢åŠ ä¸€ä¸ªå“åº”å¤´<code>set-cookie:msg=hello</code>cookieå‘ˆé”®å€¼å¯¹å½¢å¼ã€‚æµè§ˆå™¨æ”¶åˆ°å“åº”åå‘ç°å“åº”å¤´ä¸­æœ‰<code>set-cookie</code>ï¼ŒçŸ¥é“è¿™æ˜¯ä¸€ä¸ªcookieï¼Œç¼“å­˜åˆ°æµè§ˆå™¨ä¸­ï¼ˆHTTPè¯·æ±‚åè®®çš„çº¦æŸï¼ŒHTTPä¸­å“åº”å¤´è§„å®šï¼šå¦‚æœæµè§ˆå™¨æ”¶åˆ°set-cookieåï¼Œä¼šè‡ªåŠ¨åœ°å°†<code>set-cookie</code>ä¸­çš„æ•°æ®ç¼“å­˜åˆ°å®¢æˆ·ç«¯ï¼‰ã€‚å¹¶ä¸”ä¸‹ä¸€æ¬¡å‘é€è¯·æ±‚çš„æ—¶å€™è‡ªåŠ¨å¸¦ä¸Š<code>set-cookie</code>ä¸­çš„æ•°æ®ï¼ˆæ•°æ®ä¼šè‡ªåŠ¨æ”¾åˆ°<code>cookie</code>è¯·æ±‚å¤´ä¸­ï¼Œ<code>cookie:mes=hello</code>ï¼‰ã€‚åœ¨æœåŠ¡å™¨ä¸­å¯ä»¥è·å–è¯·æ±‚å¤´ä¸­çš„<code>cookie</code>ä¸­çš„æ•°æ®</p><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsru140ibj31si0n4dp7.jpg" alt=""></p><h3 id="ç»†èŠ‚å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ç»†èŠ‚å¤„ç†" aria-hidden="true">#</a> ç»†èŠ‚å¤„ç†</h3><ol><li><p>ä¸€æ¬¡å‘é€å¤šä¸ªcookie</p><p>åˆ›å»ºå¤šä¸ªcookieï¼Œresponseè°ƒç”¨å¤šæ¬¡addCookieå³å¯</p></li><li><p><strong>cookieåœ¨æµè§ˆå™¨ä¸­çš„å­˜æ´»æ—¶é—´</strong></p><ol><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å…³é—­åï¼Œcookieæ•°æ®è¢«é”€æ¯</li><li>æŒä¹…åŒ–å­˜å‚¨ï¼š<code>setMaxAge(int second)</code><ol><li>æ­£æ•°ï¼šå°†cookieçš„æ•°æ®å†™åˆ°ç¡¬ç›˜çš„æ–‡ä»¶ä¸­ã€‚æŒä¹…åŒ–å­˜å‚¨ã€‚secondï¼šå­˜æ´»æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªsecondï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åœ°åˆ é™¤æ‰</li><li>è´Ÿæ•°ï¼šé»˜è®¤ï¼Œå­˜åœ¨æµè§ˆå™¨çš„å†…å­˜ä¸­ï¼Œæµè§ˆå™¨å…³é—­ï¼Œcookieå°±æ²¡äº†</li><li>0ï¼šåˆ é™¤cookieä¿¡æ¯</li></ol></li></ol></li><li><p>cookieå­˜ä¸­æ–‡ã€‚tomcat8ä¹‹å‰ï¼Œä¸èƒ½ç›´æ¥å­˜å‚¨ä¸­æ–‡ã€‚tomcat8ä¹‹åï¼Œæ”¯æŒä¸­æ–‡</p></li><li><p><strong>cookieå…±äº«é—®é¢˜</strong></p><ol><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªæœåŠ¡å™¨ä¸‹å¤šä¸ªé¡¹ç›®ä¸èƒ½å…±äº«</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>setPath(String path) //è®¾ç½®cookieçš„è·å–èŒƒå›´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè®¾ç½®å½“å‰çš„è™šæ‹Ÿç›®å½•ï¼ˆé¡¹ç›®åç§°ï¼‰ï¼Œæ‰€ä»¥åªæœ‰å½“å‰é¡¹ç›®æ‰èƒ½è·å–cookieã€‚å¦‚æœè¦å¤šä¸ªé¡¹ç›®å…±äº«ï¼Œå¯ä»¥æŠŠpathè®¾ç½®ä¸º/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>ä¸åŒæœåŠ¡å™¨çš„å…±äº«é—®é¢˜</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>setDomain(String path) //å¦‚æœè®¾ç½®ä¸€çº§åŸŸåç›¸åŒï¼Œé‚£ä¹ˆå¤šä¸ªæœåŠ¡å™¨ä¹‹é—´ï¼Œcookieå¯ä»¥å…±äº«ã€‚
setDomain(&quot;.baidu.com&quot;) //é‚£ä¹ˆæ‰€æœ‰ä¸€çº§åŸŸåä¸º.baidu.comçš„ç½‘ç«™éƒ½å¯ä»¥å…±äº«è¿™ä¸ªcookie
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ol><h3 id="ç‰¹ç‚¹ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹ä½œç”¨" aria-hidden="true">#</a> ç‰¹ç‚¹ä½œç”¨</h3><ol><li>cookieå­˜å‚¨æ•°æ®åœ¨å®¢æˆ·ç«¯ã€‚æ•°æ®ä¸å®‰å…¨ï¼Œå®¹æ˜“ä¸¢å¤±å’Œç¯¡æ”¹</li><li>æµè§ˆå™¨å¯¹äºå•ä¸ªcookieå¤§å°æœ‰é™åˆ¶ï¼Œä»¥åŠå¯¹åŒä¸€ä¸ªåŸŸåä¸‹çš„æ€»cookieæ•°é‡ä¹Ÿæœ‰é™åˆ¶ï¼ˆ20ï¼‰ã€‚</li><li>cookieä¸€èˆ¬ç”¨äºå­˜å‚¨å°‘é‡ã€ä¸å¤ªæ•æ„Ÿçš„æ•°æ®åˆ°æµè§ˆå™¨</li><li>åœ¨ä¸ç™»é™†çš„æƒ…å†µä¸‹ï¼Œå®ŒæˆæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„èº«ä»½è¯†åˆ«</li></ol><h3 id="æ¡ˆä¾‹-3" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-3" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><p>éœ€æ±‚</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œæç¤ºï¼Œæ‚¨å¥½ï¼Œç¬¬ä¸€æ¬¡è®¿é—®
ç¬¬äºŒæ¬¡è®¿é—®ï¼Œæç¤ºï¼Œæ¬¢è¿å›æ¥ï¼Œä¸Šä¸€æ¬¡çš„è®¿é—®æ—¶é—´
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»£ç </p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>cookies <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬ä¸€æ¬¡ç™»é™†ï¼Œæ¬¢è¿&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span> cookies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;loginTime&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">String</span> value <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//URLè§£ç </span>
			<span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;æ¬¢è¿å›æ¥ï¼Œä¸Šæ¬¡ç™»é™†æ—¶é—´ä¸º&quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">DateFormat</span> dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyyå¹´MMæœˆddæ—¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> format <span class="token operator">=</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//URLç¼–ç ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç çš„é—®é¢˜</span>
<span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>format<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;loginTime&quot;</span><span class="token punctuation">,</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="session" tabindex="-1"><a class="header-anchor" href="#session" aria-hidden="true">#</a> Session</h2><p>æ¦‚å¿µï¼šæœåŠ¡å™¨çš„ä¼šè¯æŠ€æœ¯ï¼Œåœ¨ä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ®ï¼Œå°†æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„HttpSessionå¯¹è±¡ä¸­</p><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>è·å–HttpSessionå¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">HttpSession</span> httpSession <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>ä½¿ç”¨HttpSessionå¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//è®¾ç½®å±æ€§å€¼</span>
<span class="token keyword">void</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//è·å–å±æ€§å€¼</span>
<span class="token class-name">Object</span> <span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//ç§»é™¤å±æ€§</span>
<span class="token keyword">void</span> <span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="å®ç°åŸç†-1" tabindex="-1"><a class="header-anchor" href="#å®ç°åŸç†-1" aria-hidden="true">#</a> å®ç°åŸç†</h3><p>æœåŠ¡å™¨ç¡®ä¿åœ¨ä¸€æ¬¡ä¼šè¯ä¸­å¤šæ¬¡è·å–Sessionå¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼š <strong>sessionæ˜¯ä¾èµ–äºcookieçš„</strong>ã€‚cookieæ˜¯é€šè¿‡è¯·æ±‚å¤´å’Œå“åº”å¤´æ¥å®ç°çš„ã€‚<strong>å½“è·å–sessionçš„æ—¶å€™ä¼šä¼˜å…ˆå»æŸ¥è¯¢cookieä¸­æ˜¯å¦å«æœ‰sessionçš„ä¿¡æ¯</strong>ã€‚å¦‚æœç¬¬ä¸€æ¬¡è·å–sessionï¼Œcookieä¸­å½“ç„¶æ²¡æœ‰sessionçš„ä¿¡æ¯ï¼Œå°±ä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„sessionå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª<strong>å¾ˆé•¿çš„id</strong>ã€‚æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å‘é€å“åº”çš„æ—¶å€™ï¼ŒåŒ…å«<code>set-cookie</code>ï¼Œå…¶ä¸­åŒ…å«ä¸€å¯¹ï¼š<code>JSESSIONID=id</code>ï¼Œå°±æ˜¯å†…å­˜ä¸­sessionå¯¹è±¡çš„idå€¼ã€‚æµè§ˆå™¨æ”¶åˆ°<code>set-cookie</code>ä¹‹åæŠŠJSESSIONIDå­˜åˆ°æµè§ˆå™¨é‡Œé¢ï¼Œä¸‹ä¸€æ¬¡å†è®¿é—®æœåŠ¡å™¨çš„èµ„æºæ—¶ï¼Œè¯·æ±‚å¤´ä¼šå¸¦ä¸Š<code>cookie</code>ï¼Œå…¶ä¸­åŒ…å«<code>JSESSIONID=id</code>ã€‚<strong>æœåŠ¡å™¨ä¼šè‡ªåŠ¨åœ°è·å–</strong>è¿™ä¸ªJSESSIONIDå»<strong>æŸ¥æ‰¾å†…å­˜ä¸­</strong>æ˜¯å¦æœ‰è¿™ä¸ªidä¸ºå®ƒçš„<strong>session</strong>å¯¹è±¡</p><h3 id="ç»†èŠ‚å¤„ç†-1" tabindex="-1"><a class="header-anchor" href="#ç»†èŠ‚å¤„ç†-1" aria-hidden="true">#</a> ç»†èŠ‚å¤„ç†</h3><ol><li><p>å®¢æˆ·ç«¯å…³é—­ï¼ŒæœåŠ¡å™¨ä¸å…³é—­ï¼Œå®¢æˆ·ç«¯é‡æ–°æ‰“å¼€è®¿é—®æœåŠ¡å™¨æ¥è·å–sessionï¼Œä¸¤æ¬¡è·å–çš„session</p><ol><li><p>é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸åŒçš„ã€‚å› ä¸ºå®¢æˆ·ç«¯å…³é—­ï¼Œæ„å‘³ç€ä¼šè¯ç»“æŸï¼Œè¿™æ—¶å’Œå‰ä¸€æ¬¡è®¿é—®<strong>æ˜¯ä¸¤æ¬¡ä¸åŒçš„ä¼šè¯</strong>ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯é‡æ–°è®¿é—®æœåŠ¡å™¨è·å–çš„<strong>sessionæ˜¯ä¸ä¸€æ ·</strong>çš„</p></li><li><p>å¦‚æœéœ€è¦è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨cookieã€‚é”®ä¸ºJSESSIONIDï¼Œå€¼ä¸ºsessionçš„idï¼Œè®¾ç½®æœ€å¤§å­˜æ´»æ—¶é—´ï¼Œè®©cookieæŒä¹…åŒ–åˆ°ç¡¬ç›˜</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;JSESSIONID&quot;</span><span class="token punctuation">,</span> session<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>å®¢æˆ·ç«¯ä¸å…³é—­ï¼ŒæœåŠ¡å™¨å…³é—­ï¼ŒæœåŠ¡å™¨é‡æ–°æ‰“å¼€ï¼Œå®¢æˆ·ç«¯é‡æ–°è®¿é—®æœåŠ¡å™¨æ¥è·å–sessionï¼Œä¸¤æ¬¡è·å–çš„sessionæ˜¯ä¸åŒçš„ã€‚å› ä¸ºæœåŠ¡å™¨å…³é—­åï¼Œå†…å­˜è¢«é”€æ¯ï¼Œsessionä¹Ÿè¢«é”€æ¯ï¼Œä¸¤æ¬¡sessionåœ°å€å€¼åŸºæœ¬ä¸Šä¸å¯èƒ½ä¸€æ ·ã€‚<strong>è™½ç„¶ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¦ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±</strong>ã€‚</p><ol><li>sessionçš„é’åŒ–ï¼šåœ¨æœåŠ¡å™¨æ­£å¸¸å…³é—­ä¹‹å‰ï¼Œå°†sessionå¯¹è±¡åºåˆ—åŒ–åˆ°ç¡¬ç›˜ä¸Š</li><li>sessionçš„æ´»åŒ–ï¼šåœ¨æœåŠ¡å™¨å¯åŠ¨åï¼Œå°†sessionæ–‡ä»¶è½¬åŒ–ä¸ºå†…å­˜ä¸­çš„sessionå¯¹è±¡</li><li>è¿™ä¸¤ä¸ªè¿‡ç¨‹tomcatå¸®æˆ‘ä»¬å®Œæˆã€‚åœ¨ideaä¸­åªæœ‰é’åŒ–ï¼Œæ¯æ¬¡å¯åŠ¨ä¼šæŠŠworkç›®å½•å¹²æ‰ï¼Œæ— æ³•è¯»å–sessions.seræ–‡ä»¶ï¼Œæ— æ³•å®Œæˆæ´»åŒ–</li></ol></li><li><p>sessionçš„é”€æ¯</p><ol><li>æœåŠ¡å™¨å…³é—­</li><li>sessionå¯¹è±¡è°ƒç”¨invalidate()æ–¹æ³•ï¼Œé”€æ¯</li><li>sessioné»˜è®¤å¤±æ•ˆæ—¶é—´ï¼š<strong>30åˆ†é’Ÿ</strong>ã€‚åœ¨tomcatä¸­çš„web.xmlä¸­å¯ä»¥é…ç½®</li></ol></li></ol><h3 id="ç‰¹ç‚¹ä½œç”¨-1" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹ä½œç”¨-1" aria-hidden="true">#</a> ç‰¹ç‚¹ä½œç”¨</h3><ol><li>sessionç”¨äºå­˜å‚¨ä¸€æ¬¡ä¼šè¯å¤šæ¬¡è¯·æ±‚çš„æ•°æ®ï¼Œå­˜åœ¨æœåŠ¡å™¨ç«¯</li><li>sessionå¯ä»¥å­˜å‚¨<strong>ä»»æ„ç±»å‹ï¼Œä»»æ„å¤§å°</strong>çš„æ•°æ®</li></ol><p>åŒºåˆ«ï¼š</p><ol><li>sessionå­˜å‚¨æ•°æ®åœ¨æœåŠ¡å™¨ï¼Œcookieå­˜å‚¨åœ¨å®¢æˆ·ç«¯</li><li>sessionæ²¡æœ‰æ•°æ®å¤§å°é™åˆ¶ï¼Œcookieæœ‰</li><li>sessionæ•°æ®å­˜åœ¨æœåŠ¡å™¨ï¼Œæ¯”è¾ƒå®‰å…¨ï¼Œcookieç›¸å¯¹äºä¸å®‰å…¨</li></ol><h1 id="jsp" tabindex="-1"><a class="header-anchor" href="#jsp" aria-hidden="true">#</a> JSP</h1><p>æ¦‚å¿µï¼šJava Server Page JavaæœåŠ¡å™¨ç«¯é¡µé¢ã€‚ä¸€ä¸ªç‰¹æ®Šçš„é¡µé¢ï¼Œæ—¢å¯ä»¥ç›´æ¥å®šä¹‰htmlæ ‡ç­¾ï¼Œåˆå¯ä»¥å®šä¹‰Javaä»£ç </p><h2 id="åŸç†" tabindex="-1"><a class="header-anchor" href="#åŸç†" aria-hidden="true">#</a> åŸç†</h2><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€httpè¯·æ±‚</li><li>æœåŠ¡å™¨è§£æè¯·æ±‚ä¿¡æ¯ï¼Œæ‰¾æ˜¯å¦æœ‰index.jspèµ„æºã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŠ¥404é”™è¯¯</li><li>å¦‚æœæ‰¾åˆ°äº†index.jspï¼Œä¼šå°†å…¶è½¬æ¢ä¸º.javaæ–‡ä»¶</li><li>ç¼–è¯‘.javaæ–‡ä»¶ç”Ÿæˆ.classæ–‡ä»¶</li><li>ç”±<strong>å­—èŠ‚ç æ–‡ä»¶æä¾›è®¿é—®</strong></li></ol><p>JSPæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªServletã€‚å¯ä»¥ç®€åŒ–ä¹¦å†™ï¼Œè¾“å‡ºæ ‡ç­¾çš„å·¥ä½œç”±jspæ¥å®Œæˆ</p><h2 id="è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#è„šæœ¬" aria-hidden="true">#</a> è„šæœ¬</h2><p>JSPå®šä¹‰Javaä»£ç çš„æ–¹å¼</p><ol><li><code>&lt;% ä»£ç  %&gt;</code>ï¼šå®šä¹‰çš„Javaä»£ç ï¼Œåœ¨serviceæ–¹æ³•ä¸­ã€‚</li><li><code>&lt;%! ä»£ç  %&gt;</code>ï¼šå®šä¹‰çš„æ˜¯æˆå‘˜ å˜é‡/æ–¹æ³•ï¼Œåœ¨jspè½¬æ¢åçš„servletç±»ä¸­çš„æˆå‘˜ä½ç½®</li><li><code>&lt;%= ä»£ç  %&gt;</code>ï¼šç›¸å½“äºè¾“å‡ºè¯­å¥ï¼Œè¾“å‡ºåˆ°é¡µé¢ä¸Šã€‚åœ¨serviceæ–¹æ³•ä¸­ã€‚</li></ol><h2 id="æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#æŒ‡ä»¤" aria-hidden="true">#</a> æŒ‡ä»¤</h2><ol><li><p>pageï¼šé…ç½®jspé¡µé¢çš„</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>æ ¼å¼ï¼š&lt;%@ page æŒ‡ä»¤=&quot;&quot; %&gt;

contentType=&quot;text/html;charset=utf-8&quot; =&gt; response.setContentType()
1.è®¾ç½®å“åº”ä½“çš„mimeç±»å‹åŠå­—ç¬¦é›†
2.è®¾ç½®å½“å‰jspé¡µé¢çš„ç¼–ç 

language
æ”¯æŒçš„è¯­è¨€ã€‚å¼€å‘å‡ºæ¥çš„æ—¶å€™æƒ³ä¸€ç»Ÿè¡¨ç°å±‚æŠ€æœ¯ï¼Œä½†æ˜¯è‡³ä»Šåªæ”¯æŒjava

import
å€’å…¥æ‰€éœ€jaråŒ…

errorPage
å½“å‰é¡µé¢å‘ç”Ÿå¼‚å¸¸åï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°æŒ‡å®šçš„é”™è¯¯é¡µé¢

isErroePage
æ ‡è¯†å½“å‰é¡µé¢æ˜¯å¦æ˜¯é”™è¯¯é¡µé¢ï¼Œä¸æ ‡è¯†å…¶å®ä¹Ÿèƒ½ç”¨ï¼Œä½†æ˜¯æ ‡è¯†ä¹‹åå¯ä»¥ä½¿ç”¨exceptionå¯¹è±¡
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>includeï¼šå¯¼å…¥é¡µé¢çš„èµ„æºæ–‡ä»¶ï¼ˆå¦å¤–çš„jspé¡µé¢ï¼‰</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>æ ¼å¼ï¼š&lt;%@ include file=&quot;&quot; %&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>taglibï¼šå¯¼å…¥èµ„æºï¼ˆæ ‡ç­¾åº“ï¼šjstlï¼‰</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>æ ¼å¼ï¼š&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="æ³¨é‡Š" tabindex="-1"><a class="header-anchor" href="#æ³¨é‡Š" aria-hidden="true">#</a> æ³¨é‡Š</h2><ol><li>htmlæ³¨é‡Šï¼š<code>&lt;!-- --&gt;</code>åªèƒ½æ³¨é‡Šhtmlä»£ç ç‰‡æ®µ</li><li>jspæ³¨é‡Šï¼š<code>&lt;%-- --%&gt;</code>å¯ä»¥æ³¨é‡Šæ‰€æœ‰ï¼ŒåŒ…æ‹¬javaä»£ç </li></ol><h2 id="å†…ç½®å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#å†…ç½®å¯¹è±¡" aria-hidden="true">#</a> å†…ç½®å¯¹è±¡</h2><p>åœ¨jspä¸­ä¸éœ€è¦è·å–å’Œåˆ›å»ºã€å¯ä»¥ç›´æ¥ä½¿ç”¨çš„å¯¹è±¡ã€‚åœ¨jspè½¬æ¢æˆjavaæ–‡ä»¶çš„serviceæ–¹æ³•ä¸­å·²ç»å£°æ˜å¥½äº†</p><p>å‰å››ä¸ªæ˜¯åŸŸå¯¹è±¡</p><ul><li>pageContextâ€”â€”PageContext</li><li>requestâ€”â€”HttpServletRequest</li><li>sessionâ€”â€”HttpSession</li><li>applicationâ€”â€”ServletContext</li><li>responseâ€”â€”HttpServletResponse</li><li>page(ç›¸å½“äºthisï¼Œå½“å‰servletå¯¹è±¡)â€”â€”Object</li><li>outï¼šå°†æ•°æ®è¾“å‡ºåˆ°é¡µé¢ä¸Šçš„å­—ç¬¦è¾“å‡ºæµå¯¹è±¡ã€‚å’Œresponse.getWriter()ç±»ä¼¼ï¼Œä½†æ˜¯writeræ— è®ºå®šä¹‰åœ¨å“ªä¸ªä½ç½®éƒ½ä¼šå…ˆäºoutè¾“å‡ºã€‚<strong>å› ä¸ºtomcatæœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å“åº”ä¹‹å‰ä¼šå…ˆå»æ‰¾responseçš„ç¼“å†²åŒºå†æ‰¾outçš„ç¼“å†²åŒºï¼Œæ‹¼åˆ°å“åº”ä½“ä¸­</strong>ã€‚å»ºè®®ç»Ÿä¸€ä½¿ç”¨outï¼Œå› ä¸ºè½¬æ¢åçš„servletä¸­éƒ½æ˜¯ç”¨outå¯¹è±¡ï¼Œçªç„¶ç”¨responseå¯èƒ½ä¼šæ‰“ä¹±é¡µé¢å¸ƒå±€â€”â€”JspWriter</li><li>configâ€”â€”ServletConfig</li><li>exception(åªæœ‰å£°æ˜äº†isErrorPageæ‰æœ‰)â€”â€”Throwable</li></ul><p>å…±äº«æ•°æ®ä½¿ç”¨<code>xx.setAttribute(key, value)</code> å’Œ<code>xx.getAttribute(key)</code></p><table><thead><tr><th>å¯¹è±¡</th><th>ç±»å‹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>pageContext</td><td>PageContext</td><td>å½“å‰é¡µé¢å…±äº«æ•°æ®ï¼›è¿˜å¯ä»¥è·å–å…¶ä»–8ä¸ªå†…ç½®å¯¹è±¡</td></tr><tr><td>request</td><td>HttpServletRequest</td><td>ä¸€æ¬¡è¯·æ±‚è®¿é—®çš„å¤šä¸ªèµ„æº(ç”¨åœ¨è½¬å‘)</td></tr><tr><td>session</td><td>HttpSession</td><td>ä¸€æ¬¡ä¼šè¯çš„å¤šä¸ªè¯·æ±‚é—´</td></tr><tr><td>application</td><td>ServletContext</td><td>å¤šä¸ªç”¨æˆ·é—´å…±äº«æ•°æ®(å”¯ä¸€ï¼ŒæœåŠ¡å™¨å¯åŠ¨ï¼Œåˆ›å»ºï¼›æœåŠ¡å™¨å…³é—­ï¼Œé”€æ¯)</td></tr><tr><td>response</td><td>HttpServletResponse</td><td>å“åº”å¯¹è±¡</td></tr><tr><td>page</td><td>Object</td><td>å½“å‰é¡µé¢(servlet)å¯¹è±¡ï¼ˆthisï¼‰</td></tr><tr><td>out</td><td>JspWriter</td><td>è¾“å‡ºå¯¹è±¡ï¼Œå¯ä»¥æŠŠæ•°æ®è¾“å‡ºåˆ°é¡µé¢ä¸Š</td></tr><tr><td>config</td><td>ServletConfig</td><td>Servleté…ç½®å¯¹è±¡</td></tr><tr><td>exception</td><td>Throwable</td><td>åªæœ‰å£°æ˜äº†isErrorPageæ‰æœ‰</td></tr></tbody></table><h2 id="elè¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#elè¡¨è¾¾å¼" aria-hidden="true">#</a> ELè¡¨è¾¾å¼</h2><ul><li><p>æ¦‚å¿µï¼šExpression Language è¡¨è¾¾å¼è¯­è¨€</p></li><li><p>ä½œç”¨ï¼šæ›¿æ¢ã€ç®€åŒ–jspé¡µé¢ä¸­javaä»£ç çš„ç¼–å†™</p></li><li><p>è¯­æ³•ï¼š<code>${è¡¨è¾¾å¼}</code></p></li><li><p>æ³¨æ„ï¼šJSPé»˜è®¤æ”¯æŒELè¡¨è¾¾å¼ï¼Œå¦‚æœæƒ³åŸæ ·è¾“å‡ºï¼š<code>${3&gt;4}</code> éœ€è¦å¿½ç•¥ELè¡¨è¾¾å¼ã€‚</p><p>å…·ä½“åšæ³•ï¼š<code>&lt;%@ page isElIgnore=&quot;true&quot; %&gt;</code> æˆ– <code>\${3&gt;4}</code>ï¼ˆå¿½ç•¥æœ¬è¡¨è¾¾å¼ï¼‰</p></li><li><p>ä½¿ç”¨æ–¹å¼ï¼š</p><ul><li>è¿ç®— <ul><li>ç®—æ•°è¿ç®—ç¬¦ï¼Œå…¶ä¸­/=divã€%=mod</li><li>æ¯”è¾ƒè¿ç®—ç¬¦</li><li>é€»è¾‘è¿ç®—ç¬¦ï¼Œå…¶ä¸­&amp;&amp;=andã€||=orã€!=not</li><li>ç©ºè¿ç®—ç¬¦ï¼Œemptyã€‚ <ul><li><code>{empty object}</code>ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²ã€é›†åˆå’Œæ•°ç»„å¯¹è±¡æ˜¯å¦ä¸ºnullå¹¶åˆ¤æ–­é•¿åº¦æ˜¯å¦ä¸º0</li><li><code>{not empty object}</code>ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²ã€é›†åˆå’Œæ•°ç»„å¯¹è±¡æ˜¯å¦ä¸ä¸ºnullå¹¶åˆ¤æ–­é•¿åº¦æ˜¯å¦å¤§äº0</li></ul></li></ul></li><li>è·å–å€¼ <ul><li>elè¡¨è¾¾å¼åªèƒ½ä»åŸŸåç§°ä¸­è·å–å€¼</li><li>è¯­æ³•1ï¼š<code>{åŸŸåç§°.key}</code>ï¼šä»æŒ‡å®šåŸŸä¸­è·å–æŒ‡å®šé”®çš„å€¼ã€‚<strong>å¦‚æœé”®ä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™ï¼Œå¾—åˆ°ç©ºå­—ç¬¦ä¸²</strong></li><li>åŸŸåç§°ï¼špageScope --&gt; pageContext; requestScope --&gt; request; sessionScope --&gt; session; applicationScope --&gt; application(ServletContext)</li><li>è¯­æ³•2ï¼š<code>{key}</code>ï¼šä¾æ¬¡ä»æœ€å°çš„åŸŸä¸­æŸ¥æ‰¾ï¼Œæ˜¯å¦æœ‰è¯¥é”®å¯¹åº”çš„å€¼ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢</li><li>è·å–å¯¹è±¡çš„å€¼ï¼š<code>{requestScope.user.name}</code>æŸ¥æ‰¾requeståŸŸä¸­çš„useré”®å¯¹åº”çš„å€¼ï¼ˆå¯¹è±¡ï¼‰ï¼Œå†è°ƒç”¨è¯¥å¯¹è±¡çš„getName()æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–¹æ³•ï¼Œåˆ™æŠ¥é”™</li><li>è·å–Listé›†åˆçš„å€¼ï¼š<code>{åŸŸåç§°.é”®å[ç´¢å¼•]}</code><strong>å‡å¦‚indexè¶…å‡ºäº†èŒƒå›´ï¼Œä¹Ÿä¸æŠ¥é”™</strong></li><li>è·å–Mapé›†åˆçš„å€¼ï¼š<code>{åŸŸåç§°.é”®å.keyåç§°}</code>æˆ–<code>{åŸŸåç§°.é”®å[&quot;keyåç§°&quot;]}</code></li></ul></li><li>11ä¸ªéšå¼å¯¹è±¡ï¼Œç±»ä¼¼jspçš„å†…ç½®å¯¹è±¡ <ul><li>pageContextï¼šè·å–jspå…¶ä»–8ä¸ªå†…ç½®å¯¹è±¡å’Œ<code>{pageContext.request.contextPath}</code> åŠ¨æ€è·å–è™šæ‹Ÿç›®å½•</li></ul></li></ul></li></ul><h2 id="jstl" tabindex="-1"><a class="header-anchor" href="#jstl" aria-hidden="true">#</a> JSTL</h2><ul><li><p>æ¦‚å¿µï¼šJava Server Pages Tag Library JSPæ ‡å‡†æ ‡ç­¾åº“</p></li><li><p>ä½œç”¨ï¼šç®€åŒ–jspä¸Šçš„javaä»£ç çš„ç¼–å†™</p></li><li><p>å¯¼å…¥ï¼š<code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code> ç”¨cä»£è¡¨è¿™ä¸ªåº“</p></li><li><p>å¸¸ç”¨çš„JSTLæ ‡ç­¾</p><ul><li><p>ifï¼šifè¯­å¥</p><ul><li>æ ¼å¼ï¼š<code>&lt;c:if test=&quot;å¸ƒå°”è¡¨è¾¾å¼&quot;&gt;&lt;/c:if&gt;</code></li><li>æ²¡æœ‰elseè¯­å¥ï¼Œæƒ³è¦å®šä¹‰elseè¯­å¥åˆ™å†é¢å¤–å®šä¹‰ä¸€ä¸ªif</li></ul></li><li><p>chooseï¼šswitchè¯­å¥</p><ul><li><p>æ ¼å¼ï¼š</p><div class="language-jsp ext-jsp line-numbers-mode"><pre class="language-jsp"><code>&lt;c:choose&gt; switch
  &lt;c:when test=&quot;å¸ƒå°”è¡¨è¾¾å¼&quot;&gt;xxx&lt;/c:when&gt; case
  &lt;c:when test=&quot;å¸ƒå°”è¡¨è¾¾å¼&quot;&gt;xxx&lt;/c:when&gt; case
  &lt;c:otherwise&gt;&lt;/c:otherwise&gt; default
&lt;/c:choose&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>forEachï¼šforå¾ªç¯</p><ul><li><p>æ™®é€šforæ ¼å¼ï¼š</p><div class="language-jsp ext-jsp line-numbers-mode"><pre class="language-jsp"><code>&lt;c:forEach begin=&quot;1&quot; end=&quot;10&quot; var=&quot;i&quot; step=&quot;1&quot; varStatus=&quot;s&quot;&gt;
	xxx
  ${s.index} å®¹å™¨ä¸­å…ƒç´ çš„ç´¢å¼•ï¼Œä»0å¼€å§‹
  ${s.count} å¾ªç¯æ¬¡æ•°ï¼Œä»1å¼€å§‹
&lt;/c:forEach&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>foreachæ ¼å¼ï¼š</p><div class="language-jsp ext-jsp line-numbers-mode"><pre class="language-jsp"><code>&lt;c:forEach item=&quot;${list}&quot; var=&quot;str&quot; varStatus=&quot;s&quot;&gt;
	
&lt;/c:forEach&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ul><h2 id="mvcå¼€å‘æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#mvcå¼€å‘æ¨¡å¼" aria-hidden="true">#</a> MVCå¼€å‘æ¨¡å¼</h2><ul><li>jspæ¼”å˜å†å² <ul><li>æ—©æœŸåªæœ‰servletï¼Œåªèƒ½ä½¿ç”¨responseè¾“å‡ºæ ‡ç­¾ï¼Œéå¸¸éº»çƒ¦</li><li>åæ¥æœ‰äº†jspï¼Œjspæ—¢èƒ½å†™å‰ç«¯ä»£ç ï¼ˆHtmlã€Cssã€Jsï¼‰åˆèƒ½å†™åå°ä»£ç ï¼ˆJavaï¼‰ï¼Œè™½è¯´ç®€åŒ–äº†servletå¼€å‘ï¼Œä½†æ˜¯è¿‡åº¦ä½¿ç”¨äº†jspçš„è¯ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œéš¾ä»¥åˆ†å·¥åä½œ</li><li>å†åæ¥ï¼Œjavaçš„webå¼€å‘å€Ÿé‰´mvcå¼€å‘æ¥ä½¿å¾—ç¨‹åºè®¾è®¡æ›´åŠ åˆç†ï¼ˆåˆ†ç¦»å‰åç«¯çš„å·¥ä½œï¼‰</li></ul></li><li>MVC <ul><li>Mï¼šModelï¼Œæ¨¡å‹ã€‚JavaBean <ul><li>å®Œæˆå…·ä½“çš„ä¸šåŠ¡æ“ä½œã€‚å¦‚ï¼šæŸ¥è¯¢æ•°æ®åº“ï¼Œå°è£…å¯¹è±¡</li></ul></li><li>Vï¼šViewï¼Œè§†å›¾ã€‚JSP <ul><li>å±•ç¤ºæ•°æ®ã€‚</li></ul></li><li>Cï¼šControllerï¼Œæ§åˆ¶å™¨ã€‚Servlet <ul><li>è·å–ç”¨æˆ·çš„è¾“å…¥</li><li>è°ƒç”¨æ¨¡å‹</li><li>å°†æ¨¡å‹è¿”å›çš„æ•°æ®äº¤ç»™è§†å›¾è¿›è¡Œå±•ç¤º</li></ul></li><li><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsru237bwj31j40u07wh.jpg" alt=""><ul><li>æµè§ˆå™¨è®¿é—®æ§åˆ¶å™¨ï¼Œ</li><li>æ§åˆ¶å™¨è°ƒç”¨æ¨¡å‹æ¥è¿›è¡Œä¸šåŠ¡æ“ä½œï¼ˆæ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“ï¼‰ï¼Œ</li><li>æ“ä½œå®ŒæŠŠæ•°æ®è¿”å›ç»™æ§åˆ¶å™¨ï¼Œ</li><li>æ§åˆ¶å™¨æŠŠæ•°æ®ç»™è§†å›¾å±•ç¤ºï¼Œ</li><li>ç»™æµè§ˆå™¨åšå‡ºå“åº”</li></ul></li><li>ä¼˜ç‚¹ <ul><li>è€¦åˆåº¦ä½ã€‚ä¸‰éƒ¨åˆ†å„å¸å…¶èŒï¼Œäº’ä¸å¹²æ‰°ã€‚æ–¹ä¾¿ç»´æŠ¤</li><li>é‡ç”¨æ€§é«˜</li></ul></li><li>ç¼ºç‚¹ <ul><li>é¡¹ç›®æ¶æ„å˜å¤æ‚ï¼Œå¯¹å¼€å‘äººå‘˜è¦æ±‚é«˜</li></ul></li></ul></li></ul><h2 id="ä¸‰å±‚æ¶æ„" tabindex="-1"><a class="header-anchor" href="#ä¸‰å±‚æ¶æ„" aria-hidden="true">#</a> ä¸‰å±‚æ¶æ„</h2><ul><li>ç•Œé¢å±‚(è¡¨ç¤ºå±‚/webå±‚)ï¼šç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡é¡µé¢ä¸Šçš„ç»„ä»¶å’ŒæœåŠ¡å™¨è¿›è¡Œäº¤äº’</li><li>ä¸šåŠ¡é€»è¾‘å±‚(serviceå±‚)ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</li><li>æ•°æ®è®¿é—®å±‚(daoå±‚ï¼›<strong>d</strong>ata <strong>a</strong>ccess <strong>o</strong>bject)ï¼šæ•°æ®å­˜å‚¨æ–‡ä»¶ã€‚</li><li><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsru3dhk9j31sq0u0hdu.jpg" alt=""><ul><li>æµè§ˆå™¨è®¿é—®ç•Œé¢å±‚</li><li>ç•Œé¢å±‚è°ƒç”¨å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘å±‚</li><li>ç”±ä¸šåŠ¡é€»è¾‘å±‚è®¿é—®æ•°æ®è®¿é—®å±‚</li><li>æ•°æ®è®¿é—®å±‚æ“ä½œæ•°æ®åº“(å¢åˆ æŸ¥æ”¹)</li><li>æ•°æ®è®¿é—®å±‚æŠŠæ•°æ®å°è£…ç»™ä¸šåŠ¡é€»è¾‘å±‚</li><li>ä¸šåŠ¡é€»è¾‘å±‚æŠŠæ•°æ®ç»™ç•Œé¢å±‚</li><li>ç•Œé¢å±‚æŠŠæ•°æ®æ˜¾ç¤ºåˆ°æµè§ˆå™¨ä¸­</li></ul></li></ul><h1 id="filter" tabindex="-1"><a class="header-anchor" href="#filter" aria-hidden="true">#</a> Filter</h1><ul><li><p>æ¦‚å¿µï¼šå½“è®¿é—®æœåŠ¡å™¨èµ„æºæ—¶ï¼Œè¿‡æ»¤å™¨å¯ä»¥æŠŠè¯·æ±‚æ‹¦æˆªä¸‹æ¥ï¼Œå®Œæˆä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½</p></li><li><p>ä½œç”¨ï¼šä¸€èˆ¬ç”¨äºé€šç”¨çš„æ“ä½œã€‚å¦‚ï¼šç™»å½•éªŒè¯ã€ç»Ÿä¸€ç¼–ç å¤„ç†ã€æ•æ„Ÿå­—ç¬¦çš„è¿‡æ»¤</p></li><li><p>æ­¥éª¤ï¼š</p><ul><li><p>å®šä¹‰ä¸€ä¸ªç±»ï¼Œè®©å…¶å®ç°æ¥å£Filter</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterDemo01</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>å¤å†™æ¥å£æ–¹æ³•</p></li><li><p>é…ç½®æ‹¦æˆªè·¯å¾„</p><ul><li><p>web.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>filter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>cn.itcast.web.filter.FilterDemo02<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>filter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--è®¿é—®æ‰€æœ‰èµ„æºéƒ½ä¼šè¢«æ‹¦æˆª--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ³¨è§£</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span> <span class="token comment">//æ‰€æœ‰è®¿é—®èµ„æºçš„è¯·æ±‚éƒ½ä¼šè¢«è¯¥æ‹¦æˆªå™¨æ‹¦æˆª</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterDemo01</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span> <span class="token comment">//æ‰€æœ‰è®¿é—®èµ„æºçš„è¯·æ±‚éƒ½ä¼šè¢«è¯¥æ‹¦æˆªå™¨æ‹¦æˆª</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterDemo01</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;FilterDemo01æ‰§è¡Œ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ”¾è¡Œ</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span> servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ‰§è¡Œé¡ºåº</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
  <span class="token comment">//ä¸€èˆ¬å¯¹requestå¯¹è±¡è¯·æ±‚æ¶ˆæ¯å¢å¼º</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬1æ­¥è¾“å‡º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//æ”¾è¡Œ</span>
  chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿”å›äº†èµ„æº ä¹Ÿå°±æ˜¯jspä¼šå±•ç¤ºå‡ºæ¥ ç¬¬2æ­¥è¾“å‡º</span>
  <span class="token comment">//ä¸€èˆ¬å¯¹responseå¯¹è±¡å“åº”æ¶ˆæ¯å¢å¼º</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç¬¬3æ­¥è¾“å‡º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ç”Ÿå‘½å‘¨æœŸ</p><ul><li>æœåŠ¡å™¨å¯åŠ¨åï¼Œä¼šåˆ›å»ºfilterå¯¹è±¡ï¼Œç„¶åè°ƒç”¨initæ–¹æ³•ã€‚åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ç”¨äºåŠ è½½èµ„æº</li><li>æœåŠ¡å™¨å…³é—­åï¼Œfilterå¯¹è±¡è¢«é”€æ¯ï¼Œå¦‚æœæœåŠ¡å™¨æ˜¯æ­£å¸¸å…³é—­ï¼Œåˆ™ä¼šè°ƒç”¨destroyæ–¹æ³•ã€‚åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ç”¨äºé‡Šæ”¾èµ„æº</li><li>æ¯ä¸€æ¬¡æ‹¦æˆªè¯·æ±‚éƒ½ä¼šæ‰§è¡ŒdoFilteræ–¹æ³•</li></ul></li><li><p>è¿‡æ»¤å™¨é…ç½®è¯¦è§£</p><ul><li><p>æ‹¦æˆªè·¯å¾„çš„é…ç½®</p><ul><li>å…·ä½“èµ„æºè·¯å¾„ã€‚å¦‚ï¼š/index.jsp åªæœ‰è®¿é—®index.jspèµ„æºæ—¶ï¼Œè¿‡æ»¤å™¨æ‰ä¼šè¢«æ‰§è¡Œ</li><li>ç›®å½•æ‹¦æˆªã€‚å¦‚ï¼š/user/* è®¿é—®/userä¸‹æ‰€æœ‰èµ„æºæ—¶ï¼Œè¿‡æ»¤å™¨éƒ½ä¼šè¢«æ‰§è¡Œ</li><li>åç¼€åæ‹¦æˆªã€‚å¦‚ï¼š*.jsp è®¿é—®æ‰€æœ‰jspèµ„æºæ—¶ï¼Œè¿‡æ»¤å™¨éƒ½ä¼šè¢«æ‰§è¡Œ</li><li>æ‹¦æˆªæ‰€æœ‰èµ„æºï¼š/* è®¿é—®æ‰€æœ‰èµ„æºæ—¶ï¼Œè¿‡æ»¤å™¨éƒ½ä¼šè¢«æ‰§è¡Œ</li></ul></li><li><p>æ‹¦æˆªæ–¹å¼çš„é…ç½®ï¼šèµ„æºè¢«è®¿é—®çš„æ–¹å¼</p><ul><li><p>æ³¨è§£ï¼šè®¾ç½®<code>dispatcherTypes</code></p></li><li><p><code>@WebFilter(urlPatterns = &quot;/*&quot;, dispatcherTypes = DispatcherType.FORWARD)</code></p><ul><li>REQUESTï¼šæµè§ˆå™¨ç›´æ¥è¯·æ±‚èµ„æºï¼ˆé»˜è®¤ï¼‰</li><li>FORWARDï¼šè½¬å‘è®¿é—®èµ„æº</li><li>INCLUDEï¼šåŒ…å«è®¿é—®èµ„æº</li><li>ERRORï¼šé”™è¯¯è·³è½¬èµ„æº</li><li>ASYNCï¼šå¼‚æ­¥è®¿é—®èµ„æº</li></ul></li><li><p>web.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">&quot;</span></span>
   <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>filter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>cn.itcast.web.filter.FilterDemo02<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>filter2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--æ‹¦æˆªè·¯å¾„--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--è®¿é—®æ‰€æœ‰èµ„æºéƒ½ä¼šè¢«æ‹¦æˆª--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>REQUEST<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li><li><p>è¿‡æ»¤å™¨é“¾ï¼ˆé…ç½®å¤šä¸ªè¿‡æ»¤å™¨ï¼‰</p><ul><li><p>æ‰§è¡Œé¡ºåº</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ä»¥2ä¸ªè¿‡æ»¤å™¨ä¸ºä¾‹ ç±»ä¼¼å…¥æ ˆå‡ºæ ˆ
1.è¿‡æ»¤å™¨1
2.è¿‡æ»¤å™¨2
3.èµ„æºæ‰§è¡Œ
4.è¿‡æ»¤å™¨2
5.è¿‡æ»¤å™¨1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è¿‡æ»¤å™¨çš„å…ˆåé¡ºåºé—®é¢˜</p><ul><li>æ³¨è§£ï¼š<strong>æŒ‰ç…§ç±»åå­—ç¬¦ä¸²æ¯”è¾ƒè§„åˆ™ï¼Œå€¼å°çš„å…ˆæ‰§è¡Œ</strong> AFilteræ¯”BFilterå…ˆæ‰§è¡Œ</li><li>web.xmlï¼š** <code>&lt;filter-mapping&gt;</code> è°å®šä¹‰åœ¨ä¸Šè¾¹è°å…ˆæ‰§è¡Œ**</li></ul></li></ul></li></ul><h2 id="æ¡ˆä¾‹-4" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-4" aria-hidden="true">#</a> æ¡ˆä¾‹</h2><h3 id="ç™»å½•éªŒè¯" tabindex="-1"><a class="header-anchor" href="#ç™»å½•éªŒè¯" aria-hidden="true">#</a> ç™»å½•éªŒè¯</h3><ol><li>åˆ¤æ–­æ˜¯å¦æ˜¯ç™»å½•ç›¸å…³çš„èµ„æº <ul><li>æ˜¯ï¼Œæ”¾è¡Œ</li><li>ä¸æ˜¯ï¼Œåˆ¤æ–­æ˜¯å¦ç™»å½•</li></ul></li><li>åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç™»å½• <ul><li>æ˜¯ï¼Œæ”¾è¡Œ</li><li>ä¸æ˜¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢</li></ul></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/2/20
 */</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.å¼ºè½¬HttpServletRequest</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>
        <span class="token comment">//2.è·å–èµ„æºè¯·æ±‚è·¯å¾„</span>
        <span class="token class-name">String</span> uri <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.åˆ¤æ–­æ˜¯å¦åŒ…å«ç™»å½•ç›¸å…³è·¯å¾„ /login.jsp /loginServlet å’Œ å…¶ä»–é™æ€èµ„æº</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>uri<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> uri<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;/loginServlet&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> uri<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;/static/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//è¯æ˜ç”¨æˆ·å°±æ˜¯æƒ³ç™»å½•</span>
            chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">//éœ€è¦éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•</span>
            <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//å·²ç™»å½•</span>
                chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//æœªç™»å½•ï¼Œè·³è½¬ç™»å½•ä¿¡æ¯</span>
                request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;login_msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ‚¨å°šæœªç™»å½•ï¼Œè¯·ç™»å½•&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/login.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ•æ„Ÿè¯æ±‡è¿‡æ»¤" tabindex="-1"><a class="header-anchor" href="#æ•æ„Ÿè¯æ±‡è¿‡æ»¤" aria-hidden="true">#</a> æ•æ„Ÿè¯æ±‡è¿‡æ»¤</h3><ol><li>å¯¹requestå¯¹è±¡çš„getParameter()æ–¹æ³•è¿›è¡Œå¢å¼ºã€‚äº§ç”Ÿä¸€ä¸ªæ–°çš„requestå¯¹è±¡</li><li>æ”¾è¡Œã€‚å°†æ–°çš„requestå¯¹è±¡ä¼ å…¥åˆ°china.doFilteré‡Œé¢</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/2/20
 */</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SensitiveFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå¢å¼ºgetParameter()æ–¹æ³•</span>
        <span class="token class-name">ServletRequest</span> proxyRequest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ServletRequest</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;getParameter&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot;***&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.æ”¾è¡Œ</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>proxyRequest<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> realPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/classes/æ•æ„Ÿè¯æ±‡.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> line<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            bufferedReader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æœ‰ç”¨åˆ°ä»£ç†æ¨¡å¼</strong></p><h3 id="postè¯·æ±‚ä¸­æ–‡æ•°æ®ä¹±ç é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#postè¯·æ±‚ä¸­æ–‡æ•°æ®ä¹±ç é—®é¢˜" aria-hidden="true">#</a> postè¯·æ±‚ä¸­æ–‡æ•°æ®ä¹±ç é—®é¢˜</h3><ol><li>å¯¹requestã€responseå‘ä¸‹è½¬å‹</li><li>è·å–è¯·æ±‚æ–¹å¼</li><li>å¦‚æœæ˜¯postè¯·æ±‚ï¼Œè®¾ç½®requestçš„åŠ å¯†æ–¹å¼ä¸º<code>utf-8</code>ä»¥é˜²ä¹±ç </li><li>å¯¹responseè®¾ç½®å“åº”ç±»å‹ï¼Œå¦‚æœæ˜¯è¿”å›ä¸€å¼ é¡µé¢ï¼š<code>text/html</code>ï¼›å¦‚æœæ˜¯è¿”å›jsonæ•°æ®ï¼š<code>application/json</code>ï¼Œå†åŠ ä¸Š<code>charset=utf-8</code>é˜²æ­¢ä¹±ç </li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>travel<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * è§£å†³å…¨ç«™ä¹±ç é—®é¢˜ï¼Œå¤„ç†æ‰€æœ‰çš„è¯·æ±‚
 */</span>
<span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/*&quot;</span><span class="token punctuation">,</span> filterName <span class="token operator">=</span> <span class="token string">&quot;Character&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CharacterFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> rep<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token comment">//å°†çˆ¶æ¥å£è½¬ä¸ºå­æ¥å£ï¼Œç›®çš„æ˜¯ä¸ºäº†è·å–è¯·æ±‚æ–¹å¼</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>
        <span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> rep<span class="token punctuation">;</span>
        <span class="token comment">//è·å–è¯·æ±‚æ–¹æ³•</span>
        <span class="token class-name">String</span> method <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è§£å†³postè¯·æ±‚ä¸­æ–‡æ•°æ®ä¹±ç é—®é¢˜ï¼Œç”¨æ™®é€šçš„reqä¹Ÿå¯ä»¥</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//å¤„ç†å“åº”ä¹±ç ï¼Œç”¨æ™®é€šçš„repä¹Ÿå¯ä»¥</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="listener" tabindex="-1"><a class="header-anchor" href="#listener" aria-hidden="true">#</a> Listener</h1><ul><li><p>äº‹ä»¶ç›‘å¬æœºåˆ¶</p><ul><li>äº‹ä»¶</li><li>äº‹ä»¶æº</li><li>ç›‘å¬å™¨</li><li>æ³¨å†Œç›‘å¬ï¼šå°†äº‹ä»¶ã€äº‹ä»¶æºã€ç›‘å¬å™¨ç»‘å®šåœ¨ä¸€èµ·ã€‚å½“äº‹ä»¶æºä¸Šå‘ç”ŸæŸä»¶äº‹æƒ…åï¼Œæ‰§è¡Œç›‘å¬å™¨ä»£ç </li></ul></li><li><p>ServletContextListenerï¼šç›‘å¬ServletContextå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">contextInitalized</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//ServletContextå¯¹è±¡è¢«åˆ›å»ºåæ‰§è¡Œ</span>
<span class="token comment">//ä¸€èˆ¬ç”¨äºåŠ è½½èµ„æº</span>
<span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> sce<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//ServletContextå¯¹è±¡è¢«é”€æ¯å‰æ‰§è¡Œ</span>
<span class="token comment">//ä¸€èˆ¬ç”¨äºé‡Šæ”¾èµ„æº</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ­¥éª¤</p><ul><li><p>å®šä¹‰ä¸€ä¸ªç±»ï¼Œè®©å…¶å®ç°ServletContextListener</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContextLoaderListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>å¤å†™æ–¹æ³•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> servletContextEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//1.è·å–ServletContextå¯¹è±¡</span>
  <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> servletContextEvent<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//2.è·å–å€¼</span>
  <span class="token class-name">String</span> initParameter <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">&quot;contextConfigLoader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//3.è·å–çœŸå®è·¯å¾„</span>
  <span class="token class-name">String</span> realPath <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span>initParameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">//4.åŠ è½½é…ç½®æ–‡ä»¶</span>
    <span class="token class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> servletContextEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--åœ¨web.xmlä¸­åˆå§‹åŒ–å‚æ•°--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLoader<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>/WEB-INF/classes/applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>é…ç½®</p><ul><li><p>web.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>cn.itcast.web.listener.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ³¨è§£</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@WebListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ContextListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ul><h1 id="ajax" tabindex="-1"><a class="header-anchor" href="#ajax" aria-hidden="true">#</a> AJAX</h1><ul><li><p>æ¦‚å¿µï¼š<strong>å¼‚æ­¥</strong>çš„JavaScriptå’ŒXml ï¼ˆAsynchronous JavaScript And Xmlï¼‰</p></li><li><p>å®¢æˆ·ç«¯ä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œåœ¨æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œ</p></li><li><p>å®ç°æ–¹å¼</p><ul><li><p>åŸç”ŸJSæ–¹å¼</p></li><li><p>JQueryæ–¹å¼</p><ul><li><p><code>$.ajax()</code>ï¼Œé€šç”¨å‹</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>	<span class="token comment">//è¯·æ±‚åœ°å€</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>	<span class="token comment">//è¯·æ±‚æ–¹å¼</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>	<span class="token comment">//è¯·æ±‚æºå¸¦çš„å‚æ•°</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>	<span class="token comment">//å“åº”æˆåŠŸçš„å›è°ƒå‡½æ•°</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>$.get()</code></p></li><li><p><code>$.post()</code></p></li></ul></li></ul></li></ul><h1 id="json" tabindex="-1"><a class="header-anchor" href="#json" aria-hidden="true">#</a> JSON</h1><ul><li><p>æ¦‚å¿µ JavaScript Object Notation JavaScriptå¯¹è±¡è¡¨ç¤ºæ³•</p></li><li><p>è·å–æ•°æ®</p><ul><li>jsonå¯¹è±¡.é”®å</li><li>jsonå¯¹è±¡[&quot;é”®å&quot;]</li><li>æ•°ç»„å¯¹è±¡[ç´¢å¼•]</li></ul></li><li><p>JSONæ•°æ®å’ŒJavaå¯¹è±¡ç›¸äº’è½¬æ¢ã€‚<strong>å› ä¸ºJSONä½œä¸ºæ•°æ®çš„è½½ä½“åœ¨ç½‘ç»œä¸­è¿›è¡Œä¼ è¾“</strong></p><ul><li><p>å¸¸è§è§£æå™¨ï¼šJsonlib(å®˜æ–¹çš„Jsonæ¥å£å®ç°çš„å®ç°ç±»)ã€Gson(è°·æ­Œ)ã€fastjson(é˜¿é‡Œå·´å·´)ã€jackson(SpringMVCå†…ç½®)</p></li><li><p>Javaå¯¹è±¡è½¬JSON</p><ul><li>å¯¼å…¥jacksonç›¸å…³jaråŒ…</li><li>åˆ›å»ºjacksonæ ¸å¿ƒå¯¹è±¡ï¼šObjectMapper</li><li>è°ƒç”¨ObjectMapperä¸­çš„æ–¹æ³•è¿›è¡Œè½¬æ¢ <ul><li><code>writeValueAsString(obj)</code>å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJsonå­—ç¬¦ä¸²</li><li><code>writeValue(å‚æ•°, obj)</code></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Person</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JsonProcessingException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/2/20
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JacksonTest</span> <span class="token punctuation">{</span>

    <span class="token comment">//Javaå¯¹è±¡-&gt;JSONå­—ç¬¦ä¸²</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºJavaå¯¹è±¡</span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºJacksonæ ¸å¿ƒå¯¹è±¡</span>
        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è½¬æ¢</span>
        <span class="token comment">/*
        è½¬æ¢æ–¹æ³•
        writeValue(å‚æ•°, obj):
            å‚æ•°ï¼š
            Fileï¼šå°†objå¯¹è±¡è½¬ä¸ºjsonå­—ç¬¦ä¸²å¹¶ä¿å­˜åˆ°æ–‡ä»¶ä¸­
            Writerï¼šå°†objå¯¹è±¡è½¬ä¸ºjsonå­—ç¬¦ä¸²å¹¶å¡«å……åˆ°å­—ç¬¦è¾“å‡ºæµ
            OutputStreamï¼šå°†objå¯¹è±¡è½¬ä¸ºjsonå­—ç¬¦ä¸²å¹¶å¡«å……åˆ°å­—èŠ‚è¾“å‡ºæµ
        writeValueAsString(obj):å°†å¯¹è±¡è½¬ä¸ºjsonå­—ç¬¦ä¸²
         */</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Jsonå­—ç¬¦ä¸²è½¬Javaå¯¹è±¡</p><ul><li>å¯¼å…¥jacksonç›¸å…³jaråŒ…</li><li>åˆ›å»ºjacksonæ ¸å¿ƒå¯¹è±¡ï¼šObjectMapper</li><li>è°ƒç”¨ObjectMapperä¸­çš„æ–¹æ³•è¿›è¡Œè½¬æ¢ <ul><li><code>readValue(Jsonå­—ç¬¦ä¸²æ•°æ®, Class)</code></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
  <span class="token comment">//åˆ›å»ºJsonå­—ç¬¦ä¸²</span>
  <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token string">&quot;{\&quot;gender\&quot;:\&quot;ç”·\&quot;,\&quot;name\&quot;:\&quot;å¼ ä¸‰\&quot;,\&quot;age\&quot;:23}&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ›å»ºJacksonæ ¸å¿ƒå¯¹è±¡</span>
  <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Person</span> person <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>æ³¨è§£</p><ul><li><p><code>@JsonIgnore</code>ï¼šæ’é™¤å±æ€§ã€‚å¯¹åº”çš„å±æ€§ä¸ä¼šè¢«è½¬æ¢æˆJSONå­—ç¬¦ä¸²</p></li><li><p><code>@JsonFormat</code>ï¼šå±æ€§å€¼æ ¼å¼åŒ–ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span> <span class="token comment">//å°†æ¥è½¬æ¢æˆjsonå­—ç¬¦ä¸²åä¼šæ˜¾ç¤ºå¹´æœˆæ—¥è€Œä¸æ˜¯æ¯«ç§’å€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>å¤æ‚çš„å¯¹è±¡è½¬æ¢</p><ul><li><p>List</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
  <span class="token comment">//åˆ›å»ºJavaå¯¹è±¡</span>
  <span class="token class-name">Person</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  person1<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Person</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;æå››&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  person2<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Person</span> person3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;ç‹äº”&quot;</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  person3<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ›å»ºé›†åˆå¹¶æ’å…¥å¯¹è±¡</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>person3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ›å»ºJacksonæ ¸å¿ƒå¯¹è±¡</span>
  <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>personList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Map</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
  <span class="token comment">//åˆ›å»ºMapå¯¹è±¡</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ›å»ºJacksonæ ¸å¿ƒå¯¹è±¡</span>
  <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> json <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h1 id="jedis" tabindex="-1"><a class="header-anchor" href="#jedis" aria-hidden="true">#</a> Jedis</h1><ul><li>æ¦‚å¿µï¼šä¸€æ¬¾Javaæ“ä½œredisæ•°æ®åº“çš„å·¥å…·</li></ul><h3 id="ä½¿ç”¨æ­¥éª¤-2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ­¥éª¤-2" aria-hidden="true">#</a> ä½¿ç”¨æ­¥éª¤</h3><ol><li><p>å¯¼å…¥jaråŒ…</p></li><li><p>è·å–é“¾æ¥</p></li><li><p>ä½¿ç”¨</p></li><li><p>å…³é—­è¿æ¥</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¦‚æœä½¿ç”¨ç©ºå‚æ„é€ ï¼Œé‚£ä¹ˆé»˜è®¤å€¼æ˜¯ &quot;localhost&quot;, 6379</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="æ“ä½œå„ç§æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ“ä½œå„ç§æ•°æ®ç»“æ„" aria-hidden="true">#</a> æ“ä½œå„ç§æ•°æ®ç»“æ„</h3><ul><li><p>æ“ä½œstring</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å­˜å‚¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//è·å–</span>
  <span class="token class-name">String</span> username <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å­˜å‚¨å¯ä»¥æŒ‡å®šè¿‡æœŸæ—¶é—´çš„keyå’Œvalueï¼Œæ—¶é—´ä¸€è¿‡ï¼Œè‡ªåŠ¨åˆ é™¤è¯¥é”®å€¼å¯¹</span>
  jedis<span class="token punctuation">.</span><span class="token function">setex</span><span class="token punctuation">(</span><span class="token string">&quot;activeCode&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ“ä½œhash</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å­˜å‚¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;24&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//è·å–</span>
  <span class="token class-name">String</span> name <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">hget</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> user <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">hgetAll</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ“ä½œlist</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å­˜å‚¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">rpush</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//è·å–</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mylist <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å¼¹å‡º</span>
  <span class="token class-name">String</span> lpop <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lpop</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lpop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> rpop <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">rpop</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rpop<span class="token punctuation">)</span><span class="token punctuation">;</span>
  mylist <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ é™¤</span>
  jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;mylist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ“ä½œset</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å­˜å‚¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot;myset&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//è·å–</span>
  <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> myset <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">smembers</span><span class="token punctuation">(</span><span class="token string">&quot;myset&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ é™¤</span>
  jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;myset&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ“ä½œsortedset</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSortedSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å­˜å‚¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;mysortedset&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;äºšç‘Ÿ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;mysortedset&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&quot;åè£”&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;mysortedset&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&quot;å­™å°šé¦™&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//è·å–</span>
  <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mysortedset <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">zrange</span><span class="token punctuation">(</span><span class="token string">&quot;mysortedset&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mysortedset<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ é™¤</span>
  jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;mysortedset&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#è¿æ¥æ± " aria-hidden="true">#</a> è¿æ¥æ± </h3><p>Jedisè¿æ¥æ± ï¼š<strong>JedisPool</strong></p><p>ä½¿ç”¨JedisPoolå¯ä»¥å¯¹Jedisçš„è¿æ¥æœ‰æ›´å¥½çš„å¤ç”¨å’Œç®¡ç†</p><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>åˆ›å»ºè¿æ¥æ± å¯¹è±¡JedisPool</li><li>è°ƒç”¨æ–¹æ³•<code>getResource()</code>æ–¹æ³•è·å–Jedisè¿æ¥</li><li>å½’è¿˜è¿æ¥</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//åˆ›å»ºJedisPoolå¯¹è±¡</span>
  <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//è·å–è¿æ¥</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//ä½¿ç”¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hehe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ é™¤</span>
  jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;hehe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å…³é—­(å®é™…ä¸Šæ˜¯å½’è¿˜åˆ°è¿æ¥æ± ä¸­)</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è¿æ¥æ± å·¥å…·ç±»" tabindex="-1"><a class="header-anchor" href="#è¿æ¥æ± å·¥å…·ç±»" aria-hidden="true">#</a> è¿æ¥æ± å·¥å…·ç±»</h3><p>ä½œç”¨ï¼š</p><ol><li>åŠ è½½é…ç½®æ–‡ä»¶ã€é…ç½®è¿æ¥æ± çš„å‚æ•°</li><li>æä¾›è·å–è¿æ¥çš„æ–¹æ³•</li></ol><p>JedisPoolUtils</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">JedisPool</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">JedisPoolConfig</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/2/22
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JedisPoolUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">JedisPool</span> jedisPool<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">JedisPoolUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;jedis.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">JedisPoolConfig</span> jedisPoolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®æœ€å¤§è¿æ¥æ•°</span>
        jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;maxTotal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®æœ€å¤§ç©ºé—²è¿æ¥æ•°</span>
        jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;maxIdle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>jedisPoolConfig<span class="token punctuation">,</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;port&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">JedisPoolUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jedis</span> <span class="token function">getJedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">cloes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        jedisPool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Test</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJedisPoolUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//è·å–è¿æ¥</span>
  <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token class-name">JedisPoolUtils</span><span class="token punctuation">.</span><span class="token function">getJedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//ä½¿ç”¨</span>
  jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hehe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;haha&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//åˆ é™¤</span>
  jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;hehe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//å…³é—­(å®é™…ä¸Šæ˜¯å½’è¿˜åˆ°è¿æ¥æ± ä¸­)</span>
  jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¡ˆä¾‹-5" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-5" aria-hidden="true">#</a> æ¡ˆä¾‹</h3><ol><li>æä¾›index.htmlé¡µé¢ï¼Œé¡µé¢ä¸­æœ‰ä¸€ä¸ªçœä»½ ä¸‹æ‹‰åˆ—è¡¨</li><li>å½“é¡µé¢åŠ è½½å®Œæˆåå‘é€ajaxè¯·æ±‚ï¼ŒåŠ è½½æ‰€æœ‰çœä»½</li><li><strong>ä½¿ç”¨redisç¼“å­˜ä¸€äº›ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–çš„æ•°æ®ï¼Œå¦‚æœæ•°æ®ç»å¸¸å˜åŒ–ï¼Œé‚£ä¹ˆä½¿ç”¨rediså°±æ²¡æœ‰æ„ä¹‰</strong>ã€‚<strong>å› ä¸ºæ•°æ®åº“çš„æ•°æ®ä¸€æ—¦å‘ç”Ÿæ”¹å˜ï¼Œåˆ™éœ€è¦æ›´æ–°ç¼“å­˜</strong>ã€‚æ•°æ®åº“æ‰§è¡Œå¢åˆ æ”¹çš„æ“ä½œåï¼Œéœ€è¦å°†redisçš„ç¼“å­˜æ¸…ç©ºï¼Œå†æ¬¡å­˜å…¥</li></ol><p><img src="https://wingbun-notes-image.oss-cn-guangzhou.aliyuncs.com/images/007S8ZIlgy1gfsru43slmj31ts0u0npd.jpg" alt=""></p><p>åå°ï¼š</p><ul><li><p>domainï¼šProvince.java</p></li><li><p>daoï¼šProvinceDao.java</p><ul><li>implï¼šProvinceDaoImpl.java</li></ul></li><li><p>serviceï¼šProvinceService.java</p><ul><li><p>implï¼šProvinceServiceImpl.java</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">ProvinceDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">ProvinceDaoImpl</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>domain<span class="token punctuation">.</span></span><span class="token class-name">Province</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ProvinceService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">JedisPoolUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JsonProcessingException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/2/22
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProvinceServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ProvinceService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ProvinceDao</span> provinceDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProvinceDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Province</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Province</span><span class="token punctuation">&gt;</span></span> provinces <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>provinceDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> provinces<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token class-name">JedisPoolUtils</span><span class="token punctuation">.</span><span class="token function">getJedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> provinceJson <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;province&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>provinceJson <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> provinceJson<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Province</span><span class="token punctuation">&gt;</span></span> provinces <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            provinceJson <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>provinces<span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;province&quot;</span><span class="token punctuation">,</span> provinceJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> provinceJson<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>web.servletï¼šFindProvinceServlet.java</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ProvinceService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">ProvinceServiceImpl</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * <span class="token keyword">@author</span> ngwingbun
 * <span class="token keyword">@date</span> 2020/2/22
 */</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/findProvinceServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FindProvinceServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProvinceService</span> provinceService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProvinceServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> provinceService<span class="token punctuation">.</span><span class="token function">findJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>utilï¼šJDBCUtils.javaã€JedisPoolUtils.java</p></li><li><p>druid.properties</p></li></ul><p>å‰ç«¯ï¼š</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/jquery-3.3.1.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/day23/findProvinceServlet&quot;</span><span class="token punctuation">,</span>
                <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">let</span> province <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#province&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">$</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">let</span> option <span class="token operator">=</span> <span class="token string">&quot;&lt;option name=&#39;&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">&quot;&#39;&gt;&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&quot;&lt;/option&gt;&quot;</span>
                        province<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>province<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>--è¯·é€‰æ‹©çœä»½--<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="http" tabindex="-1"><a class="header-anchor" href="#http" aria-hidden="true">#</a> HTTP</h1><p>Hyper Text Transfer Protocol è¶…æ–‡æœ¬ä¼ è¾“åè®®</p><p>ä¼ è¾“åè®®ï¼šå®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šä¿¡æ—¶å‘é€æ•°æ®çš„æ ¼å¼</p><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ol><li>åŸºäºTCP/IPçš„åè®®</li><li>é»˜è®¤ç«¯å£å·æ˜¯80</li><li>åŸºäºè¯·æ±‚å“åº”æ¨¡å‹ï¼šä¸€æ¬¡è¯·æ±‚å¯¹åº”ä¸€æ¬¡å“åº”</li><li>æ— çŠ¶æ€çš„åè®®ï¼šæ¯æ¬¡è¯·æ±‚ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸èƒ½äº¤äº’æ•°æ®</li></ol><p>ç‰ˆæœ¬ï¼š</p><ul><li><p>1.0ï¼šæ¯ä¸€æ¬¡è¯·æ±‚å“åº”éƒ½ä¼šå»ºç«‹æ–°çš„è¿æ¥</p></li><li><p>1.1ï¼šå¤ç”¨è¿æ¥</p></li></ul><h2 id="æ•°æ®æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#æ•°æ®æ ¼å¼" aria-hidden="true">#</a> æ•°æ®æ ¼å¼</h2><h3 id="è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼" aria-hidden="true">#</a> è¯·æ±‚æ¶ˆæ¯æ•°æ®æ ¼å¼</h3><ul><li><p>è¯·æ±‚è¡Œ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>æ ¼å¼ï¼šè¯·æ±‚æ–¹å¼ è¯·æ±‚url è¯·æ±‚åè®®/ç‰ˆæœ¬
GET /login.html HTTP/1.1

GETè¯·æ±‚
è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œä¸­ï¼Œåœ¨urlå
urlé•¿åº¦æœ‰é™åˆ¶
ä¸å¤ªå®‰å…¨ï¼ˆå‚æ•°å¯ä»¥ç”¨è‚‰çœ¼çœ‹è§ï¼‰

POSTè¯·æ±‚
è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚ä½“ä¸­
urlé•¿åº¦æ²¡æœ‰é™åˆ¶
ç›¸å¯¹å®‰å…¨
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è¯·æ±‚å¤´ï¼ˆæµè§ˆå™¨å‘Šè¯‰æœåŠ¡å™¨çš„ä¸€äº›ä¿¡æ¯ï¼‰</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>è¯·æ±‚å¤´å’Œè¯·æ±‚è¡Œæ²¡æœ‰åˆ†éš”

æ ¼å¼ï¼šè¯·æ±‚å¤´:è¯·æ±‚å¤´çš„å€¼
	User-Agent:...
	Host:...

å¸¸è§çš„è¯·æ±‚å¤´
Host:è¯·æ±‚çš„ä¸»æœº
User-Agent:æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ã€‚è·å–UAä¸­çš„æµè§ˆå™¨ä¿¡æ¯ï¼Œåšåˆ°æµè§ˆå™¨å…¼å®¹
Accept-x:å¯ä»¥æ¥å—å“åº”çš„æ ¼å¼ç­‰
Referer:å‘Šè¯‰æœåŠ¡å™¨ï¼Œå½“å‰è¯·æ±‚ä»å“ªé‡Œæ¥ã€‚å¦‚æœæ‰“å¼€æµè§ˆå™¨ç›´æ¥è¾“å…¥åœ°å€è®¿é—®ï¼Œè¯¥å€¼ä¸ºnull
	é˜²ç›—é“¾
	ç»Ÿè®¡
Connection:keep-alive è¯¥è¿æ¥å¯å¤ç”¨ 1.1æ‰å¯ä»¥ç”¨
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è¯·æ±‚ç©ºè¡Œ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ç©ºè¡Œ
åˆ†éš”postè¯·æ±‚è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è¯·æ±‚ä½“</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>å°è£…POSTè¯·æ±‚æ¶ˆæ¯çš„è¯·æ±‚å‚æ•°çš„

GETæ–¹å¼æ²¡æœ‰è¯·æ±‚ä½“
POSTæ–¹å¼
username=xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼" tabindex="-1"><a class="header-anchor" href="#å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼" aria-hidden="true">#</a> å“åº”æ¶ˆæ¯æ•°æ®æ ¼å¼</h3><ul><li><p>å“åº”è¡Œ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>æ ¼å¼ï¼šè¯·æ±‚åè®®/ç‰ˆæœ¬ å“åº”ç çŠ¶æ€ çŠ¶æ€ç æè¿°
Http/1.1 200 OK

çŠ¶æ€ç ï¼š
1. 1xx  æœåŠ¡å™¨æ¥å—å®¢æˆ·ç«¯æ¶ˆæ¯ï¼Œä½†æ²¡æœ‰æ¥å—å®Œæˆï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åå‘é€1xxçš„çŠ¶æ€ç ï¼Œè¯¢é—®å®¢æˆ·ç«¯æ˜¯å¦ç»§ç»­å‘é€
2. 2xx  è¿™æ¬¡è¯·æ±‚æ˜¯æˆåŠŸçš„ã€‚ä»£è¡¨ï¼š200ï¼ˆæˆåŠŸï¼‰
3. 3xx  é‡å®šå‘ã€‚ä»£è¡¨ï¼š302ï¼ˆé‡å®šå‘ï¼‰ 304ï¼ˆè®¿é—®ç¼“å­˜ï¼‰
4. 4xx  å®¢æˆ·ç«¯é”™è¯¯ã€‚ä»£è¡¨ï¼š404ï¼ˆè¯·æ±‚è·¯å¾„æ²¡æœ‰å¯¹åº”çš„èµ„æºï¼‰ 405ï¼ˆè¯·æ±‚æ–¹å¼æ²¡æœ‰å¯¹åº”çš„æ–¹æ³•ï¼‰
5. 5xx  æœåŠ¡å™¨é”™è¯¯ã€‚ä»£è¡¨ï¼š500ï¼ˆæœåŠ¡å™¨å†…éƒ¨å‡ºç°å¼‚å¸¸ï¼‰
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å“åº”å¤´</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>æ ¼å¼ï¼šå¤´åç§°ï¼šå€¼
Content-Type: text/html;charset=UTF-8

å¸¸è§çš„å“åº”å¤´
Content-Typeï¼šæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯æœ¬æ¬¡å“åº”ä½“æ•°æ®æ ¼å¼å’Œç¼–ç æ ¼å¼
Content-dispositionï¼šæœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯ä»¥ä»€ä¹ˆæ ¼å¼æ‰“å¼€å“åº”ä½“æ•°æ®
	é»˜è®¤ï¼šin-lineï¼Œåœ¨å½“å‰é¡µé¢æ‰“å¼€
	attachment;filename=xxxï¼Œä»¥é™„ä»¶å½¢å¼æ‰“å¼€å“åº”ä½“ï¼Œæ–‡ä»¶ä¸‹è½½
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å“åº”ç©ºè¡Œ</p></li><li><p>å“åº”ä½“</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ä¼ è¾“çš„æ•°æ®
å­—èŠ‚æµ/å­—ç¬¦æµ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h1 id="spring" tabindex="-1"><a class="header-anchor" href="#spring" aria-hidden="true">#</a> Spring</h1><h3 id="å±æ€§æ³¨å…¥" tabindex="-1"><a class="header-anchor" href="#å±æ€§æ³¨å…¥" aria-hidden="true">#</a> å±æ€§æ³¨å…¥</h3><ul><li><p>å±æ€§æ³¨å…¥ï¼ˆåå°„çš„æ–¹å¼ï¼‰</p><ul><li><p>ä¼˜ç‚¹ï¼šå˜é‡æ–¹å¼æ³¨å…¥éå¸¸ç®€æ´</p></li><li><p>ç¼ºç‚¹ï¼šä¸èƒ½æœ‰æ•ˆçš„æŒ‡æ˜ä¾èµ–ã€‚è¿™ç§æ–¹å¼å°±è¿‡äºä¾èµ–æ³¨å…¥å®¹å™¨äº†ï¼Œå½“æ²¡æœ‰å¯åŠ¨æ•´ä¸ªä¾èµ–å®¹å™¨æ—¶ï¼Œè¿™ä¸ªç±»å°±ä¸èƒ½è¿è½¬ï¼Œåœ¨åå°„æ—¶æ— æ³•æä¾›è¿™ä¸ªç±»éœ€è¦çš„ä¾èµ–</p></li><li><p>æ ¼å¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">UserService</span> uservice<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>æ„é€ æ–¹æ³•æ³¨å…¥</p><ul><li><p>å¼ºåˆ¶ä¾èµ–æ³¨å…¥ï¼Œé€šè¿‡å¼ºåˆ¶æŒ‡æ˜ä¾èµ–æ³¨å…¥æ¥ä¿è¯è¿™ä¸ªç±»çš„è¿è¡Œ</p></li><li><p>æ ¼å¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">SubjectService</span> subjectService<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> <span class="token class-name">TestServiceImpl</span><span class="token punctuation">(</span><span class="token class-name">UserService</span> userService<span class="token punctuation">,</span> <span class="token class-name">SubjectService</span> subjectService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>userService <span class="token operator">=</span> userService<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>subjectService <span class="token operator">=</span> sujectService<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>setteræ–¹æ³•æ³¨å…¥</p><ul><li><p>å¯é€‰ä¾èµ–æ³¨å…¥ï¼Œå¯æœ‰å¯æ— ï¼Œå³ä½¿æ²¡æœ‰æ³¨å…¥è¿™ä¸ªä¾èµ–ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¼šå½±å“æ•´ä¸ªç±»çš„è¿è¡Œ</p></li><li><p>æ ¼å¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">public</span> setUserService <span class="token punctuation">(</span><span class="token class-name">UserService</span> userService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>userService <span class="token operator">=</span> userService<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>æ€»ç»“</p><ol><li>å¦‚æœè¿™ä¸ªç±»ä½¿ç”¨äº†ä¾èµ–æ³¨å…¥çš„ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»æ‘†è„±äº†è¿™å‡ ä¸ªä¾èµ–å¿…é¡»ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œã€‚</li><li>ç„¶è€Œä½¿ç”¨å˜é‡æ³¨å…¥çš„æ–¹å¼æ˜¯ä¸èƒ½ä¿è¯è¿™ç‚¹çš„ï¼Œå˜é‡æ–¹å¼æ³¨å…¥åº”è¯¥å°½é‡é¿å…ã€‚</li><li>æ—¢ç„¶ä½¿ç”¨äº†ä¾èµ–æ³¨å…¥æ–¹å¼ï¼Œé‚£ä¹ˆå°±è¡¨æ˜è¿™ä¸ªç±»ä¸å†å¯¹è¿™äº›ä¾èµ–è´Ÿè´£ï¼Œè¿™äº›éƒ½ç”±å®¹å™¨ç®¡ç†ï¼Œé‚£ä¹ˆå¦‚ä½•æ¸…æ¥šçš„çŸ¥é“è¿™ä¸ªç±»éœ€è¦å“ªäº›ä¾èµ–å‘¢ï¼Ÿå®ƒå°±è¦ä½¿ç”¨setæ–¹æ³•æ–¹å¼æ³¨å…¥æˆ–è€…æ„é€ å™¨æ³¨å…¥ã€‚</li></ol></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/gelald/javrin/edit/main/demo/src/writings/archive/JavaEE.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="info">2022/7/30 16:21:52</span></div><div class="meta-item contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: yb.ng@foxmail.com">gelald</span><!--]--><!--]--></div></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2022 gelald</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/javrin/assets/app.667f4f53.js" defer></script>
  </body>
</html>
