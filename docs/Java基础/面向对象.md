# 面向对象

> 面向对象的三大特性是老生常谈的话题，我们在这里总结一下。

## 三大特性

### 封装

概念：使对象尽可能隐藏内部细节，只保留一些对外的方法使之与外部发生联系。用户无需知道对象内部细节，但可以通过对象对外提供的方法来访问对象。

优点：

1. 减少耦合：可以独立地进行开发、修改、测试。
2. 便于开发人员理解这个类的功能。
3. 提高系统的可复用性。

### 继承

概念：一个类可以通过关键字 `extend` 以继承父类的非 `private` 成员。解决共性抽取的问题。

特点：

1. 一个类只能有一个直接父类（单继承），但是接口可以有多个父类（多继承）。
2. 一个子类只有一个直接父类，但是一个父类可以拥有多个子类。

### 多态

多态具体分为编译时多态和运行时多态：

- 编译时多态主要是体现为方法的重载。Java虚拟机在编译时根据参数类型、个数、顺序能确定执行重载方法中的某一个。
- 运行时多态主要是体现为父类的引用指向子类的对象。需要在运行时，Java虚拟机才能确定引用指向的具体类型，执行具体类型中的方法。

#### 运行时多态

**运行时多态是面向抽象编程的基础**，使用这个特性可以很方便地进行面向抽象类/接口开发，无需为具体的子类/实现类一一编写逻辑，因为子类重写了父类方法，运行时根据具体的类型执行父类中定义的方法。

运行时多态的条件：

- 继承，没有继承，就没有子类
- 重写，没有重写，多态就没有意义
- 向上转型

> 这里重点说说向上转型
>
> 向上转型的格式就是运行时多态的写法 `父类 对象名 = new 子类();` ，意为创建一个子类对象，但把他看成父类来进行使用。
>
> 这么做的好处是可以灵活地更换不同的子类；弊端是由于「编译看左，运行看右」，这个对象无法调用子类中特有的内容。
>
> ---
>
> 既然有向上转型，也就有向下转型。向下转型具体写法是 `子类 对象名 = (子类) 原父类对象;` ，其实就是将父类对象「还原」成本来的子类对象。
>
> 这么做的好处是可以使用子类的内容；弊端是必须要先确定子类类型，才能进行强转，否则会有 ClassCastException （可以借助 `instanceof` 关键字进行判断）。

## 重写与重载

上文「多态」这一小节提到方法的重写、重载，这里进行两个概念的解释与对比。

1. 重写（Override）：方法名称一样，参数列表一样

2. 重载（Overload）：方法名称一样，参数列表不一样

3. 参数列表包括：参数类型、顺序、数量

4. 注意：两个方法名称一样，不管参数列表是否一样，返回值不允许相同

5. `@Override`起到安全检测的作用，是否达到了重写的目的，不写也没问题

6. 子类方法的访问权限必须大于等于父类方法访问权限

   > public > protected > 什么都不写 > private

7. 子类方法的返回值必须小于等于父类方法的返回值范围(换言之就是返回值类型要相同或者是其子类)

8. 子类方法不能抛出新的异常或者比父类方法声明的异常更广的检查异常。但是可以抛出更少，更有限或者不抛出异常。



