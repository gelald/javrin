# 内存分析

> 在排查 JVM 的相关问题中，内存分析是其中一个有效的手段

## 常见的内存溢出问题

### Java 堆内存溢出

Java 堆内存溢出的情况主要有两种

#### OutOfMemoryError: Java heap space

在 Java 堆中只要不断的创建对象，并且 `GC-Roots` 到对象之间存在引用链，这样 JVM 就不会回收对象。

只要将 `-Xms(初始堆内存)`，`-Xmx(最大堆内存)` 设置为一样就可以禁止自动扩展堆内存。

当使用一个死循环来不断创建对象就会发生 `OutOfMemory`，还可以使用 `-XX:+HeapDumpOutofMemoryErorr` ，当发生 OOM 时会自动 dump 堆栈到文件中。