# MySQL 批量插入数据



## 前言

我们在操作大量数据写入数据库的时候，因为写入数据库涉及到磁盘 IO ，所以最合适的方案就是批量插入，在执行批量插入的时候，一次插入多少数据才合适？如何做到效率最高呢？另外具体反映到程序上面是如何批量插入呢？我们带着这些问题一起向下看，应用环境为批量插入数据到临时表。



## 环境准备

### 数据库版本

```mysql
mysql> select version();
+-----------+
| version() |
+-----------+
| 8.0.29    |
+-----------+
1 row in set (0.00 sec)
```



### 数据库表结构

```mysql
123
```



### 程序依赖

```xml
HikariCP
MyBatis-Plus
```



## 一次插入多少条 SQL 语句效率最高

### 计算一行字段占用的空间



### 查看 MySQL 参数



### 计算一次能插入行数的理论最大值



### 通过测试寻找效率最高的数量



## 影响插入性能的因素



### 插入缓存区



### 使用事务



### 索引



## 插入方式

为了效果更明显，我们加入循环单条插入的方式



### 循环单条插入方式



### 事务插入方式



### JDBC 批量插入方式



### 事务+JDBC批量插入方式



### MyBatisPlus 批量插入方式



## 总结





## 参考链接

[mysql批量插入数据，一次插入多少行数据效率最高？](https://blog.csdn.net/LJFPHP/article/details/99708888)